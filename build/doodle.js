var doodle={};doodle.geom={};if(typeof Function.prototype.bind!=="function")Function.prototype.bind=function(m){var k=this;return function(){return k.apply(m,arguments)}};
doodle.utils={rgb_to_hex:function(m,k,g){m=(g|k<<8|m<<16).toString(16);return"#"+String("000000"+m).slice(-6)},rgb_str_to_hex:function(m){var k=doodle.utils;m=k.rgb_str_to_rgb(m);return k.rgb_to_hex(parseInt(m[0],10),parseInt(m[1],10),parseInt(m[2],10))},rgb_to_rgb_str:function(m,k,g,a){a=a===undefined?1:a;a=a<0?0:a>1?1:a;return a===1?"rgb("+m+","+k+","+g+")":"rgba("+m+","+k+","+g+","+a+")"},rgb_str_to_rgb:function(){var m=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?(.*)\)$/;return function(k){k=
k.trim().match(m);var g=[parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3],10)];k=parseFloat(k[4]);typeof k==="number"&&!isNaN(k)&&g.push(k);return g}}(),hex_to_rgb:function(m){if(typeof m==="string"){m=m[0]==="#"?m.slice(1):m;m=parseInt(m,16)}return[m>>16&255,m>>8&255,m&255]},hex_to_rgb_str:function(m,k){var g=doodle.utils;k=k===undefined?1:k;m=g.hex_to_rgb(m);return g.rgb_to_rgb_str(m[0],m[1],m[2],k)}};
doodle.utils.types=function(){function m(k,g,a){if(typeof k!=="string")throw new TypeError("throw_type_error: type must be a string.");g=g===undefined?"throw_type_error":g;a=a===undefined?"":"("+a+")";throw new TypeError(g+a+": Parameter must be a "+k+".");}return{check_number_type:function(k,g,a){return typeof k==="number"?true:m("number",g||"check_number_type",a)},check_boolean_type:function(k,g,a){return typeof k==="boolean"?true:m("boolean",g||"check_boolean_type",a)},check_string_type:function(k,
g,a){return typeof k==="string"?true:m("string",g||"check_string_type",a)},check_function_type:function(k,g,a){return typeof k==="function"?true:m("function",g||"check_function_type",a)},check_array_type:function(k,g,a){return Array.isArray(k)?true:m("array",g||"check_array_type",a)},check_event_type:function(k,g,a){if(k&&(k.toString()==="[object Event]"||k.toString()==="[object UIEvent]"||k.toString()==="[object MouseEvent]"||k.toString()==="[object KeyboardEvent]"||k.toString()==="[object TextEvent]"))return true;
else m("event",g||"check_event_type",a)},check_canvas_type:function(k,g,a){return k&&k.toString()==="[object HTMLCanvasElement]"?true:m("canvas element",g||"check_canvas_type",a)},check_context_type:function(k,g,a){return k&&k.toString()==="[object CanvasRenderingContext2D]"?true:m("canvas context",g||"check_context_type",a)},check_block_element:function(k,g,a){try{return doodle.utils.get_style_property(k,"display")==="block"?true:m("HTML block element",g||"check_block_type",a)}catch(b){m("HTML block element",
g||"check_block_type",a)}}}}();doodle.utils.get_element=function(m,k){var g;if(typeof m==="string"){m=m[0]==="#"?m.slice(1):m;g=document.getElementById(m)}else g=m;if(!g){k=k===undefined?"get_element":k;throw new ReferenceError(k+": Unable to get HTML element: "+m);}return g};
doodle.utils.get_style_property=function(m,k){try{if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(m,null)[k];else if(m.currentStyle)return m.currentStyle[k];else if(m.style)return m.style[k];else throw new ReferenceError("get_style_property: Cannot read property '"+k+"' of "+m+".");}catch(g){throw new ReferenceError("get_style_property: Cannot read property '"+k+"' of "+m+".");}};
doodle.utils.get_element_property=function(m,k,g){try{var a=doodle.utils.get_style_property(m,k)}catch(b){a=undefined}if(a===undefined||a===null)a=m.getAttribute(k);if(g!==undefined)switch(g){case "int":a=parseInt(a,10);a=isNaN(a)?null:a;break;case "float":a=parseFloat(a);a=isNaN(a)?null:a;break;default:break}return a};
doodle.utils.set_element_property=function(m,k,g,a){a=a===undefined?"css":a;switch(a){case "css":m.style[k]=g;break;case "html":m.setAttribute(k,g);break;default:throw new SyntaxError("set_element_property: type must be 'css' property or 'html' attribute.");}return g};
var Stats=function(){function m(p,q){var u,t,x;for(t=0;t<30;t++)for(u=0;u<73;u++){x=(u+t*74)*4;p[x]=p[x+4];p[x+1]=p[x+5];p[x+2]=p[x+6]}for(t=0;t<30;t++){x=(73+t*74)*4;if(t<q){p[x]=16;p[x+1]=16;p[x+2]=48}else{p[x]=0;p[x+1]=255;p[x+2]=255}}}var k,g="fps",a=0,b=(new Date).getTime(),j=b,h=b,l=0,c=1E3,n=0,e,f,r,o,v=0,y=1E3,A=0,z,s,d,i;k=document.createElement("div");k.style.fontFamily="Helvetica, Arial, sans-serif";k.style.fontSize="9px";k.style.backgroundColor="#000020";k.style.opacity="0.9";k.style.width=
"80px";k.style.paddingTop="2px";k.style.cursor="pointer";k.addEventListener("click",function(){switch(g){case "fps":g="ms";e.style.display="none";f.style.display="none";z.style.display="block";s.style.display="block";break;case "ms":g="fps";e.style.display="block";f.style.display="block";z.style.display="none";s.style.display="none";break}},false);e=document.createElement("div");e.innerHTML="<strong>FPS</strong>";e.style.color="#00ffff";e.style.marginLeft="3px";e.style.marginBottom="3px";k.appendChild(e);
f=document.createElement("canvas");f.width=74;f.height=30;f.style.display="block";f.style.marginLeft="3px";f.style.marginBottom="3px";k.appendChild(f);r=f.getContext("2d");r.fillStyle="#101030";r.fillRect(0,0,f.width,f.height);o=r.getImageData(0,0,f.width,f.height);z=document.createElement("div");z.innerHTML="<strong>MS</strong>";z.style.color="#00ffff";z.style.marginLeft="3px";z.style.marginBottom="3px";z.style.display="none";k.appendChild(z);s=document.createElement("canvas");s.width=74;s.height=
30;s.style.display="block";s.style.marginLeft="3px";s.style.marginBottom="3px";s.style.display="none";k.appendChild(s);d=s.getContext("2d");d.fillStyle="#101030";d.fillRect(0,0,s.width,s.height);i=d.getImageData(0,0,s.width,s.height);return{domElement:k,update:function(){a++;b=(new Date).getTime();v=b-j;y=Math.min(y,v);A=Math.max(A,v);m(i.data,Math.min(30,30-v/200*30));z.innerHTML="<strong>"+v+" MS</strong> ("+y+"-"+A+")";d.putImageData(i,0,0);j=b;if(b>h+1E3){l=Math.round(a*1E3/(b-h));c=Math.min(c,
l);n=Math.max(n,l);m(o.data,Math.min(30,30-l/100*30));e.innerHTML="<strong>"+l+" FPS</strong> ("+c+"-"+n+")";r.putImageData(o,0,0);h=b;a=0}}}};
Object.defineProperty(doodle,"Keyboard",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BACKSPACE:{enumerable:true,writable:false,configurable:false,value:8},TAB:{enumerable:true,writable:false,configurable:false,value:9},ENTER:{enumerable:true,writable:false,configurable:false,value:13},COMMAND:{enumerable:true,writable:false,configurable:false,value:15},SHIFT:{enumerable:true,writable:false,configurable:false,value:16},CONTROL:{enumerable:true,writable:false,configurable:false,
value:17},ALTERNATE:{enumerable:true,writable:false,configurable:false,value:18},PAUSE:{enumerable:true,writable:false,configurable:false,value:19},CAPS_LOCK:{enumerable:true,writable:false,configurable:false,value:20},NUMPAD:{enumerable:true,writable:false,configurable:false,value:21},ESCAPE:{enumerable:true,writable:false,configurable:false,value:27},SPACE:{enumerable:true,writable:false,configurable:false,value:32},PAGE_UP:{enumerable:true,writable:false,configurable:false,value:33},PAGE_DOWN:{enumerable:true,
writable:false,configurable:false,value:34},END:{enumerable:true,writable:false,configurable:false,value:35},HOME:{enumerable:true,writable:false,configurable:false,value:36},LEFT:{enumerable:true,writable:false,configurable:false,value:37},UP:{enumerable:true,writable:false,configurable:false,value:38},RIGHT:{enumerable:true,writable:false,configurable:false,value:39},DOWN:{enumerable:true,writable:false,configurable:false,value:40},INSERT:{enumerable:true,writable:false,configurable:false,value:45},
DELETE:{enumerable:true,writable:false,configurable:false,value:46},NUMBER_0:{enumerable:true,writable:false,configurable:false,value:48},NUMBER_1:{enumerable:true,writable:false,configurable:false,value:49},NUMBER_2:{enumerable:true,writable:false,configurable:false,value:50},NUMBER_3:{enumerable:true,writable:false,configurable:false,value:51},NUMBER_4:{enumerable:true,writable:false,configurable:false,value:52},NUMBER_5:{enumerable:true,writable:false,configurable:false,value:53},NUMBER_6:{enumerable:true,
writable:false,configurable:false,value:54},NUMBER_7:{enumerable:true,writable:false,configurable:false,value:55},NUMBER_8:{enumerable:true,writable:false,configurable:false,value:56},NUMBER_9:{enumerable:true,writable:false,configurable:false,value:57},A:{enumerable:true,writable:false,configurable:false,value:65},B:{enumerable:true,writable:false,configurable:false,value:66},C:{enumerable:true,writable:false,configurable:false,value:67},D:{enumerable:true,writable:false,configurable:false,value:68},
E:{enumerable:true,writable:false,configurable:false,value:69},F:{enumerable:true,writable:false,configurable:false,value:70},G:{enumerable:true,writable:false,configurable:false,value:71},H:{enumerable:true,writable:false,configurable:false,value:72},I:{enumerable:true,writable:false,configurable:false,value:73},J:{enumerable:true,writable:false,configurable:false,value:74},K:{enumerable:true,writable:false,configurable:false,value:75},L:{enumerable:true,writable:false,configurable:false,value:76},
M:{enumerable:true,writable:false,configurable:false,value:77},N:{enumerable:true,writable:false,configurable:false,value:78},O:{enumerable:true,writable:false,configurable:false,value:79},P:{enumerable:true,writable:false,configurable:false,value:80},Q:{enumerable:true,writable:false,configurable:false,value:81},R:{enumerable:true,writable:false,configurable:false,value:82},S:{enumerable:true,writable:false,configurable:false,value:83},T:{enumerable:true,writable:false,configurable:false,value:84},
U:{enumerable:true,writable:false,configurable:false,value:85},V:{enumerable:true,writable:false,configurable:false,value:86},W:{enumerable:true,writable:false,configurable:false,value:87},X:{enumerable:true,writable:false,configurable:false,value:88},Y:{enumerable:true,writable:false,configurable:false,value:89},Z:{enumerable:true,writable:false,configurable:false,value:90},WINDOWS_KEY:{enumerable:true,writable:false,configurable:false,value:91},NUMPAD_0:{enumerable:true,writable:false,configurable:false,
value:96},NUMPAD_1:{enumerable:true,writable:false,configurable:false,value:97},NUMPAD_2:{enumerable:true,writable:false,configurable:false,value:98},NUMPAD_3:{enumerable:true,writable:false,configurable:false,value:99},NUMPAD_4:{enumerable:true,writable:false,configurable:false,value:100},NUMPAD_5:{enumerable:true,writable:false,configurable:false,value:101},NUMPAD_6:{enumerable:true,writable:false,configurable:false,value:102},NUMPAD_7:{enumerable:true,writable:false,configurable:false,value:103},
NUMPAD_8:{enumerable:true,writable:false,configurable:false,value:104},NUMPAD_9:{enumerable:true,writable:false,configurable:false,value:105},NUMPAD_MULTIPLY:{enumerable:true,writable:false,configurable:false,value:106},NUMPAD_ADD:{enumerable:true,writable:false,configurable:false,value:107},NUMPAD_ENTER:{enumerable:true,writable:false,configurable:false,value:108},NUMPAD_SUBTRACT:{enumerable:true,writable:false,configurable:false,value:109},NUMPAD_DECIMAL:{enumerable:true,writable:false,configurable:false,
value:110},NUMPAD_DIVIDE:{enumerable:true,writable:false,configurable:false,value:111},F1:{enumerable:true,writable:false,configurable:false,value:112},F2:{enumerable:true,writable:false,configurable:false,value:113},F3:{enumerable:true,writable:false,configurable:false,value:114},F4:{enumerable:true,writable:false,configurable:false,value:115},F5:{enumerable:true,writable:false,configurable:false,value:116},F6:{enumerable:true,writable:false,configurable:false,value:117},F7:{enumerable:true,writable:false,
configurable:false,value:118},F8:{enumerable:true,writable:false,configurable:false,value:119},F9:{enumerable:true,writable:false,configurable:false,value:120},F10:{enumerable:true,writable:false,configurable:false,value:121},F11:{enumerable:true,writable:false,configurable:false,value:122},F12:{enumerable:true,writable:false,configurable:false,value:123},F13:{enumerable:true,writable:false,configurable:false,value:124},F14:{enumerable:true,writable:false,configurable:false,value:125},F15:{enumerable:true,
writable:false,configurable:false,value:126},SCROLL:{enumerable:true,writable:false,configurable:false,value:145},SEMICOLON:{enumerable:true,writable:false,configurable:false,value:186},EQUAL:{enumerable:true,writable:false,configurable:false,value:187},COMMA:{enumerable:true,writable:false,configurable:false,value:188},MINUS:{enumerable:true,writable:false,configurable:false,value:189},PERIOD:{enumerable:true,writable:false,configurable:false,value:190},SLASH:{enumerable:true,writable:false,configurable:false,
value:191},BACKQUOTE:{enumerable:true,writable:false,configurable:false,value:192},LEFTBRACKET:{enumerable:true,writable:false,configurable:false,value:219},BACKSLASH:{enumerable:true,writable:false,configurable:false,value:220},RIGHTBRACKET:{enumerable:true,writable:false,configurable:false,value:221},QUOTE:{enumerable:true,writable:false,configurable:false,value:222}})});
Object.defineProperty(doodle,"GradientType",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{LINEAR:{enumerable:true,writable:false,configurable:false,value:"linearGradient"},RADIAL:{enumerable:true,writable:false,configurable:false,value:"radialGradient"}})});
Object.defineProperty(doodle,"Pattern",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{REPEAT:{enumerable:true,writable:false,configurable:false,value:"repeat"},REPEAT_X:{enumerable:true,writable:false,configurable:false,value:"repeat-x"},REPEAT_Y:{enumerable:true,writable:false,configurable:false,value:"repeat-y"},NO_REPEAT:{enumerable:true,writable:false,configurable:false,value:"no-repeat"}})});
Object.defineProperty(doodle,"LineCap",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BUTT:{enumerable:true,writable:false,configurable:false,value:"butt"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},SQUARE:{enumerable:true,writable:false,configurable:false,value:"square"}})});
Object.defineProperty(doodle,"LineJoin",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{MITER:{enumerable:true,writable:false,configurable:false,value:"miter"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},BEVEL:{enumerable:true,writable:false,configurable:false,value:"bevel"}})});
(function(){var m={},k,g;doodle.Event=function(a,b,j){var h=arguments.length,l=Object.create(m),c=false,n=false,e=false,f=false,r=0,o=null,v=null,y=new Date,A=null,z=true;if(h===1&&g(arguments[0])){h=arguments[0];a=h.type;b=h.bubbles;j=h.cancelable;e=h.cancelBubble;f=h.defaultPrevented;r=h.eventPhase;o=h.target;v=h.currentTarget;y=h.timeStamp;A=h.srcElement;z=h.returnValue;if(h.__cancel)c=h.__cancel;if(h.__cancelNow)n=h.__cancelNow}else if(h===0||h>3)throw new SyntaxError("[object Event]: Invalid number of parameters.");
Object.defineProperties(l,k);Object.defineProperties(l,{bubbles:{enumerable:true,configurable:false,get:function(){return b}},cancelBubble:{enumerable:true,configurable:false,get:function(){return e},set:function(s){e=s}},cancelable:{enumerable:true,configurable:false,get:function(){return j}},__cancel:{enumerable:false,configurable:false,get:function(){return c}},__cancelNow:{enumerable:false,configurable:false,get:function(){return n}},currentTarget:{enumerable:true,configurable:false,get:function(){return v}},
__setCurrentTarget:{enumerable:false,value:function(s){v=s}},target:{enumerable:true,configurable:false,get:function(){return o}},__setTarget:{enumerable:false,value:function(s){o=s}},eventPhase:{enumerable:true,configurable:false,get:function(){return r}},__setEventPhase:{enumerable:false,value:function(s){r=s}},srcElement:{enumerable:true,configurable:false,get:function(){return A}},timeStamp:{enumerable:true,configurable:false,get:function(){return y}},type:{enumerable:true,configurable:false,
get:function(){return a}},__setType:{enumerable:false,value:function(s){a=s}},returnValue:{enumerable:true,configurable:false,get:function(){return z}},initEvent:{enumerable:true,configurable:false,value:function(s,d,i){d=d===true;i=i===true;a=s;b=d;j=i;return this}},preventDefault:{enumerable:true,configurable:false,value:function(){f=true}},stopPropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)c=true;else throw Error(this+".stopPropagation: Event can not be cancelled.");
}},stopImmediatePropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)n=c=true;else throw Error(this+".stopImmediatePropagation: Event can not be cancelled.");}}});l.initEvent(a,b,j);return l};(function(){var a=Object.getPrototypeOf(document.createEvent("Event"));for(var b in a)if(typeof a[b]!=="function")m[b]=a[b];k={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Event]"}}}})();g=doodle.Event.isEvent=function(a){if(typeof a!==
"object")return false;else a=a.toString();return a==="[object Event]"||a==="[object UIEvent]"||a==="[object MouseEvent]"||a==="[object KeyboardEvent]"||a==="[object TextEvent]"||a==="[object WheelEvent]"}})();
(function(){var m,k=doodle.Event.isEvent;doodle.UIEvent=function(g,a,b,j,h){var l=arguments.length,c=0,n=0,e=0,f=0,r=0,o=0,v=0;if(l===1&&k(arguments[0])){l=arguments[0];g=l.type;a=l.bubbles;b=l.cancelable;j=l.view;h=l.detail;c=l.which||0;n=l.charCode||0;e=l.keyCode||0;f=l.layerX||0;r=l.layerY||0;o=l.pageX||0;v=l.pageY||0;l=Object.create(doodle.Event(l))}else if(l===0||l>5)throw new SyntaxError("[object UIEvent]: Invalid number of parameters.");else{a=a===true;b=b===true;l=Object.create(doodle.Event(g,
a,b))}Object.defineProperties(l,m);Object.defineProperties(l,{view:{enumerable:true,configurable:false,get:function(){return j}},detail:{enumerable:true,configurable:false,get:function(){return h}},which:{enumerable:true,configurable:false,get:function(){return c}},charCode:{enumerable:true,configurable:false,get:function(){return n}},keyCode:{enumerable:true,configurable:false,get:function(){return e}},layerX:{enumerable:true,configurable:false,get:function(){return f}},layerY:{enumerable:true,configurable:false,
get:function(){return r}},pageX:{enumerable:true,configurable:false,get:function(){return o}},pageY:{enumerable:true,configurable:false,get:function(){return v}},initUIEvent:{value:function(y,A,z,s,d){g=y;a=A===true;b=z===true;j=s===undefined?null:s;h=d===undefined?0:d;this.initEvent(g,a,b);return this}}});l.initUIEvent(g,a,b,j,h);return l};m={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object UIEvent]"}}}})();
(function(){var m,k=doodle.Event.isEvent,g=doodle.utils.types.check_string_type;doodle.MouseEvent=function(a,b,j,h,l,c,n,e,f,r,o,v,y,A,z){var s=arguments.length,d=0,i=0,p=0,q=0;if(s===1&&k(arguments[0])){s=arguments[0];a=s.type;b=s.bubbles;j=s.cancelable;h=s.view;l=s.detail;c=s.screenX;n=s.screenY;e=s.clientX;f=s.clientY;r=s.ctrlKey;o=s.altKey;v=s.shiftKey;y=s.metaKey;A=s.button;z=s.relatedTarget;d=s.x||0;i=s.y||0;p=s.offsetX||0;q=s.offsetY||0;s=Object.create(doodle.UIEvent(s))}else if(s===0||s>15)throw new SyntaxError("[object MouseEvent]: Invalid number of parameters.");
else{b=b===true;j=j===true;h=h===undefined?null:h;l=l===undefined?0:l;s=Object.create(doodle.UIEvent(a,b,j,h,l))}Object.defineProperties(s,m);Object.defineProperties(s,{x:{enumerable:true,configurable:false,get:function(){return d}},y:{enumerable:true,configurable:false,get:function(){return i}},screenX:{enumerable:true,configurable:false,get:function(){return c}},screenY:{enumerable:true,configurable:false,get:function(){return n}},clientX:{enumerable:true,configurable:false,get:function(){return e}},
clientY:{enumerable:true,configurable:false,get:function(){return f}},offsetX:{enumerable:true,configurable:false,get:function(){return p}},offsetY:{enumerable:true,configurable:false,get:function(){return q}},ctrlKey:{enumerable:true,configurable:false,get:function(){return r}},altKey:{enumerable:true,configurable:false,get:function(){return o}},shiftKey:{enumerable:true,configurable:false,get:function(){return v}},metaKey:{enumerable:true,configurable:false,get:function(){return y}},button:{enumerable:true,
configurable:false,get:function(){return A}},relatedTarget:{enumerable:true,configurable:false,get:function(){return z}},initMouseEvent:{value:function(u,t,x,B,w,D,E,F,C,H,G,I,J,K,L){b=t===true;j=x===true;h=B===undefined?null:B;l=w===undefined?0:w;c=D===undefined?0:D;n=E===undefined?0:E;e=F===undefined?0:F;f=C===undefined?0:C;r=H===true;o=G===true;v=I===true;y=J===true;A=K===undefined?0:K;z=L===undefined?null:L;this.initUIEvent(a,b,j,h,l);return this}},getModifierState:{value:function(u){g(u,this+
".getModifierState");switch(u){case "Alt":return o;case "Control":return r;case "Meta":return y;case "Shift":return v;default:return false}}}});s.initMouseEvent(a,b,j,h,l,c,n,e,f,r,o,v,y,A,z);return s};m={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object MouseEvent]"}}}})();
(function(){var m,k=doodle.Event.isEvent;doodle.TextEvent=function(g,a,b,j,h,l){var c=arguments.length;if(c===1&&k(arguments[0])){c=arguments[0];g=c.type;a=c.bubbles;b=c.cancelable;j=c.view;h=c.data;l=c.inputMode;c=Object.create(doodle.UIEvent(c))}else if(c===0||c>6)throw new SyntaxError("[object TextEvent]: Invalid number of parameters.");else{a=a===true;b=b===true;j=viewArg===undefined?null:j;c=Object.create(doodle.UIEvent(g,a,b,j))}Object.defineProperties(c,m);Object.defineProperties(c,{data:{enumerable:true,
configurable:false,get:function(){return h}},inputMode:{enumerable:true,configurable:false,get:function(){return l}},initTextEvent:{value:function(n,e,f,r,o,v){g=n;a=e===true;b=f===true;j=r===undefined?null:r;h=o===undefined?"":o;l=v===undefined?doodle.TextEvent.INPUT_METHOD_UNKNOWN:v;this.initUIEvent(g,a,b,j);return this}}});c.initTextEvent(g,a,b,j,h,l);return c};m={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TextEvent]"}}}})();
(function(){var m,k=doodle.Event.isEvent,g=doodle.utils.types.check_string_type;doodle.KeyboardEvent=function(a,b,j,h,l,c,n,e){var f=arguments.length,r=false,o=false,v=false,y=false;if(f===1&&k(arguments[0])){f=arguments[0];a=f.type;b=f.bubbles;j=f.cancelable;h=f.view;l=f.keyIdentifier;c=f.keyLocation;e=f.repeat;r=f.ctrlKey||false;o=f.shiftKey||false;v=f.altKey||false;y=f.metaKey||false;f=Object.create(doodle.UIEvent(f))}else if(f===0||f>8)throw new SyntaxError("[object KeyboardEvent]: Invalid number of parameters.");
else{b=b===true;j=j===true;h=h===undefined?null:h;f=Object.create(doodle.UIEvent(a,b,j,h))}Object.defineProperties(f,m);Object.defineProperties(f,{keyIdentifier:{enumerable:true,configurable:false,get:function(){return l}},keyLocation:{enumerable:true,configurable:false,get:function(){return c}},repeat:{enumerable:true,configurable:false,get:function(){return e}},altKey:{enumerable:true,configurable:false,get:function(){return v}},ctrlKey:{enumerable:true,configurable:false,get:function(){return r}},
metaKey:{enumerable:true,configurable:false,get:function(){return y}},shiftKey:{enumerable:true,configurable:false,get:function(){return o}},initKeyboardEvent:{value:function(A,z,s,d,i,p,q,u){a=A;b=z===true;j=s===true;h=d===undefined?null:d;l=i===undefined?"":i;c=p===undefined?0:p;n=q===undefined?"":q;e=u===true;n.split(" ").forEach(function(t){switch(t){case "Alt":v=true;break;case "Control":r=true;break;case "Meta":y=true;break;case "Shift":o=true;break}});this.initUIEvent(a,b,j,h);return this}},
getModifierState:{value:function(A){g(A,this+".getModifierState");switch(A){case "Alt":return v;case "Control":return r;case "Meta":return y;case "Shift":return o;default:return false}}}});f.initKeyboardEvent(a,b,j,h,l,c,n,e);return f};m={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object KeyboardEvent]"}}}})();
Object.defineProperties(doodle.Event,{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},ADDED:{enumerable:true,writable:false,configurable:false,value:"added"},REMOVED:{enumerable:true,writable:false,configurable:false,value:"removed"},ENTER_FRAME:{enumerable:true,writable:false,configurable:false,value:"enterFrame"},LOAD:{enumerable:true,
writable:false,configurable:false,value:"load"},CHANGE:{enumerable:true,writable:false,configurable:false,value:"change"}});Object.defineProperties(doodle.UIEvent,{FOCUS_IN:{enumerable:true,writable:false,configurable:false,value:"focusIn"}});
Object.defineProperties(doodle.MouseEvent,{CLICK:{enumerable:true,writable:false,configurable:false,value:"click"},DOUBLE_CLICK:{enumerable:true,writable:false,configurable:false,value:"dblclick"},CONTEXT_MENU:{enumerable:true,writable:false,configurable:false,value:"contextmenu"},MOUSE_DOWN:{enumerable:true,writable:false,configurable:false,value:"mousedown"},MOUSE_UP:{enumerable:true,writable:false,configurable:false,value:"mouseup"},MOUSE_WHEEL:{enumerable:true,writable:false,configurable:false,
value:"mousewheel"},MOUSE_MOVE:{enumerable:true,writable:false,configurable:false,value:"mousemove"},MOUSE_OUT:{enumerable:true,writable:false,configurable:false,value:"mouseout"},MOUSE_OVER:{enumerable:true,writable:false,configurable:false,value:"mouseover"},MOUSE_ENTER:{enumerable:true,writable:false,configurable:false,value:"mouseenter"},MOUSE_LEAVE:{enumerable:true,writable:false,configurable:false,value:"mouseleave"}});
Object.defineProperties(doodle.KeyboardEvent,{KEY_PRESS:{enumerable:true,writable:false,configurable:false,value:"keypress"},KEY_UP:{enumerable:true,writable:false,configurable:false,value:"keyup"},KEY_DOWN:{enumerable:true,writable:false,configurable:false,value:"keydown"},KEY_LOCATION_STANDARD:{enumerable:true,writable:false,configurable:false,value:0},KEY_LOCATION_LEFT:{enumerable:true,writable:false,configurable:false,value:1},KEY_LOCATION_RIGHT:{enumerable:true,writable:false,configurable:false,
value:2},KEY_LOCATION_NUMPAD:{enumerable:true,writable:false,configurable:false,value:3},KEY_LOCATION_MOBILE:{enumerable:true,writable:false,configurable:false,value:4},KEY_LOCATION_JOYSTICK:{enumerable:true,writable:false,configurable:false,value:5}});
Object.defineProperties(doodle.TextEvent,{TEXT_INPUT:{enumerable:true,writable:false,configurable:false,value:"textInput"},INPUT_METHOD_UNKNOWN:{enumerable:true,writable:false,configurable:false,value:0},INPUT_METHOD_KEYBOARD:{enumerable:true,writable:false,configurable:false,value:1},INPUT_METHOD_PASTE:{enumerable:true,writable:false,configurable:false,value:2},INPUT_METHOD_DROP:{enumerable:true,writable:false,configurable:false,value:3},INPUT_METHOD_IME:{enumerable:true,writable:false,configurable:false,
value:4},INPUT_METHOD_OPTION:{enumerable:true,writable:false,configurable:false,value:5},INPUT_METHOD_HANDWRITING:{enumerable:true,writable:false,configurable:false,value:6},INPUT_METHOD_VOICE:{enumerable:true,writable:false,configurable:false,value:7},INPUT_METHOD_MULTIMODAL:{enumerable:true,writable:false,configurable:false,value:8},INPUT_METHOD_SCRIPT:{enumerable:true,writable:false,configurable:false,value:9}});
(function(){var m,k;doodle.geom.Point=function(g,a){var b=arguments.length,j,h={};if(b===1&&typeof arguments[0]==="function"){j=arguments[0];g=undefined}else if(b>2)throw new SyntaxError("[object Point]: Invalid number of parameters.");Object.defineProperties(h,m);Object.defineProperties(h,{x:{enumerable:true,configurable:false,get:function(){return g},set:function(l){g=l}},y:{enumerable:true,configurable:false,get:function(){return a},set:function(l){a=l}}});if(j)if(typeof j==="function"){h.compose(0,
0);j.call(h)}else if(Array.isArray(j)&&j.length===2)h.compose.apply(h,j);else if(k(j))h.compose(j.x,j.y);else throw new SyntaxError(this+": Passed an invalid initializer object.");else switch(b){case 0:h.compose(0,0);break;case 2:h.compose(g,a);break;default:throw new SyntaxError(this+": Invalid number of parameters.");}return h};k=doodle.geom.Point.isPoint=function(g){return g&&typeof g.x==="number"&&typeof g.y==="number"};doodle.utils.types.check_point_type=function(g,a,b){if(k(g))return true;else{a=
a===undefined?"check_point_type":a;b=b===undefined?"":"("+b+")";throw new TypeError(a+b+": Parameter must be a point.");}};(function(){var g=doodle.geom.Point;m={length:{enumerable:true,configurable:false,get:function(){return this.distance({x:0,y:0},this)}},compose:{enumerable:false,writable:false,configurable:false,value:function(a,b){this.x=a;this.y=b;return this}},clone:{enumerable:false,writable:false,configurable:false,value:function(){return g(this.x,this.y)}},toArray:{enumerable:false,writable:false,
configurable:false,value:function(){var a=Array(2);a[0]=this.x;a[1]=this.y;return a}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+")"}},distance:{enumerable:false,writable:false,configurable:false,value:function(a,b){var j=b.x-a.x,h=b.y-a.x;return Math.sqrt(j*j+h*h)}},normalize:{enumerable:false,writable:false,configurable:false,value:function(a){var b=this.length;this.x=this.x/b*a;this.y=this.y/b*a;return this}},equals:{enumerable:false,
writable:false,configurable:false,value:function(a){return this&&point&&this.x===a.x&&this.y===a.y||!this&&!a}},interpolate:{enumerable:false,writable:false,configurable:false,value:function(a,b,j){return g(a.x+(b.x-a.x)*j,a.y+(b.y-a.y)*j)}},polar:{enumerable:false,writable:false,configurable:false,value:function(a,b){return g(a*Math.cos(b),a*Math.sin(b))}},add:{enumerable:false,writable:false,configurable:false,value:function(a){return g(this.x+a.x,this.y+a.y)}},subtract:{enumerable:false,writable:false,
configurable:false,value:function(a){return g(this.x-a.x,this.y-a.y)}},offset:{enumerable:false,writable:false,configurable:false,value:function(a,b){this.x+=a;this.y+=b;return this}}}})()})();
(function(){var m,k;doodle.geom.Matrix=function(g,a,b,j,h,l){var c=arguments.length,n,e={};if(c===1){n=arguments[0];g=undefined}else if(c>6)throw new SyntaxError("[object Matrix]: Invalid number of parameters.");Object.defineProperties(e,m);Object.defineProperties(e,{a:{enumerable:true,configurable:false,get:function(){return g},set:function(f){g=f}},b:{enumerable:true,configurable:false,get:function(){return a},set:function(f){a=f}},c:{enumerable:true,configurable:false,get:function(){return b},
set:function(f){b=f}},d:{enumerable:true,configurable:false,get:function(){return j},set:function(f){j=f}},tx:{enumerable:true,configurable:false,get:function(){return h},set:function(f){h=f}},ty:{enumerable:true,configurable:false,get:function(){return l},set:function(f){l=f}}});if(n)if(typeof n==="function"){e.identity();n.call(e)}else if(Array.isArray(n)&&n.length===6)e.compose.apply(e,n);else if(k(n))e.compose(n.a,n.b,n.c,n.d,n.tx,n.ty);else throw new SyntaxError("[object Matrix]: Passed an invalid initializer object.");
else switch(c){case 0:e.identity();break;case 6:e.compose(g,a,b,j,h,l);break;default:throw new SyntaxError("[object Matrix]: Invalid number of parameters.");}return e};k=doodle.geom.Matrix.isMatrix=function(g){return g!==undefined&&g!==null&&typeof g.a==="number"&&typeof g.b==="number"&&typeof g.c==="number"&&typeof g.d==="number"&&typeof g.tx==="number"&&typeof g.ty==="number"};doodle.utils.types.check_matrix_type=function(g,a){if(k(g))return true;else{a=a===undefined?"check_matrix_type":a;throw new TypeError(a+
": Parameter must be a matrix.");}};(function(){var g=doodle.geom.Matrix,a=doodle.geom.Point,b=Math.sin,j=Math.cos,h=Math.atan2,l=Math.tan;m={compose:{enumerable:false,writable:false,configurable:false,value:function(c,n,e,f,r,o){this.a=c;this.b=n;this.c=e;this.d=f;this.tx=r;this.ty=o;return this}},toArray:{enumerable:false,writable:false,configurable:false,value:function(){var c=Array(6);c[0]=this.a;c[1]=this.b;c[2]=this.c;c[3]=this.d;c[4]=this.tx;c[5]=this.ty;return c}},toString:{enumerable:false,
writable:false,configurable:false,value:function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}},equals:{enumerable:false,writable:false,configurable:false,value:function(c){return this&&c&&this.a===c.a&&this.b===c.b&&this.c===c.c&&this.d===c.d&&this.tx===c.tx&&this.ty===c.ty||!this&&!c}},identity:{enumerable:false,writable:false,configurable:false,value:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this}},clone:{enumerable:false,
writable:false,configurable:false,value:function(){return g(this.a,this.b,this.c,this.d,this.tx,this.ty)}},multiply:{enumerable:false,writable:false,configurable:false,value:function(c){return this.compose(this.a*c.a+this.c*c.b,this.b*c.a+this.d*c.b,this.a*c.c+this.c*c.d,this.b*c.c+this.d*c.d,this.a*c.tx+this.c*c.ty+this.tx,this.b*c.tx+this.d*c.ty+this.ty)}},rotate:{enumerable:false,writable:false,configurable:false,value:function(c){var n=j(c);c=b(c);return this.multiply(g(n,c,-c,n,0,0))}},deltaRotate:{enumerable:false,
writable:false,configurable:false,value:function(c){var n=this.tx,e=this.ty;this.rotate(c);this.tx=n;this.ty=e;return this}},rotation:{enumerable:true,configurable:false,get:function(){return h(this.b,this.a)},set:function(c){var n=j(c);c=b(c);return this.compose(n,c,-c,n,this.tx,this.ty)}},scale:{enumerable:false,writable:false,configurable:false,value:function(c,n){return this.multiply(g(c,0,0,n,0,0))}},deltaScale:{enumerable:false,writable:false,configurable:false,value:function(c,n){var e=this.tx,
f=this.ty;this.scale(c,n);this.tx=e;this.ty=f;return this}},translate:{enumerable:false,writable:false,configurable:false,value:function(c,n){this.tx+=c;this.ty+=n;return this}},skew:{enumerable:false,writable:false,configurable:false,value:function(c,n){var e=l(c),f=l(n);return this.multiply(g(1,f,e,1,0,0))}},deltaSkew:{enumerable:false,writable:false,configurable:false,value:function(c,n){var e=this.tx,f=this.ty;this.skew(c,n);this.tx=e;this.ty=f;return this}},add:{enumerable:false,writable:false,
configurable:false,value:function(c){this.a+=c.a;this.b+=c.b;this.c+=c.c;this.d+=c.d;this.tx+=c.tx;this.ty+=c.ty;return this}},invert:{enumerable:false,writable:false,configurable:false,value:function(){var c=this.a*this.d-this.b*this.c;return this.compose(this.d/c,-this.b/c,-this.c/c,this.a/c,(this.ty*this.c-this.d*this.tx)/c,-(this.ty*this.a-this.b*this.tx)/c)}},transformPoint:{enumerable:false,writable:false,configurable:false,value:function(c){return a(this.a*c.x+this.c*c.y+this.tx,this.b*c.x+
this.d*c.y+this.ty)}},deltaTransformPoint:{enumerable:false,writable:false,configurable:false,value:function(c){return a(this.a*c.x+this.c*c.y,this.b*c.x+this.d*c.y)}},rotateAroundExternalPoint:{enumerable:false,writable:false,configurable:false,value:function(c,n){var e=g().rotate(n),f,r=c.x,o=c.y;this.translate(-r,-o);f=e.transformPoint({x:this.tx,y:this.ty});this.tx=f.x;this.ty=f.y;return this.multiply(e).translate(r,o)}},rotateAroundInternalPoint:{enumerable:false,writable:false,configurable:false,
value:function(c,n){return this.rotateAroundExternalPoint(this.transformPoint(c),n)}},matchInternalPointWithExternal:{enumerable:false,writable:false,configurable:false,value:function(c,n){var e=this.transformPoint(c);return this.translate(n.x-e.x,n.y-e.y)}},interpolate:{enumerable:false,writable:false,configurable:false,value:function(c,n){this.a+=(c.a-this.a)*n;this.b+=(c.b-this.b)*n;this.c+=(c.c-this.c)*n;this.d+=(c.d-this.d)*n;this.tx+=(c.tx-this.tx)*n;this.ty+=(c.ty-this.ty)*n;return this}}}})()})();
(function(){var m,k;doodle.geom.Rectangle=function(g,a,b,j){var h=arguments.length,l,c={};if(h===1&&typeof arguments[0]==="function"){l=arguments[0];g=undefined}else if(h>4)throw new SyntaxError("[object Rectangle]: Invalid number of parameters.");Object.defineProperties(c,m);Object.defineProperties(c,{x:{enumerable:true,configurable:false,get:function(){return g},set:function(n){g=n}},y:{enumerable:true,configurable:false,get:function(){return a},set:function(n){a=n}},width:{enumerable:true,configurable:false,
get:function(){return b},set:function(n){b=n}},height:{enumerable:true,configurable:false,get:function(){return j},set:function(n){j=n}}});if(l)if(typeof l==="function"){c.identity();l.call(c)}else if(isRectangle(l))c.compose(l.x,l.y,l.width,l.height);else throw new SyntaxError("[object Rectangle]: Passed an invalid initializer object.");else switch(h){case 0:c.compose(0,0,0,0);break;case 4:c.compose(g,a,b,j);break;default:throw new SyntaxError("[object Rectangle]: Invalid number of parameters.");
}return c};k=doodle.geom.Rectangle.isRect=function(g){return typeof g.x==="number"&&typeof g.y==="number"&&typeof g.width==="number"&&typeof g.height==="number"&&typeof g.top==="number"&&typeof g.bottom==="number"&&typeof g.left==="number"&&typeof g.right==="number"};doodle.utils.types.check_rect_type=function(g,a){if(k(g))return true;else{a=a===undefined?"check_rect_type":a;throw new TypeError(a+": Parameter must be a rectangle.");}};(function(){var g=doodle.geom.Rectangle;m={top:{enumerable:true,
configurable:false,get:function(){return this.y},set:function(a){this.y=a;this.height-=a}},right:{enumerable:true,configurable:false,get:function(){return this.x+this.width},set:function(a){this.width=a-this.x}},bottom:{enumerable:true,configurable:false,get:function(){return this.y+this.height},set:function(a){this.height=a-this.y}},left:{enumerable:true,configurable:false,get:function(){return this.x},set:function(a){this.x=a;this.width-=a}},clone:{enumerable:false,writable:false,configurable:false,
value:function(){return g(this.x,this.y,this.width,this.height)}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+")"}},toArray:{enumerable:false,writable:false,configurable:false,value:function(){return[this.top,this.right,this.bottom,this.left]}},compose:{enumerable:false,writable:false,configurable:false,value:function(a,b,j,h){this.x=a;this.y=b;this.width=j;this.height=h;return this}},offset:{enumerable:false,
writable:false,configurable:false,value:function(a,b){this.x+=a;this.y+=b;return this}},inflate:{enumerable:false,writable:false,configurable:false,value:function(a,b){this.x-=a;this.width+=2*a;this.y-=b;this.height+=2*b;return this}},equals:{enumerable:false,writable:false,configurable:false,value:function(a){return this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height}},isEmpty:{enumerable:false,writable:false,configurable:false,value:function(){return this.width>=0||this.height>=
0}},containsPoint:{enumerable:false,writable:false,configurable:false,value:function(a){var b=a.x;a=a.y;return b>=this.left&&b<=this.right&&a>=this.top&&a<=this.bottom}},containsRect:{enumerable:false,writable:false,configurable:false,value:function(a){return this.containsPoint({x:a.x,y:a.y})&&this.containsPoint({x:a.right,y:a.y})&&this.containsPoint({x:a.right,y:a.bottom})&&this.containsPoint({x:a.x,y:a.bottom})}},intersects:{enumerable:false,writable:false,configurable:false,value:function(a){return this.containsPoint({x:a.x,
y:a.y})||this.containsPoint({x:a.right,y:a.y})||this.containsPoint({x:a.right,y:a.bottom})||this.containsPoint({x:a.x,y:a.bottom})}},intersection:{enumerable:false,writable:false,configurable:false,value:function(a){var b=g();if(this.intersects(a)){b.left=Math.max(this.left,a.left);b.top=Math.max(this.top,a.top);b.right=Math.min(this.right,a.right);b.bottom=Math.min(this.bottom,a.bottom)}return b}},union:{enumerable:false,writable:false,configurable:false,value:function(a){var b=g();b.left=Math.min(this.left,
a.left);b.top=Math.min(this.top,a.top);b.right=Math.max(this.right,a.right);b.bottom=Math.max(this.bottom,a.bottom);return b}}}})()})();
(function(){var m,k;doodle.EventDispatcher=function(){var g=arguments.length,a,b={},j={};if(g===1&&typeof arguments[0]==="function")a=arguments[0];else if(g>0)throw new SyntaxError("[object EventDispatcher]: Invalid number of parameters.");Object.defineProperties(b,m);Object.defineProperties(b,{eventListeners:{enumerable:true,configurable:false,get:function(){return j}}});a&&a.call(b);return b};doodle.EventDispatcher.dispatcher_queue=[];k=doodle.EventDispatcher.isEventDispatcher=function(g){return g.toString()===
"[object EventDispatcher]"};doodle.EventDispatcher.inheritsEventDispatcher=function(g){for(;g;)if(k(g))return true;else{if(typeof g!=="object")return false;g=Object.getPrototypeOf(g)}return false};doodle.utils.types.check_eventdispatcher_type=function(g,a,b){if(doodle.EventDispatcher.inheritsEventDispatcher(g))return true;else{a=a===undefined?"check_eventdispatcher_type":a;b=b===undefined?"":"("+b+")";throw new TypeError(a+b+": Parameter must be an EventDispatcher.");}};(function(){var g=doodle.EventDispatcher.dispatcher_queue,
a=doodle.utils.types.check_function_type;m={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object EventDispatcher]"}},modify:{enumerable:false,writable:false,configurable:false,value:function(b){b.call(this);return this}},addEventListener:{enumerable:false,writable:false,configurable:false,value:function(b,j,h){h=h===true;var l=this;this.eventListeners[b]||(this.eventListeners[b]={capture:[],bubble:[]});this.eventListeners[b][h?"capture":"bubble"].push(j);g.every(function(c){return l!==
c})&&g.push(l)}},removeEventListener:{enumerable:false,writable:false,configurable:false,value:function(b,j,h){h=h===true;if(this.eventListeners[b]){var l=this.eventListeners[b];h=l[h?"capture":"bubble"];h.splice(h.indexOf(j),1);l.capture.length===0&&l.bubble.length===0&&delete this.eventListeners[b];Object.keys(this.eventListeners).length===0&&g.splice(g.indexOf(this),1)}}},handleEvent:{enumerable:false,writable:false,configurable:false,value:function(b){var j=b.eventPhase===doodle.Event.CAPTURING_PHASE?
"capture":"bubble",h=this.eventListeners[b.type],l=0,c;if((h=h&&h[j])&&h.length>0){b.__setCurrentTarget(this);l=h.length;for(c=0;c<l;c+=1){a(h[c],this+".handleEvent::listeners["+c+"]");j=h[c].call(this,b);if(j===false||b.returnValue===false)b.__cancel||b.stopPropagation();if(b.__cancelNow)break}}return l>0?true:false}},dispatchEvent:{enumerable:true,writable:false,configurable:false,value:function(b){var j,h,l=[],c;if(b.__cancel)return false;b.target||b.__setTarget(this);j=b.target;for(h=j.parent||
null;h;){l.push(h);h=h.parent}b.__setEventPhase(b.CAPTURING_PHASE);for(c=h=l.length;(c-=1)>=0;){l[c].handleEvent(b);if(b.__cancel)return true}b.__setEventPhase(b.AT_TARGET);j.handleEvent(b);if(b.__cancel)return true;if(!b.bubbles||b.cancelBubble)return true;b.__setEventPhase(b.BUBBLING_PHASE);for(c=0;c<h;c+=1){l[c].handleEvent(b);if(b.__cancel||b.cancelBubble)return true}return true}},broadcastEvent:{enumerable:true,writable:false,configurable:false,value:function(b){var j,h,l;if(b.__cancel)throw Error(this+
".broadcastEvent: Can not dispatch a cancelled event.");b.target||b.__setTarget(this);j=g.filter(function(c){return c.hasEventListener(b.type)});l=0;for(h=j.length;l<h;l+=1){j[l].handleEvent(b);if(b.__cancel)break}return true}},hasEventListener:{enumerable:false,writable:false,configurable:false,value:function(b){return this.eventListeners!==null&&this.eventListeners.hasOwnProperty(b)}},willTrigger:{enumerable:false,writable:false,configurable:false,value:function(b){if(this.hasEventListener(b))return true;
else if(!this.children||this.children.length===0)return false;else for(var j in this.children)if(this.children[j].willTrigger(b))return true;return false}}}})()})();
(function(){var m,k=0,g,a,b;doodle.Node=function(j){var h=arguments.length,l,c=Object.create(doodle.EventDispatcher()),n=[],e=doodle.geom.Matrix(),f=null,r=null;if(h===1&&typeof arguments[0]==="function"){l=arguments[0];j=undefined}else if(h>1)throw new SyntaxError("[object Node]: Invalid number of parameters.");Object.defineProperties(c,m);Object.defineProperties(c,{id:{enumerable:true,configurable:false,get:function(){return j},set:function(o){j=o}},root:{enumerable:true,configurable:false,get:function(){return f},
set:function(o){f=o}},parent:{enumerable:true,configurable:false,get:function(){return r},set:function(o){r=o}},children:{enumerable:false,configurable:false,get:function(){return n}},transform:{enumerable:false,configurable:false,get:function(){return e},set:function(o){e=o}},visible:function(){var o=true;return{enumerable:true,configurable:false,get:function(){return o},set:function(v){o=v}}}(),alpha:function(){var o=1;return{enumerable:true,configurable:false,get:function(){return o},set:function(v){o=
v>1?1:v<0?0:v}}}()});if(l){c.id="node"+String("000"+k).slice(-3);l.call(c)}else c.id=j!==undefined?j:"node"+String("000"+k).slice(-3);k+=1;return c};g=doodle.Node.isNode=function(j){return j.toString()==="[object Node]"};a=doodle.Node.inheritsNode=function(j){for(;j;)if(g(j))return true;else{if(typeof j!=="object")return false;j=Object.getPrototypeOf(j)}return false};doodle.utils.types.check_node_type=function(j,h,l){if(a(j))return true;else{h=h===undefined?"check_node_type":h;l=l===undefined?"":
"("+l+")";throw new TypeError(h+l+": Parameter must be a Node.");}};b=doodle.Node.inDisplayList=function(j){for(;j;){if(j.context)return true;j=j.parent}return false};(function(){function j(e,f,r){e.children.forEach(function(o){typeof r==="function"&&r(o);o.dispatchEvent(l(f,true));j(o,f,r)})}var h=doodle.geom.Point,l=doodle.Event,c=180/Math.PI,n=Math.PI/180;m={x:{enumerable:true,configurable:false,get:function(){return this.transform.tx},set:function(e){this.transform.tx=e}},y:{enumerable:true,configurable:false,
get:function(){return this.transform.ty},set:function(e){this.transform.ty=e}},axis:{value:{x:this.x,y:this.y}},rotate:{value:function(e){this.axis.x!==undefined&&this.axis.y!==undefined?this.transform.rotateAroundInternalPoint(this.axis,e*n):this.transform.rotate(e*n)}},rotation:{enumerable:true,configurable:false,get:function(){return this.transform.rotation*c},set:function(e){this.transform.rotation=e*n}},scaleX:{enumerable:true,configurable:false,get:function(){return this.transform.a},set:function(e){this.transform.a=
e}},scaleY:{enumerable:true,configurable:false,get:function(){return this.transform.d},set:function(e){this.transform.d=e}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Node]"}},addChildAt:{enumerable:false,writable:false,configurable:false,value:function(e,f){if(this.children.indexOf(e)!==-1)return false;if(e.root!==this.root)e.root=this.root;e.parent!==null&&e.parent!==this&&e.parent.removeChild(e);e.parent=this;this.children.splice(f,0,e);if(b(e)){e.dispatchEvent(l(l.ADDED,
true));j(e,l.ADDED)}return e}},addChild:{enumerable:false,writable:false,configurable:false,value:function(e){return this.addChildAt(e,this.children.length)}},removeChildAt:{enumerable:false,writable:false,configurable:false,value:function(){function e(f,r){var o=f.getBounds(f.root);r&&r.clearRect(o.x,o.y,o.width,o.height);f.root=null}return function(f){var r=this.children[f],o=r.context;this.children.splice(f,1);if(o){e(r,o);r.dispatchEvent(l(l.REMOVED,true));j(r,l.REMOVED,function(v){e(v,o)})}r.root=
null;r.parent=null}}()},removeChild:{enumerable:false,writable:false,configurable:false,value:function(e){this.removeChildAt(this.children.indexOf(e))}},removeChildById:{enumerable:false,writable:false,configurable:false,value:function(e){this.removeChild(this.getChildById(e))}},removeAllChildren:{enumerable:false,writable:false,configurable:false,value:function(){for(var e=this.children.length;(e-=1)>=0;)this.removeChildAt(e)}},getChildById:{enumerable:false,writable:false,configurable:false,value:function(e){return this.children.filter(function(f){return f.id===
e})[0]}},setChildIndex:{enumerable:true,writable:false,configurable:false,value:function(e,f){var r=this.children,o=r.length,v=r.indexOf(e);if(v===-1)throw new ReferenceError(this+".setChildIndex(*child*, index): "+e+" does not exist on child list.");if(f>o||f<-o)throw new RangeError(this+".setChildIndex(child, *index*): "+f+" does not exist on child list.");r.splice(v,1);r.splice(f,0,e)}},swapChildrenAt:{enumerable:false,writable:false,configurable:false,value:function(e,f){var r=this.children;r[e]=
r.splice(f,1,r[e])[0]}},swapChildren:{enumerable:false,writable:false,configurable:false,value:function(e,f){this.swapChildrenAt(this.children.indexOf(e),this.children.indexOf(f))}},swapDepths:{enumerable:false,writable:false,configurable:false,value:function(e){var f=this.parent;if(!f||!Array.isArray(f.children))throw Error(this+".swapDepths: no parent found.");else f.swapChildren(this,e)}},swapDepthAt:{enumerable:false,writable:false,configurable:false,value:function(e){var f=this.parent;if(!f||
!Array.isArray(f.children))throw Error(this+".swapDepthAt: no parent found.");else f.swapChildrenAt(e,f.children.indexOf(this))}},contains:{enumerable:false,writable:false,configurable:false,value:function(e){for(;e;){if(e===this)return true;e=e.parent}return false}},localToGlobal:{enumerable:false,writable:false,configurable:false,value:function(e){for(var f=this;f;){e=f.transform.transformPoint(e);f=f.parent}return e}},globalToLocal:{enumerable:false,writable:false,configurable:false,value:function(e){var f=
this.localToGlobal({x:0,y:0});return h(e.x-f.x,e.y-f.y)}}}})()})();
(function(){var m,k,g,a=doodle.utils.hex_to_rgb_str,b=doodle.utils.rgb_str_to_hex,j=doodle.utils.types.check_context_type,h=doodle.utils.get_element,l=doodle.geom.Rectangle;doodle.Sprite=function(c){var n=arguments.length,e,f,r=[],o=0,v=0,y=0,A=0,z=0,s=0;f=typeof c==="string"?Object.create(doodle.Node(c)):Object.create(doodle.Node());if(n===1&&typeof arguments[0]==="function"){e=arguments[0];c=undefined}else if(n>1)throw new SyntaxError("[object Sprite]: Invalid number of parameters.");Object.defineProperties(f,
m);Object.defineProperties(f,{width:function(){var d=0;return{enumerable:true,configurable:false,get:function(){return d},set:function(i){d=i}}}(),height:function(){var d=0;return{enumerable:true,configurable:false,get:function(){return d},set:function(i){d=i}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(d){var i=l(),p=this.width,q=this.height,u=this.localToGlobal({x:o,y:v}),t=this.localToGlobal({x:o+p,y:v});p=this.localToGlobal({x:o+p,y:v+q});q=this.localToGlobal({x:o,
y:v+q});u=d.globalToLocal(u);t=d.globalToLocal(t);p=d.globalToLocal(p);q=d.globalToLocal(q);i.left=Math.min(u.x,t.x,p.x,q.x);i.right=Math.max(u.x,t.x,p.x,q.x);i.top=Math.min(u.y,t.y,p.y,q.y);i.bottom=Math.max(u.y,t.y,p.y,q.y);return i}},hitArea:function(){var d=null;return{enumerable:true,configurable:false,get:function(){return d===null?this.getBounds(this):d},set:function(i){d=i=i===false?null:i}}}(),hitTestObject:{enumerable:true,writable:true,configurable:false,value:function(d){return this.getBounds(this).intersects(d.getBounds(this))}},
hitTestPoint:{enumerable:true,writable:true,configurable:false,value:function(d){return this.getBounds(this).containsPoint(this.globalToLocal(d))}},context:{get:function(){for(var d=this.parent;d;){if(d.context){d=d.context;j(d,this+".context (traversal)");return d}d=d.parent}return null}},__draw:{enumerable:false,writable:false,configurable:false,value:function(d){r.forEach(function(i){i.call(f,d)})}},debug:{enumerable:true,configurable:false,value:Object.create(null,{boundingBox:function(){var d=
"rgb(0, 0, 255)";return{enumerable:true,configurable:false,get:function(){return b(d)},set:function(i){d=a(i)}}}()})},graphics:{value:Object.create(null,{draw:{enumerable:false,writable:false,configurable:false,value:function(d){r.push(d)}.bind(f)},clear:{enumerable:false,writable:false,configurable:false,value:function(){for(var d=r.length;(d-=1)>=0;)r.splice(d,1);z=s=o=v=y=A=this.height=this.width=0}.bind(f)},rect:{enumerable:false,writable:false,configurable:false,value:function(d,i,p,q){o=Math.min(0,
d,o);v=Math.min(0,i,v);y=Math.max(0,d,d+p,y);A=Math.max(0,i,i+q,A);this.width=-o+y;this.height=-v+A;r.push(function(u){u.beginPath();u.rect(d,i,p,q);u.closePath();u.stroke()})}.bind(f)},circle:{enumerable:false,writable:false,configurable:false,value:function(d,i,p){o=Math.min(0,-p+d,o);v=Math.min(0,-p+i,v);y=Math.max(0,d,d+p,y);A=Math.max(0,i,i+p,A);this.width=-o+y;this.height=-v+A;r.push(function(q){q.beginPath();q.arc(d,i,p,0,6.283185307179586,true);q.closePath();q.stroke()})}.bind(f)},ellipse:{enumerable:false,
writable:false,configurable:false,value:function(d,i,p,q){q=q===undefined?p:q;var u=p/2,t=q/2,x=0.5522847498*u,B=0.5522847498*t;o=Math.min(0,-u+d,o);v=Math.min(0,-t+i,v);y=Math.max(0,d,d+u,y);A=Math.max(0,i,i+t,A);this.width=-o+y;this.height=-v+A;r.push(function(w){w.beginPath();w.moveTo(d+u,i);w.bezierCurveTo(d+u,i-B,d+x,i-t,d,i-t);w.bezierCurveTo(d-x,i-t,d-u,i-B,d-u,i);w.bezierCurveTo(d-u,i+B,d-x,i+t,d,i+t);w.bezierCurveTo(d+x,i+t,d+u,i+B,d+u,i);w.closePath();w.stroke()})}.bind(f)},roundRect:{enumerable:false,
writable:false,configurable:false,value:function(d,i,p,q,u,t){u=u===undefined?0:u;t=t===undefined?0:t;var x=d+p,B=x-u,w=d+u,D=i+q,E=D-t,F=i+t;o=Math.min(0,d,o);v=Math.min(0,i,v);y=Math.max(0,d,d+p,y);A=Math.max(0,i,i+q,A);this.width=-o+y;this.height=-v+A;r.push(function(C){C.beginPath();C.moveTo(w,i);C.beginPath();C.lineTo(B,i);C.quadraticCurveTo(x,i,x,F);C.lineTo(x,E);C.quadraticCurveTo(x,D,B,D);C.lineTo(w,D);C.quadraticCurveTo(d,D,d,E);C.lineTo(d,F);C.quadraticCurveTo(d,i,w,i);C.closePath();C.stroke()})}.bind(f)},
moveTo:{enumerable:false,writable:false,configurable:false,value:function(d,i){r.push(function(p){p.moveTo(d,i)});z=d;s=i}.bind(f)},lineTo:{enumerable:false,writable:false,configurable:false,value:function(d,i){o=Math.min(0,d,z,o);v=Math.min(0,i,s,v);y=Math.max(0,d,z,y);A=Math.max(0,i,s,A);this.width=y-o;this.height=A-v;r.push(function(p){p.lineTo(d,i)});z=d;s=i}.bind(f)},curveTo:{enumerable:false,writable:false,configurable:false,value:function(d,i){var p=z,q=s,u=d.x,t=d.y,x=i.x,B=i.y,w,D=0,E=0;
w=(p-u)/(p-2*u+x);if(0<=w&&w<=1)D=(1-w)*(1-w)*p+2*(1-w)*w*u+w*w*x;w=(q-t)/(q-2*t+B);if(0<=w&&w<=1)E=(1-w)*(1-w)*q+2*(1-w)*w*t+w*w*B;o=Math.min(0,p,D,x,o);v=Math.min(0,q,E,B,v);y=Math.max(0,p,D,x,y);A=Math.max(0,q,E,B,A);this.width=-o+y;this.height=-v+A;r.push(function(F){F.quadraticCurveTo(u,t,x,B)});z=x;s=B}.bind(f)},bezierCurveTo:{enumerable:false,writable:false,configurable:false,value:function(d,i,p){var q=Math.pow,u=Math.max,t=Math.min,x=z,B=s,w=d.x,D=d.y,E=i.x,F=i.y,C=p.x,H=p.y,G,I=p=i=0,J=
0;for(d=0.1;d<1;d+=0.1){G=q(1-d,3)*x+3*q(1-d,2)*d*w+3*q(1-d,1)*q(d,2)*E+q(d,3)*C;if(G>i)i=G;if(G<p)p=G;G=q(1-d,3)*B+3*q(1-d,2)*d*D+3*q(1-d,1)*q(d,2)*F+q(d,3)*H;if(G>I)I=G;if(G<J)J=G}o=t(0,x,p,C,o);v=t(0,B,J,H,v);y=u(0,x,i,C,y);A=u(0,B,I,H,A);this.width=-o+y;this.height=-v+A;r.push(function(K){K.bezierCurveTo(w,D,E,F,C,H)});z=C;s=H}.bind(f)},beginFill:{enumerable:false,writable:false,configurable:false,value:function(d,i){i=i===undefined?1:i;r.push(function(p){p.fillStyle=a(d,i)})}.bind(f)},beginGradientFill:{enumerable:true,
writable:false,configurable:false,value:function(){var d=doodle.GradientType.LINEAR,i=doodle.GradientType.RADIAL;return function(p,q,u,t,x,B){r.push(function(w){var D=doodle.utils.hex_to_rgb_str,E,F=t.length,C=0;if(p===d)E=w.createLinearGradient(q.x,q.y,u.x,u.y);else if(p===i)E=w.createRadialGradient(q.x,q.y,q.radius,u.x,u.y,u.radius);else throw new TypeError(this+".graphics.beginGradientFill(*type*, point1, point2, ratios, colors, alphas): Unknown gradient type.");for(;C<F;C+=1)E.addColorStop(t[C],
D(x[C],B[C]));w.fillStyle=E})}.bind(f)}()},beginPatternFill:{enumerable:true,writable:false,configurable:false,value:function(d,i){var p=null,q;q=doodle.Pattern;var u=doodle.Event;i=i===undefined?q.REPEAT:i;if(i!==q.REPEAT&&i!==q.NO_REPEAT&&i!==q.REPEAT_X&&i!==q.REPEAT_Y)throw new SyntaxError(this+".graphics.beginPatternFill(image, *repeat*): Invalid pattern repeat type.");if(typeof d==="string")if(d[0]==="#")d=h(d,this+".beginPatternFill");else(function(){var t=encodeURI(d);d=new Image;d.src=t})();
if(d.complete)p=d;else{d.onload=function(){p=d;this.dispatchEvent(u(u.LOAD))}.bind(this);q=function(){throw new URIError(this+".graphics.beginPatternFill(*image*,repeat): Unable to load "+d.src);}.bind(this);d.onerror=q;d.onabort=q}r.push(function(t){t.fillStyle=p?t.createPattern(p,i):"rgba(0,0,0,0)"})}.bind(f)},lineStyle:{enumerable:true,writable:false,configurable:false,value:function(d,i,p,q,u,t){d=d===undefined?1:d;i=i===undefined?"#000000":i;p=p===undefined?1:p;q=q===undefined?doodle.LineCap.BUTT:
q;u=u===undefined?doodle.LineJoin.MITER:u;t=t===undefined?10:t;if(typeof i==="string"||typeof i==="number")i=a(i,p);else throw new TypeError(this+".graphics.lineStyle(thickness,*color*,alpha,caps,joints,miterLimit): Color must be a hex value.");r.push(function(x){x.lineWidth=d;x.strokeStyle=i;x.lineCap=q;x.lineJoin=u;x.miterLimit=t})}.bind(f)},beginPath:{enumerable:false,writable:false,configurable:false,value:function(){r.push(function(d){d.beginPath();d.moveTo(z,s)})}},closePath:{enumerable:false,
writable:false,configurable:false,value:function(){r.push(function(d){d.closePath();d.stroke()});s=z=0}},endFill:{enumerable:false,writable:false,configurable:false,value:function(){r.push(function(d){d.fill()})}},stroke:{enumerable:false,writable:false,configurable:false,value:function(){r.push(function(d){d.stroke()});s=z=0}}})}});e&&e.call(f);return f};k=doodle.Sprite.isSprite=function(c){return c.toString()==="[object Sprite]"};g=doodle.Sprite.inheritsSprite=function(c){for(;c;)if(k(c))return true;
else{if(typeof c!=="object")return false;c=Object.getPrototypeOf(c)}return false};doodle.utils.types.check_sprite_type=function(c,n,e){if(g(c))return true;else{n=n===undefined?"check_sprite_type":n;e=e===undefined?"":"("+e+")";throw new TypeError(n+e+": Parameter must inherit from Sprite.");}};(function(){m={rotation:{enumerable:true,configurable:false,get:function(){return this.transform.rotation*180/Math.PI},set:function(c){this.transform.rotation=c*Math.PI/180}},toString:{enumerable:false,writable:false,
configurable:false,value:function(){return"[object Sprite]"}},compose:{enumerable:false,writable:false,configurable:false,value:function(c,n,e,f){this.x=c;this.y=n;this.width=e;this.height=f;return this}}}})()})();
(function(){var m,k=doodle.utils,g=k.rgb_str_to_hex,a=k.rgb_str_to_rgb,b=k.rgb_to_rgb_str,j=k.hex_to_rgb_str,h=k.get_element,l=k.get_style_property,c=k.get_element_property,n=k.set_element_property;doodle.ElementNode=function(e){var f=arguments.length,r,o=Object.create(doodle.Node());if(f===1&&typeof arguments[0]==="function"){r=arguments[0];e=undefined}else if(f>1)throw new SyntaxError("[object ElementNode]: Invalid number of parameters.");Object.defineProperties(o,m);Object.defineProperties(o,{element:{get:function(){return e},
set:function(v){e=v}}});r&&r.call(o);return o};m={id:{get:function(){return c(this.element,"id")},set:function(e){return n(this.element,"id",e,"html")}},width:{get:function(){return c(this.element,"width","int")},set:function(e){n(this.element,"width",e+"px");return e}},height:{get:function(){return c(this.element,"height","int")},set:function(e){n(this.element,"height",e+"px");return e}},backgroundColor:{get:function(){return g(c(this.element,"backgroundColor"))},set:function(e){if(typeof e==="number")e=
j(e);return n(this.element,"backgroundColor",e)}},backgroundImage:function(){var e=/^url\((.*)\)/;return{get:function(){var f=c(this.element,"backgroundImage");return(f=f==="none"?null:f.match(e))?f[1]:null},set:function(f){if(!f)return n(this.element,"backgroundImage",null);if(typeof f==="string"){if(f[0]==="#")f=h(f).src}else if(f&&f.tagName==="IMG")f=f.src;e.test(f)||(f="url("+encodeURI(f)+")");return n(this.element,"backgroundImage",f)}}}(),backgroundRepeat:{get:function(){return c(this.element,
"backgroundRepeat")},set:function(e){return n(this.element,"backgroundRepeat",e)}},alpha:{get:function(){var e=a(l(this.element,"backgroundColor"))[3];return typeof e==="number"?e:1},set:function(e){var f=l(this.element,"backgroundColor");f=a(f);this.element.style.backgroundColor=b(f[0],f[1],f[2],e)}},visible:{get:function(){switch(c(this.element,"visibility")){case "visible":return true;case "hidden":return false;default:throw new ReferenceError(this+".visible: Unable to determine visibility.");
}},set:function(e){e?n(this.element,"visibility","visible"):n(this.element,"visibility","hidden");return e}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object ElementNode]"}}}})();
(function(){var m,k=0,g=doodle.utils.get_element_property,a=doodle.utils.set_element_property;doodle.Layer=function(b,j){var h=arguments.length,l,c=Object.create(doodle.ElementNode());if(h===1&&typeof arguments[0]==="function"){l=arguments[0];b=undefined}else if(h>2)throw new SyntaxError("[object Layer]: Invalid number of parameters.");Object.defineProperties(c,m);Object.defineProperties(c,{element:{get:function(){return j},set:function(n){j=n}},alpha:function(){var n=1;return{get:function(){return n},
set:function(e){n=e<0?0:e>1?1:e}}}()});c.element=j||document.createElement("canvas");c.element.style.position="absolute";l&&l.call(c);if(!c.id){c.id=typeof b==="string"?b:"layer"+String("00"+k).slice(-2);k+=1}return c};(function(){var b=doodle.Layer.isLayer=function(h){return h.toString()==="[object Layer]"},j=doodle.Layer.inheritsLayer=function(h){for(;h;)if(b(h))return true;else{if(typeof h!=="object")return false;h=Object.getPrototypeOf(h)}return false};doodle.utils.types.check_layer_type=function(h,
l,c){if(j(h))return true;else{l=l===undefined?"check_layer_type":l;c=c===undefined?"":"("+c+")";throw new TypeError(l+c+": Parameter must be a Layer.");}}})();m={context:{get:function(){return this.element.getContext("2d")}},width:{get:function(){return g(this.element,"width","int")},set:function(b){a(this.element,"width",b,"html");return b}},height:{get:function(){return g(this.element,"height","int")},set:function(b){a(this.element,"height",b,"html");return b}},toString:{enumerable:false,writable:false,
configurable:false,value:function(){return"[object Layer]"}}}})();
(function(){var m,k=doodle.utils.get_element,g=doodle.utils.get_element_property,a=doodle.utils.set_element_property;inheritsSprite=doodle.Sprite.inheritsSprite;doodle_Event=doodle.Event;doodle_MouseEvent=doodle.MouseEvent;ENTER_FRAME=doodle_Event.ENTER_FRAME;enterFrame=doodle_Event(ENTER_FRAME);dispatcher_queue=doodle.EventDispatcher.dispatcher_queue;doodle.Display=function(b){function j(){h(o);dispatcher_queue.forEach(function(d){if(d.hasEventListener(ENTER_FRAME)){enterFrame.__setTarget(d);d.handleEvent(enterFrame)}});
l(o);v+=1;z&&z.update()}function h(){o.children.forEach(function(d){var i=d.context;i.save();i.setTransform(1,0,0,1,0,0);i.clearRect(0,0,d.width,d.height);i.restore()})}function l(d,i){var p;d.children.forEach(function(q){if(q.visible){i=i||q.context;p=q.transform.toArray();i.save();i.transform(p[0],p[1],p[2],p[3],p[4],p[5]);if(s){var u=i;if(typeof q.getBounds==="function"){var t=q.getBounds(o);u.save();u.setTransform(1,0,0,1,0,0);u.lineWidth=0.5;u.strokeStyle=q.debug.boundingBox;u.strokeRect(t.x,
t.y,t.width,t.height);u.restore()}}if(q.alpha!==1)i.globalAlpha=q.alpha;typeof q.__draw==="function"&&q.__draw(i);l(q,i);i.restore()}})}function c(){h(o);l(o)}function n(d){var i=doodle.EventDispatcher.dispatcher_queue,p=doodle_MouseEvent.MOUSE_OVER,q=doodle_MouseEvent.MOUSE_OUT,u=doodle_MouseEvent.MOUSE_MOVE,t=doodle_MouseEvent(d),x=t.type,B=false;i.forEach(function(w){if(inheritsSprite(w)){var D=w.getBounds(o).containsPoint({x:t.offsetX,y:t.offsetY});t.__setTarget(null);if(D&&w.hasEventListener(x)){w.dispatchEvent(t);
B=true}if(D&&w.hasEventListener(p))if(!w.__mouse_over){w.__mouse_over=true;t.__setType(p);w.dispatchEvent(t);B=true}if(!D&&w.hasEventListener(q))if(w.__mouse_over){w.__mouse_over=false;t.__setType(q);w.dispatchEvent(t);B=true}}else if(w.hasEventListener(x)){t.__setTarget(null);w.dispatchEvent(t);B=true}});i.forEach(function(w){if(w===o&&!B&&w.hasEventListener(u)){x===u&&t.__setType(u);t.__setTarget(null);w.dispatchEvent(t);B=true}})}function e(d){var i=doodle.EventDispatcher.dispatcher_queue,p=doodle.KeyboardEvent(d);
i.forEach(function(q){q.hasEventListener(p.type)&&q.handleEvent(p)})}var f=arguments.length,r,o=Object.create(doodle.ElementNode()),v=0,y=0,A=0,z=null,s=false;if(f===1&&typeof arguments[0]==="function"){r=arguments[0];b=undefined}else if(f>1)throw new SyntaxError("[object Display]: Invalid number of parameters.");Object.defineProperties(o,m);Object.defineProperties(o,{element:{get:function(){return b},set:function(d){var i=k(d,"[object Display]"),p;b=i;b.style.position="relative";this.root=this;d=
i.getAttribute("width");i=i.getAttribute("height");if(d)this.width=parseInt(d);if(i)this.height=parseInt(i);for(p in doodle_MouseEvent)b.addEventListener(doodle_MouseEvent[p],n,false);b.addEventListener(doodle_MouseEvent.MOUSE_MOVE,function(q){y=q.offsetX;A=q.offsetY});document.addEventListener(doodle.KeyboardEvent.KEY_PRESS,e,false);document.addEventListener(doodle.KeyboardEvent.KEY_DOWN,e,false);document.addEventListener(doodle.KeyboardEvent.KEY_UP,e,false)}},frameRate:function(){var d=false,i;
return{get:function(){return d},set:function(p){if(p===0||p===false){d=false;clearInterval(i)}else if(typeof p==="number"&&isFinite(1E3/p)){d=p;clearInterval(i);i=setInterval(j,1E3/d)}else throw new TypeError("[object Display].frameRate: Parameter must be a valid number or false.");}}}(),mouseX:{enumerable:false,configurable:false,get:function(){return y}},mouseY:{enumerable:false,configurable:false,get:function(){return A}},debug:{enumerable:true,configurable:false,value:Object.create(null,{stats:{enumerable:true,
configurable:false,get:function(){return z?true:false},set:function(d){if(d&&!z){z=new Stats;o.element.appendChild(z.domElement)}else if(!d&&z){o.element.removeChild(z.domElement);z=null}}},boundingBox:{enumerable:true,configurable:false,get:function(){return s},set:function(d){s=d}}})}});if(r)r.call(o);else o.element=b;if(!o.element)throw new ReferenceError("[object Display]: Requires a HTML element.");o.addEventListener(doodle_Event.ADDED,c);o.addEventListener(doodle_Event.REMOVED,c);c();return o};
m={width:{get:function(){return g(this.element,"width","int")},set:function(b){a(this.element,"width",b+"px");this.children.forEach(function(j){j.width=b});return b}},height:{get:function(){return g(this.element,"height","int")},set:function(b){a(this.element,"height",b+"px");this.children.forEach(function(j){j.height=b});return b}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Display]"}},toDataUrl:{value:function(){}},addChildAt:{value:function(b,j){b.parent!==
null&&b.parent!==this&&b.parent.removeChild(node);b.root=this;b.parent=this;b.width=this.width;b.height=this.height;this.children.splice(j,0,b);this.element.appendChild(b.element);return this}},removeChildAt:{enumerable:false,writable:false,configurable:false,value:function(b){var j=this.children[b];j.root=null;j.parent=null;this.children.splice(b,1);this.element.removeChild(j.element)}},swapChildrenAt:{enumerable:false,writable:false,configurable:false,value:function(b,j){var h=this.children;h[b]=
h.splice(j,1,h[b])[0];b>j?this.element.insertBefore(h[j].element,h[b].element):this.element.insertBefore(h[b].element,h[j].element)}},addLayer:{value:function(b){b=doodle.Layer(b);this.addChild(b);return b}},removeLayer:{value:function(b){this.removeChildById(b)}}}})();
