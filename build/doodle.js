var doodle={};doodle.geom={};if(typeof Function.prototype.bind!=="function")Function.prototype.bind=function(k){var i=this;return function(){return i.apply(k,arguments)}};
doodle.utils={rgb_to_hex:function(k,i,p){k=(p|i<<8|k<<16).toString(16);return"#"+String("000000"+k).slice(-6)},rgb_str_to_hex:function(k){var i=doodle.utils;k=i.rgb_str_to_rgb(k);return i.rgb_to_hex(parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10))},rgb_to_rgb_str:function(k,i,p,b){b=b===undefined?1:b;b=b<0?0:b>1?1:b;return b===1?"rgb("+k+","+i+","+p+")":"rgba("+k+","+i+","+p+","+b+")"},rgb_str_to_rgb:function(){var k=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?(.*)\)$/;return function(i){i=
i.trim().match(k);var p=[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)];i=parseFloat(i[4]);typeof i==="number"&&!isNaN(i)&&p.push(i);return p}}(),hex_to_rgb:function(k){if(typeof k==="string"){k=k[0]==="#"?k.slice(1):k;k=parseInt(k,16)}return[k>>16&255,k>>8&255,k&255]},hex_to_rgb_str:function(k,i){var p=doodle.utils;i=i===undefined?1:i;k=p.hex_to_rgb(k);return p.rgb_to_rgb_str(k[0],k[1],k[2],i)}};
doodle.utils.types=function(){function k(i,p,b){if(typeof i!=="string")throw new TypeError("throw_type_error: type must be a string.");p=p===undefined?"throw_type_error":p;b=b===undefined?"":"("+b+")";throw new TypeError(p+b+": Parameter must be a "+i+".");}return{check_number_type:function(i,p,b){return typeof i==="number"?true:k("number",p||"check_number_type",b)},check_boolean_type:function(i,p,b){return typeof i==="boolean"?true:k("boolean",p||"check_boolean_type",b)},check_string_type:function(i,
p,b){return typeof i==="string"?true:k("string",p||"check_string_type",b)},check_function_type:function(i,p,b){return typeof i==="function"?true:k("function",p||"check_function_type",b)},check_array_type:function(i,p,b){return Array.isArray(i)?true:k("array",p||"check_array_type",b)},check_event_type:function(i,p,b){if(i&&(i.toString()==="[object Event]"||i.toString()==="[object UIEvent]"||i.toString()==="[object MouseEvent]"||i.toString()==="[object KeyboardEvent]"||i.toString()==="[object TextEvent]"))return true;
else k("event",p||"check_event_type",b)},check_canvas_type:function(i,p,b){return i&&i.toString()==="[object HTMLCanvasElement]"?true:k("canvas element",p||"check_canvas_type",b)},check_context_type:function(i,p,b){return i&&i.toString()==="[object CanvasRenderingContext2D]"?true:k("canvas context",p||"check_context_type",b)},check_block_element:function(i,p,b){try{return doodle.utils.get_style_property(i,"display")==="block"?true:k("HTML block element",p||"check_block_type",b)}catch(j){k("HTML block element",
p||"check_block_type",b)}}}}();doodle.utils.get_element=function(k){k=typeof k==="string"?k[0]==="#"?k.slice(1):k:k&&k.id?k.id:null;return document.getElementById(k)};
doodle.utils.get_style_property=function(k,i){try{if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(k,null)[i];else if(k.currentStyle)return k.currentStyle[i];else if(k.style)return k.style[i];else throw new ReferenceError("get_style_property: Cannot read property '"+i+"' of "+k+".");}catch(p){throw new ReferenceError("get_style_property: Cannot read property '"+i+"' of "+k+".");}};
doodle.utils.get_element_property=function(k,i,p){var b;try{b=doodle.utils.get_style_property(k,i)}catch(j){b=undefined}if(b===undefined||b===null)b=k.getAttribute(i);if(p!==undefined)switch(p){case "int":b=parseInt(b,10);b=isNaN(b)?null:b;break;case "float":b=parseFloat(b);b=isNaN(b)?null:b;break;default:break}return b};
doodle.utils.set_element_property=function(k,i,p,b){b=b===undefined?"css":b;switch(b){case "css":k.style[i]=p;break;case "html":k.setAttribute(i,p);break;default:throw new SyntaxError("set_element_property: type must be 'css' property or 'html' attribute.");}return p};
var Stats=function(){function k(t,A){var w,x,B;for(x=0;x<30;x++)for(w=0;w<73;w++){B=(w+x*74)*4;t[B]=t[B+4];t[B+1]=t[B+5];t[B+2]=t[B+6]}for(x=0;x<30;x++){B=(73+x*74)*4;if(x<A){t[B]=16;t[B+1]=16;t[B+2]=48}else{t[B]=0;t[B+1]=255;t[B+2]=255}}}var i,p="fps",b=0,j=(new Date).getTime(),m=j,l=j,d=0,a=1E3,h=0,e,f,c,g,o=0,n=1E3,q=0,v,s,u,r;i=document.createElement("div");i.style.fontFamily="Helvetica, Arial, sans-serif";i.style.fontSize="9px";i.style.backgroundColor="#000020";i.style.opacity="0.9";i.style.width=
"80px";i.style.paddingTop="2px";i.style.cursor="pointer";i.addEventListener("click",function(){switch(p){case "fps":p="ms";e.style.display="none";f.style.display="none";v.style.display="block";s.style.display="block";break;case "ms":p="fps";e.style.display="block";f.style.display="block";v.style.display="none";s.style.display="none";break}},false);e=document.createElement("div");e.innerHTML="<strong>FPS</strong>";e.style.color="#00ffff";e.style.marginLeft="3px";e.style.marginBottom="3px";i.appendChild(e);
f=document.createElement("canvas");f.width=74;f.height=30;f.style.display="block";f.style.marginLeft="3px";f.style.marginBottom="3px";i.appendChild(f);c=f.getContext("2d");c.fillStyle="#101030";c.fillRect(0,0,f.width,f.height);g=c.getImageData(0,0,f.width,f.height);v=document.createElement("div");v.innerHTML="<strong>MS</strong>";v.style.color="#00ffff";v.style.marginLeft="3px";v.style.marginBottom="3px";v.style.display="none";i.appendChild(v);s=document.createElement("canvas");s.width=74;s.height=
30;s.style.display="block";s.style.marginLeft="3px";s.style.marginBottom="3px";s.style.display="none";i.appendChild(s);u=s.getContext("2d");u.fillStyle="#101030";u.fillRect(0,0,s.width,s.height);r=u.getImageData(0,0,s.width,s.height);return{domElement:i,update:function(){b++;j=(new Date).getTime();o=j-m;n=Math.min(n,o);q=Math.max(q,o);k(r.data,Math.min(30,30-o/200*30));v.innerHTML="<strong>"+o+" MS</strong> ("+n+"-"+q+")";u.putImageData(r,0,0);m=j;if(j>l+1E3){d=Math.round(b*1E3/(j-l));a=Math.min(a,
d);h=Math.max(h,d);k(g.data,Math.min(30,30-d/100*30));e.innerHTML="<strong>"+d+" FPS</strong> ("+a+"-"+h+")";c.putImageData(g,0,0);l=j;b=0}}}};
Object.defineProperty(doodle,"Keyboard",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BACKSPACE:{enumerable:true,writable:false,configurable:false,value:8},TAB:{enumerable:true,writable:false,configurable:false,value:9},ENTER:{enumerable:true,writable:false,configurable:false,value:13},COMMAND:{enumerable:true,writable:false,configurable:false,value:15},SHIFT:{enumerable:true,writable:false,configurable:false,value:16},CONTROL:{enumerable:true,writable:false,configurable:false,
value:17},ALTERNATE:{enumerable:true,writable:false,configurable:false,value:18},PAUSE:{enumerable:true,writable:false,configurable:false,value:19},CAPS_LOCK:{enumerable:true,writable:false,configurable:false,value:20},NUMPAD:{enumerable:true,writable:false,configurable:false,value:21},ESCAPE:{enumerable:true,writable:false,configurable:false,value:27},SPACE:{enumerable:true,writable:false,configurable:false,value:32},PAGE_UP:{enumerable:true,writable:false,configurable:false,value:33},PAGE_DOWN:{enumerable:true,
writable:false,configurable:false,value:34},END:{enumerable:true,writable:false,configurable:false,value:35},HOME:{enumerable:true,writable:false,configurable:false,value:36},LEFT:{enumerable:true,writable:false,configurable:false,value:37},UP:{enumerable:true,writable:false,configurable:false,value:38},RIGHT:{enumerable:true,writable:false,configurable:false,value:39},DOWN:{enumerable:true,writable:false,configurable:false,value:40},INSERT:{enumerable:true,writable:false,configurable:false,value:45},
DELETE:{enumerable:true,writable:false,configurable:false,value:46},NUMBER_0:{enumerable:true,writable:false,configurable:false,value:48},NUMBER_1:{enumerable:true,writable:false,configurable:false,value:49},NUMBER_2:{enumerable:true,writable:false,configurable:false,value:50},NUMBER_3:{enumerable:true,writable:false,configurable:false,value:51},NUMBER_4:{enumerable:true,writable:false,configurable:false,value:52},NUMBER_5:{enumerable:true,writable:false,configurable:false,value:53},NUMBER_6:{enumerable:true,
writable:false,configurable:false,value:54},NUMBER_7:{enumerable:true,writable:false,configurable:false,value:55},NUMBER_8:{enumerable:true,writable:false,configurable:false,value:56},NUMBER_9:{enumerable:true,writable:false,configurable:false,value:57},A:{enumerable:true,writable:false,configurable:false,value:65},B:{enumerable:true,writable:false,configurable:false,value:66},C:{enumerable:true,writable:false,configurable:false,value:67},D:{enumerable:true,writable:false,configurable:false,value:68},
E:{enumerable:true,writable:false,configurable:false,value:69},F:{enumerable:true,writable:false,configurable:false,value:70},G:{enumerable:true,writable:false,configurable:false,value:71},H:{enumerable:true,writable:false,configurable:false,value:72},I:{enumerable:true,writable:false,configurable:false,value:73},J:{enumerable:true,writable:false,configurable:false,value:74},K:{enumerable:true,writable:false,configurable:false,value:75},L:{enumerable:true,writable:false,configurable:false,value:76},
M:{enumerable:true,writable:false,configurable:false,value:77},N:{enumerable:true,writable:false,configurable:false,value:78},O:{enumerable:true,writable:false,configurable:false,value:79},P:{enumerable:true,writable:false,configurable:false,value:80},Q:{enumerable:true,writable:false,configurable:false,value:81},R:{enumerable:true,writable:false,configurable:false,value:82},S:{enumerable:true,writable:false,configurable:false,value:83},T:{enumerable:true,writable:false,configurable:false,value:84},
U:{enumerable:true,writable:false,configurable:false,value:85},V:{enumerable:true,writable:false,configurable:false,value:86},W:{enumerable:true,writable:false,configurable:false,value:87},X:{enumerable:true,writable:false,configurable:false,value:88},Y:{enumerable:true,writable:false,configurable:false,value:89},Z:{enumerable:true,writable:false,configurable:false,value:90},WINDOWS_KEY:{enumerable:true,writable:false,configurable:false,value:91},NUMPAD_0:{enumerable:true,writable:false,configurable:false,
value:96},NUMPAD_1:{enumerable:true,writable:false,configurable:false,value:97},NUMPAD_2:{enumerable:true,writable:false,configurable:false,value:98},NUMPAD_3:{enumerable:true,writable:false,configurable:false,value:99},NUMPAD_4:{enumerable:true,writable:false,configurable:false,value:100},NUMPAD_5:{enumerable:true,writable:false,configurable:false,value:101},NUMPAD_6:{enumerable:true,writable:false,configurable:false,value:102},NUMPAD_7:{enumerable:true,writable:false,configurable:false,value:103},
NUMPAD_8:{enumerable:true,writable:false,configurable:false,value:104},NUMPAD_9:{enumerable:true,writable:false,configurable:false,value:105},NUMPAD_MULTIPLY:{enumerable:true,writable:false,configurable:false,value:106},NUMPAD_ADD:{enumerable:true,writable:false,configurable:false,value:107},NUMPAD_ENTER:{enumerable:true,writable:false,configurable:false,value:108},NUMPAD_SUBTRACT:{enumerable:true,writable:false,configurable:false,value:109},NUMPAD_DECIMAL:{enumerable:true,writable:false,configurable:false,
value:110},NUMPAD_DIVIDE:{enumerable:true,writable:false,configurable:false,value:111},F1:{enumerable:true,writable:false,configurable:false,value:112},F2:{enumerable:true,writable:false,configurable:false,value:113},F3:{enumerable:true,writable:false,configurable:false,value:114},F4:{enumerable:true,writable:false,configurable:false,value:115},F5:{enumerable:true,writable:false,configurable:false,value:116},F6:{enumerable:true,writable:false,configurable:false,value:117},F7:{enumerable:true,writable:false,
configurable:false,value:118},F8:{enumerable:true,writable:false,configurable:false,value:119},F9:{enumerable:true,writable:false,configurable:false,value:120},F10:{enumerable:true,writable:false,configurable:false,value:121},F11:{enumerable:true,writable:false,configurable:false,value:122},F12:{enumerable:true,writable:false,configurable:false,value:123},F13:{enumerable:true,writable:false,configurable:false,value:124},F14:{enumerable:true,writable:false,configurable:false,value:125},F15:{enumerable:true,
writable:false,configurable:false,value:126},SCROLL:{enumerable:true,writable:false,configurable:false,value:145},SEMICOLON:{enumerable:true,writable:false,configurable:false,value:186},EQUAL:{enumerable:true,writable:false,configurable:false,value:187},COMMA:{enumerable:true,writable:false,configurable:false,value:188},MINUS:{enumerable:true,writable:false,configurable:false,value:189},PERIOD:{enumerable:true,writable:false,configurable:false,value:190},SLASH:{enumerable:true,writable:false,configurable:false,
value:191},BACKQUOTE:{enumerable:true,writable:false,configurable:false,value:192},LEFTBRACKET:{enumerable:true,writable:false,configurable:false,value:219},BACKSLASH:{enumerable:true,writable:false,configurable:false,value:220},RIGHTBRACKET:{enumerable:true,writable:false,configurable:false,value:221},QUOTE:{enumerable:true,writable:false,configurable:false,value:222}})});
Object.defineProperty(doodle,"GradientType",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{LINEAR:{enumerable:true,writable:false,configurable:false,value:"linearGradient"},RADIAL:{enumerable:true,writable:false,configurable:false,value:"radialGradient"}})});
Object.defineProperty(doodle,"Pattern",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{REPEAT:{enumerable:true,writable:false,configurable:false,value:"repeat"},REPEAT_X:{enumerable:true,writable:false,configurable:false,value:"repeat-x"},REPEAT_Y:{enumerable:true,writable:false,configurable:false,value:"repeat-y"},NO_REPEAT:{enumerable:true,writable:false,configurable:false,value:"no-repeat"}})});
Object.defineProperty(doodle,"LineCap",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BUTT:{enumerable:true,writable:false,configurable:false,value:"butt"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},SQUARE:{enumerable:true,writable:false,configurable:false,value:"square"}})});
Object.defineProperty(doodle,"LineJoin",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{MITER:{enumerable:true,writable:false,configurable:false,value:"miter"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},BEVEL:{enumerable:true,writable:false,configurable:false,value:"bevel"}})});
(function(){var k,i,p;doodle.Event=function(b,j,m){var l=Object.create(k),d=arguments.length,a,h;Object.defineProperties(l,i);Object.defineProperties(l,function(){var e,f,c,g=false,o=false,n=0,q=null,v=null,s=null,u=new Date,r=true,t=false,A=false;h=function(w){e=w.type;f=w.bubbles;c=w.cancelable;g=w.cancelBubble;o=w.defaultPrevented;n=w.eventPhase;q=w.currentTarget;v=w.target;s=w.srcElement;u=w.timeStamp;r=w.returnValue;if(w.__cancel)t=true;if(w.__cancelNow)A=true};return{type:{enumerable:true,configurable:false,
get:function(){return e}},__setType:{enumerable:false,value:function(w){e=w}},bubbles:{enumerable:true,configurable:false,get:function(){return f}},cancelable:{enumerable:true,configurable:false,get:function(){return c}},cancelBubble:{enumerable:true,configurable:false,get:function(){return g},set:function(w){g=w}},__cancel:{enumerable:false,configurable:false,get:function(){return t}},__cancelNow:{enumerable:false,configurable:false,get:function(){return A}},currentTarget:{enumerable:true,configurable:false,
get:function(){return q}},__setCurrentTarget:{enumerable:false,value:function(w){q=w}},target:{enumerable:true,configurable:false,get:function(){return v}},__setTarget:{enumerable:false,value:function(w){v=w}},eventPhase:{enumerable:true,configurable:false,get:function(){return n}},__setEventPhase:{enumerable:false,value:function(w){n=w}},srcElement:{enumerable:true,configurable:false,get:function(){return s}},timeStamp:{enumerable:true,configurable:false,get:function(){return u}},returnValue:{enumerable:true,
configurable:false,get:function(){return r}},initEvent:{enumerable:true,configurable:false,value:function(w,x,B){x=x===undefined?false:x;B=B===undefined?false:B;e=w;f=x;c=B;return this}},preventDefault:{enumerable:true,configurable:false,value:function(){o=true}},stopPropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)t=true;else throw Error(this+".stopPropagation: Event can not be cancelled.");}},stopImmediatePropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)A=
t=true;else throw Error(this+".stopImmediatePropagation: Event can not be cancelled.");}}}}());if(d===1&&(typeof arguments[0]==="function"||p(arguments[0]))){a=arguments[0];b=undefined}if(a)typeof a==="function"?a.call(l):h(a);else l.initEvent(b,j,m);return l};i={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Event]"}}};k=Object.create({},{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,
configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},MOUSEDOWN:{enumerable:true,writable:false,configurable:false,value:1},MOUSEUP:{enumerable:true,writable:false,configurable:false,value:2},MOUSEOVER:{enumerable:true,writable:false,configurable:false,value:4},MOUSEOUT:{enumerable:true,writable:false,configurable:false,value:8},MOUSEMOVE:{enumerable:true,writable:false,configurable:false,value:16},MOUSEDRAG:{enumerable:true,writable:false,configurable:false,
value:32},CLICK:{enumerable:true,writable:false,configurable:false,value:64},DBLCLICK:{enumerable:true,writable:false,configurable:false,value:128},KEYDOWN:{enumerable:true,writable:false,configurable:false,value:256},KEYUP:{enumerable:true,writable:false,configurable:false,value:512},KEYPRESS:{enumerable:true,writable:false,configurable:false,value:1024},DRAGDROP:{enumerable:true,writable:false,configurable:false,value:2048},FOCUS:{enumerable:true,writable:false,configurable:false,value:4096},BLUR:{enumerable:true,
writable:false,configurable:false,value:8192},SELECT:{enumerable:true,writable:false,configurable:false,value:16384},CHANGE:{enumerable:true,writable:false,configurable:false,value:32768}});p=doodle.Event.isEvent=function(b){if(!b||typeof b!=="object")return false;else b=b.toString();return b==="[object Event]"||b==="[object UIEvent]"||b==="[object MouseEvent]"||b==="[object TouchEvent]"||b==="[object KeyboardEvent]"||b==="[object TextEvent]"||b==="[object WheelEvent]"}})();
(function(){var k,i=doodle.Event.isEvent;doodle.UIEvent=function(p,b,j,m,l){var d,a,h;if(i(arguments[0])){a=arguments[0];p=undefined;d=Object.create(doodle.Event(a))}else if(typeof arguments[0]==="function"){a=arguments[0];p=undefined;d=Object.create(doodle.Event(""))}else{b=b===undefined?false:b;j=j===undefined?false:j;d=Object.create(doodle.Event(p,b,j))}Object.defineProperties(d,k);Object.defineProperties(d,function(){var e=null,f=0,c=0,g=0,o=0,n=0,q=0,v=0,s=0;h=function(u){if(u.view!==undefined)e=
u.view;if(u.detail!==undefined)f=u.detail;if(u.which!==undefined)c=u.which;if(u.charCode!==undefined)g=u.charCode;if(u.keyCode!==undefined)o=u.keyCode;if(u.layerX!==undefined)n=u.layerX;if(u.layerY!==undefined)q=u.layerY;if(u.pageX!==undefined)v=u.pageX;if(u.pageY!==undefined)s=u.pageY};return{view:{enumerable:true,configurable:false,get:function(){return e}},detail:{enumerable:true,configurable:false,get:function(){return f}},which:{enumerable:true,configurable:false,get:function(){return c}},charCode:{enumerable:true,
configurable:false,get:function(){return g}},keyCode:{enumerable:true,configurable:false,get:function(){return o}},layerX:{enumerable:true,configurable:false,get:function(){return n}},layerY:{enumerable:true,configurable:false,get:function(){return q}},pageX:{enumerable:true,configurable:false,get:function(){return v}},pageY:{enumerable:true,configurable:false,get:function(){return s}},initUIEvent:{value:function(u,r,t,A,w){r=r===undefined?false:r;t=t===undefined?false:t;A=A===undefined?null:A;w=
w===undefined?0:w;e=A;f=w;this.initEvent(u,r,t);return this}}}}());if(a)typeof a==="function"?a.call(d):h(a);else d.initUIEvent(p,b,j,m,l);return d};k={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object UIEvent]"}}}})();
(function(){var k,i=doodle.Event.isEvent,p=doodle.utils.types.check_string_type;doodle.MouseEvent=function(b,j,m,l,d,a,h,e,f,c,g,o,n,q,v){var s,u,r;if(i(arguments[0])){u=arguments[0];b=undefined;s=Object.create(doodle.UIEvent(u))}else if(typeof arguments[0]==="function"){u=arguments[0];b=undefined;s=Object.create(doodle.UIEvent(""))}else{j=j===undefined?false:j;m=m===undefined?false:m;l=l===undefined?null:l;d=d===undefined?0:d;s=Object.create(doodle.UIEvent(b,j,m,l,d))}Object.defineProperties(s,k);
Object.defineProperties(s,function(){var t=0,A=0,w=0,x=0,B=0,y=0,z=0,D=0,F=false,I=false,G=false,K=false,J=0,H=null;r=function(C){t=C.x!==undefined?C.x:0;A=C.y!==undefined?C.y:0;w=C.offsetX!==undefined?C.offsetX:0;x=C.offsetY!==undefined?C.offsetY:0;if(C.screenX!==undefined)B=C.screenX;if(C.screenY!==undefined)y=C.screenY;if(C.clientX!==undefined)z=C.clientX;if(C.clientY!==undefined)D=C.clientY;if(C.ctrlKey!==undefined)F=C.ctrlKey;if(C.altKey!==undefined)I=C.altKey;if(C.shiftKey!==undefined)G=C.shiftKey;
if(C.metaKey!==undefined)K=C.metaKey;if(C.button!==undefined)J=C.button;if(C.relatedTarget!==undefined)H=C.relatedTarget};return{x:{enumerable:true,configurable:false,get:function(){return t}},y:{enumerable:true,configurable:false,get:function(){return A}},screenX:{enumerable:true,configurable:false,get:function(){return B}},screenY:{enumerable:true,configurable:false,get:function(){return y}},clientX:{enumerable:true,configurable:false,get:function(){return z}},clientY:{enumerable:true,configurable:false,
get:function(){return D}},offsetX:{enumerable:true,configurable:false,get:function(){return w}},offsetY:{enumerable:true,configurable:false,get:function(){return x}},ctrlKey:{enumerable:true,configurable:false,get:function(){return F}},altKey:{enumerable:true,configurable:false,get:function(){return I}},shiftKey:{enumerable:true,configurable:false,get:function(){return G}},metaKey:{enumerable:true,configurable:false,get:function(){return K}},button:{enumerable:true,configurable:false,get:function(){return J}},
relatedTarget:{enumerable:true,configurable:false,get:function(){return H}},initMouseEvent:{value:function(C,W,E,L,M,N,O,P,Q,R,S,T,U,V,X){W=W===undefined?false:W;E=E===undefined?false:E;L=L===undefined?null:L;M=M===undefined?0:M;N=N===undefined?0:N;O=O===undefined?0:O;P=P===undefined?0:P;Q=Q===undefined?0:Q;R=R===undefined?false:R;S=S===undefined?false:S;T=T===undefined?false:T;U=U===undefined?false:U;V=V===undefined?0:V;v=X===undefined?null:X;B=N;y=O;z=P;D=Q;F=R;I=S;G=T;K=U;J=V;H=X;this.initUIEvent(C,
W,E,L,M);return this}},getModifierState:{value:function(C){p(C,this+".getModifierState","*key*");switch(C){case "Alt":return I;case "Control":return F;case "Meta":return K;case "Shift":return G;default:return false}}}}}());if(u)typeof u==="function"?u.call(s):r(u);else s.initMouseEvent(b,j,m,l,d,a,h,e,f,c,g,o,n,q,v);return s};k={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object MouseEvent]"}}}})();
(function(){var k,i=doodle.Event.isEvent,p=doodle.utils.types.check_string_type;doodle.TouchEvent=function(b,j,m,l,d,a,h,e,f,c,g,o,n,q,v,s,u,r){var t,A,w;if(i(arguments[0])){A=arguments[0];b=undefined;t=Object.create(doodle.UIEvent(A))}else if(typeof arguments[0]==="function"){A=arguments[0];b=undefined;t=Object.create(doodle.UIEvent(""))}else{j=j===undefined?false:j;m=m===undefined?false:m;l=l===undefined?null:l;d=d===undefined?0:d;t=Object.create(doodle.UIEvent(b,j,m,l,d))}Object.defineProperties(t,
k);Object.defineProperties(t,function(){var x=0,B=0,y=0,z=0,D=false,F=false,I=false,G=false,K=null,J=null,H=null,C=1,W=0;w=function(E){if(E.screenX!==undefined)x=E.screenX;if(E.screenY!==undefined)B=E.screenY;if(E.clientX!==undefined)y=E.clientX;if(E.clientY!==undefined)z=E.clientY;if(E.ctrlKey!==undefined)D=E.ctrlKey;if(E.altKey!==undefined)F=E.altKey;if(E.shiftKey!==undefined)I=E.shiftKey;if(E.metaKey!==undefined)G=E.metaKey;if(E.touches!==undefined)K=E.touches;if(E.targetTouches!==undefined)J=
E.targetTouches;if(E.changedTouches!==undefined)H=E.changedTouches;if(E.scale!==undefined)C=E.scale;if(E.rotation!==undefined)W=E.rotation};return{screenX:{enumerable:true,configurable:false,get:function(){return x}},screenY:{enumerable:true,configurable:false,get:function(){return B}},clientX:{enumerable:true,configurable:false,get:function(){return y}},clientY:{enumerable:true,configurable:false,get:function(){return z}},ctrlKey:{enumerable:true,configurable:false,get:function(){return D}},altKey:{enumerable:true,
configurable:false,get:function(){return F}},shiftKey:{enumerable:true,configurable:false,get:function(){return I}},metaKey:{enumerable:true,configurable:false,get:function(){return G}},touches:{enumerable:true,configurable:false,get:function(){return K}},targetTouches:{enumerable:true,configurable:false,get:function(){return J}},changedTouches:{enumerable:true,configurable:false,get:function(){return H}},scale:{enumerable:true,configurable:false,get:function(){return C}},rotation:{enumerable:true,
configurable:false,get:function(){return W}},initTouchEvent:{value:function(E,L,M,N,O,P,Q,R,S,T,U,V,X,Y,Z,$,aa,ba){L=L===undefined?false:L;M=M===undefined?false:M;N=N===undefined?null:N;O=O===undefined?0:O;P=P===undefined?0:P;Q=Q===undefined?0:Q;R=R===undefined?0:R;S=S===undefined?0:S;T=T===undefined?false:T;U=U===undefined?false:U;V=V===undefined?false:V;X=X===undefined?false:X;Y=Y===undefined?null:Y;Z=Z===undefined?null:Z;$=$===undefined?null:$;aa=aa===undefined?1:aa;ba=ba===undefined?0:ba;x=P;
B=Q;y=R;z=S;D=T;F=U;I=V;G=X;K=Y;J=Z;H=$;C=aa;W=ba;this.initUIEvent(E,L,M,N,O);return this}},getModifierState:{value:function(E){p(E,this+".getModifierState","*key*");switch(E){case "Alt":return F;case "Control":return D;case "Meta":return G;case "Shift":return I;default:return false}}}}}());if(A)typeof A==="function"?A.call(t):w(A);else t.initTouchEvent(b,j,m,l,d,a,h,e,f,c,g,o,n,q,v,s,u,r);return t};k={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TouchEvent]"}}}})();
(function(){var k,i=doodle.Event.isEvent;doodle.TextEvent=function(p,b,j,m,l,d){var a,h,e;if(i(arguments[0])){h=arguments[0];p=undefined;a=Object.create(doodle.UIEvent(h))}else if(typeof arguments[0]==="function"){h=arguments[0];p=undefined;a=Object.create(doodle.UIEvent(""))}else{b=b===undefined?false:b;j=j===undefined?false:j;m=m===undefined?null:m;a=Object.create(doodle.UIEvent(p,b,j,m))}Object.defineProperties(a,k);Object.defineProperties(a,function(){var f="",c=doodle.TextEvent.INPUT_METHOD_UNKNOWN;
e=function(g){if(g.data!==undefined)f=g.data;if(g.inputMode!==undefined)c=g.inputMode};return{data:{enumerable:true,configurable:false,get:function(){return f}},inputMode:{enumerable:true,configurable:false,get:function(){return c}},initTextEvent:{value:function(g,o,n,q,v,s){o=o===undefined?false:o;n=n===undefined?false:n;q=q===undefined?null:q;v=v===undefined?"":v;s=s===undefined?doodle.TextEvent.INPUT_METHOD_UNKNOWN:s;f=v;c=s;this.initUIEvent(g,o,n,q);return this}}}}());if(h)typeof h==="function"?
h.call(a):e(h);else a.initTextEvent(p,b,j,m,l,d);return a};k={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TextEvent]"}}}})();
(function(){var k,i=doodle.Event.isEvent,p=doodle.utils.types.check_string_type;doodle.KeyboardEvent=function(b,j,m,l,d,a,h,e){var f,c,g;if(i(arguments[0])){c=arguments[0];b=undefined;f=Object.create(doodle.UIEvent(c))}else if(typeof arguments[0]==="function"){c=arguments[0];b=undefined;f=Object.create(doodle.UIEvent(""))}else{j=j===undefined?false:j;m=m===undefined?false:m;l=l===undefined?null:l;f=Object.create(doodle.UIEvent(b,j,m,l))}Object.defineProperties(f,k);Object.defineProperties(f,function(){var o=
"",n=0,q=false,v=false,s=false,u=false,r=false;g=function(t){if(t.keyIdentifier!==undefined)o=t.keyIdentifier;if(t.keyLocation!==undefined)n=t.keyLocation;if(t.repeat!==undefined)q=t.repeat;if(t.ctrlKey!==undefined)v=t.ctrlKey;if(t.altKey!==undefined)s=t.altKey;if(t.shiftKey!==undefined)u=t.shiftKey;if(t.metaKey!==undefined)r=t.metaKey};return{keyIdentifier:{enumerable:true,configurable:false,get:function(){return o}},keyLocation:{enumerable:true,configurable:false,get:function(){return n}},repeat:{enumerable:true,
configurable:false,get:function(){return q}},ctrlKey:{enumerable:true,configurable:false,get:function(){return v}},altKey:{enumerable:true,configurable:false,get:function(){return s}},shiftKey:{enumerable:true,configurable:false,get:function(){return u}},metaKey:{enumerable:true,configurable:false,get:function(){return r}},initKeyboardEvent:{value:function(t,A,w,x,B,y,z,D){A=A===undefined?false:A;w=w===undefined?false:w;x=x===undefined?null:x;B=B===undefined?"":B;y=y===undefined?0:y;z=z===undefined?
"":z;D=D===undefined?false:D;o=B;n=y;q=D;z.split(" ").forEach(function(F){switch(F){case "Alt":s=true;break;case "Control":v=true;break;case "Meta":r=true;break;case "Shift":u=true;break}});this.initUIEvent(t,A,w,x);return this}},getModifierState:{value:function(t){p(t,this+".getModifierState","*key*");switch(t){case "Alt":return s;case "Control":return v;case "Meta":return r;case "Shift":return u;default:return false}}}}}());if(c)typeof c==="function"?c.call(f):g(c);else f.initKeyboardEvent(b,j,
m,l,d,a,h,e);return f};k={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object KeyboardEvent]"}}}})();
Object.defineProperties(doodle.Event,{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},ADDED:{enumerable:true,writable:false,configurable:false,value:"added"},REMOVED:{enumerable:true,writable:false,configurable:false,value:"removed"},ENTER_FRAME:{enumerable:true,writable:false,configurable:false,value:"enterFrame"},LOAD:{enumerable:true,
writable:false,configurable:false,value:"load"},CHANGE:{enumerable:true,writable:false,configurable:false,value:"change"}});Object.defineProperties(doodle.UIEvent,{FOCUS_IN:{enumerable:true,writable:false,configurable:false,value:"focusIn"}});
Object.defineProperties(doodle.MouseEvent,{CLICK:{enumerable:true,writable:false,configurable:false,value:"click"},DOUBLE_CLICK:{enumerable:true,writable:false,configurable:false,value:"dblclick"},CONTEXT_MENU:{enumerable:true,writable:false,configurable:false,value:"contextmenu"},MOUSE_DOWN:{enumerable:true,writable:false,configurable:false,value:"mousedown"},MOUSE_UP:{enumerable:true,writable:false,configurable:false,value:"mouseup"},MOUSE_WHEEL:{enumerable:true,writable:false,configurable:false,
value:"mousewheel"},MOUSE_MOVE:{enumerable:true,writable:false,configurable:false,value:"mousemove"},MOUSE_OUT:{enumerable:true,writable:false,configurable:false,value:"mouseout"},MOUSE_OVER:{enumerable:true,writable:false,configurable:false,value:"mouseover"},MOUSE_ENTER:{enumerable:true,writable:false,configurable:false,value:"mouseenter"},MOUSE_LEAVE:{enumerable:true,writable:false,configurable:false,value:"mouseleave"}});
Object.defineProperties(doodle.TouchEvent,{TOUCH_START:{enumerable:true,writable:false,configurable:false,value:"touchstart"},TOUCH_MOVE:{enumerable:true,writable:false,configurable:false,value:"touchmove"},TOUCH_END:{enumerable:true,writable:false,configurable:false,value:"touchend"},TOUCH_CANCEL:{enumerable:true,writable:false,configurable:false,value:"touchcancel"}});
Object.defineProperties(doodle.KeyboardEvent,{KEY_PRESS:{enumerable:true,writable:false,configurable:false,value:"keypress"},KEY_UP:{enumerable:true,writable:false,configurable:false,value:"keyup"},KEY_DOWN:{enumerable:true,writable:false,configurable:false,value:"keydown"},KEY_LOCATION_STANDARD:{enumerable:true,writable:false,configurable:false,value:0},KEY_LOCATION_LEFT:{enumerable:true,writable:false,configurable:false,value:1},KEY_LOCATION_RIGHT:{enumerable:true,writable:false,configurable:false,
value:2},KEY_LOCATION_NUMPAD:{enumerable:true,writable:false,configurable:false,value:3},KEY_LOCATION_MOBILE:{enumerable:true,writable:false,configurable:false,value:4},KEY_LOCATION_JOYSTICK:{enumerable:true,writable:false,configurable:false,value:5}});
Object.defineProperties(doodle.TextEvent,{TEXT_INPUT:{enumerable:true,writable:false,configurable:false,value:"textInput"},INPUT_METHOD_UNKNOWN:{enumerable:true,writable:false,configurable:false,value:0},INPUT_METHOD_KEYBOARD:{enumerable:true,writable:false,configurable:false,value:1},INPUT_METHOD_PASTE:{enumerable:true,writable:false,configurable:false,value:2},INPUT_METHOD_DROP:{enumerable:true,writable:false,configurable:false,value:3},INPUT_METHOD_IME:{enumerable:true,writable:false,configurable:false,
value:4},INPUT_METHOD_OPTION:{enumerable:true,writable:false,configurable:false,value:5},INPUT_METHOD_HANDWRITING:{enumerable:true,writable:false,configurable:false,value:6},INPUT_METHOD_VOICE:{enumerable:true,writable:false,configurable:false,value:7},INPUT_METHOD_MULTIMODAL:{enumerable:true,writable:false,configurable:false,value:8},INPUT_METHOD_SCRIPT:{enumerable:true,writable:false,configurable:false,value:9}});
(function(){var k,i,p;p=doodle.geom.Point=function(b,j){var m={},l=arguments.length;Object.defineProperties(m,k);Object.defineProperties(m,{x:{enumerable:true,configurable:false,get:function(){return b},set:function(d){b=d}},y:{enumerable:true,configurable:false,get:function(){return j},set:function(d){j=d}}});if(l===0)m.compose(0,0);else if(l===2)m.compose(b,j);else{l=arguments[0];b=undefined;if(typeof l==="function"){m.compose(0,0);l.call(m)}else Array.isArray(l)?m.compose.apply(m,l):m.compose(l.x,
l.y)}return m};k={length:{enumerable:true,configurable:false,get:function(){return this.distance({x:0,y:0},this)}},compose:{enumerable:false,writable:false,configurable:false,value:function(b,j){this.x=b;this.y=j;return this}},clone:{enumerable:false,writable:false,configurable:false,value:function(){return p(this.x,this.y)}},toArray:{enumerable:false,writable:false,configurable:false,value:function(){var b=Array(2);b[0]=this.x;b[1]=this.y;return b}},toString:{enumerable:false,writable:false,configurable:false,
value:function(){return"(x="+this.x+", y="+this.y+")"}},distance:{enumerable:false,writable:false,configurable:false,value:function(b,j){var m=j.x-b.x,l=j.y-b.x;return Math.sqrt(m*m+l*l)}},normalize:{enumerable:false,writable:false,configurable:false,value:function(b){var j=this.length;this.x=this.x/j*b;this.y=this.y/j*b;return this}},equals:{enumerable:false,writable:false,configurable:false,value:function(b){return this&&b&&this.x===b.x&&this.y===b.y||!this&&!b}},interpolate:{enumerable:false,writable:false,
configurable:false,value:function(b,j,m){return p(b.x+(j.x-b.x)*m,b.y+(j.y-b.y)*m)}},polar:{enumerable:false,writable:false,configurable:false,value:function(b,j){return p(b*Math.cos(j),b*Math.sin(j))}},add:{enumerable:false,writable:false,configurable:false,value:function(b){return p(this.x+b.x,this.y+b.y)}},subtract:{enumerable:false,writable:false,configurable:false,value:function(b){return p(this.x-b.x,this.y-b.y)}},offset:{enumerable:false,writable:false,configurable:false,value:function(b,j){this.x+=
b;this.y+=j;return this}}};i=doodle.geom.Point.isPoint=function(b){return b&&typeof b.x==="number"&&typeof b.y==="number"};doodle.utils.types.check_point_type=function(b,j,m){if(i(b))return true;else{j=j===undefined?"check_point_type":j;m=m===undefined?"":"("+m+")";throw new TypeError(j+m+": Parameter must be a point.");}}})();
(function(){var k,i,p,b=doodle.geom.Point,j=Math.sin,m=Math.cos,l=Math.atan2,d=Math.tan;i=doodle.geom.Matrix=function(a,h,e,f,c,g){var o={},n=arguments.length;Object.defineProperties(o,k);Object.defineProperties(o,{a:{enumerable:true,configurable:false,get:function(){return a},set:function(q){a=q}},b:{enumerable:true,configurable:false,get:function(){return h},set:function(q){h=q}},c:{enumerable:true,configurable:false,get:function(){return e},set:function(q){e=q}},d:{enumerable:true,configurable:false,
get:function(){return f},set:function(q){f=q}},tx:{enumerable:true,configurable:false,get:function(){return c},set:function(q){c=q}},ty:{enumerable:true,configurable:false,get:function(){return g},set:function(q){g=q}}});if(n===0)o.identity();else if(n===6)o.compose(a,h,e,f,c,g);else{n=arguments[0];a=undefined;if(typeof n==="function"){o.identity();n.call(o)}else Array.isArray(n)?o.compose.apply(o,n):o.compose(n.a,n.b,n.c,n.d,n.tx,n.ty)}return o};k={compose:{enumerable:false,writable:false,configurable:false,
value:function(a,h,e,f,c,g){this.a=a;this.b=h;this.c=e;this.d=f;this.tx=c;this.ty=g;return this}},toArray:{enumerable:false,writable:false,configurable:false,value:function(){var a=Array(6);a[0]=this.a;a[1]=this.b;a[2]=this.c;a[3]=this.d;a[4]=this.tx;a[5]=this.ty;return a}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}},equals:{enumerable:false,writable:false,configurable:false,
value:function(a){return this&&a&&this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d&&this.tx===a.tx&&this.ty===a.ty||!this&&!a}},identity:{enumerable:false,writable:false,configurable:false,value:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this}},clone:{enumerable:false,writable:false,configurable:false,value:function(){return i(this.a,this.b,this.c,this.d,this.tx,this.ty)}},multiply:{enumerable:false,writable:false,configurable:false,value:function(a){return this.compose(this.a*
a.a+this.c*a.b,this.b*a.a+this.d*a.b,this.a*a.c+this.c*a.d,this.b*a.c+this.d*a.d,this.a*a.tx+this.c*a.ty+this.tx,this.b*a.tx+this.d*a.ty+this.ty)}},rotate:{enumerable:false,writable:false,configurable:false,value:function(a){var h=m(a);a=j(a);return this.multiply(i(h,a,-a,h,0,0))}},deltaRotate:{enumerable:false,writable:false,configurable:false,value:function(a){var h=this.tx,e=this.ty;this.rotate(a);this.tx=h;this.ty=e;return this}},rotation:{enumerable:true,configurable:false,get:function(){return l(this.b,
this.a)},set:function(a){var h=m(a);a=j(a);return this.compose(h,a,-a,h,this.tx,this.ty)}},scale:{enumerable:false,writable:false,configurable:false,value:function(a,h){return this.multiply(i(a,0,0,h,0,0))}},deltaScale:{enumerable:false,writable:false,configurable:false,value:function(a,h){var e=this.tx,f=this.ty;this.scale(a,h);this.tx=e;this.ty=f;return this}},translate:{enumerable:false,writable:false,configurable:false,value:function(a,h){this.tx+=a;this.ty+=h;return this}},skew:{enumerable:false,
writable:false,configurable:false,value:function(a,h){var e=d(a),f=d(h);return this.multiply(i(1,f,e,1,0,0))}},deltaSkew:{enumerable:false,writable:false,configurable:false,value:function(a,h){var e=this.tx,f=this.ty;this.skew(a,h);this.tx=e;this.ty=f;return this}},add:{enumerable:false,writable:false,configurable:false,value:function(a){this.a+=a.a;this.b+=a.b;this.c+=a.c;this.d+=a.d;this.tx+=a.tx;this.ty+=a.ty;return this}},invert:{enumerable:false,writable:false,configurable:false,value:function(){var a=
this.a*this.d-this.b*this.c;return this.compose(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.ty*this.c-this.d*this.tx)/a,-(this.ty*this.a-this.b*this.tx)/a)}},transformPoint:{enumerable:false,writable:false,configurable:false,value:function(a){return b(this.a*a.x+this.c*a.y+this.tx,this.b*a.x+this.d*a.y+this.ty)}},deltaTransformPoint:{enumerable:false,writable:false,configurable:false,value:function(a){return b(this.a*a.x+this.c*a.y,this.b*a.x+this.d*a.y)}},rotateAroundExternalPoint:{enumerable:false,
writable:false,configurable:false,value:function(a,h){var e=i().rotate(h),f,c=a.x,g=a.y;this.translate(-c,-g);f=e.transformPoint({x:this.tx,y:this.ty});this.tx=f.x;this.ty=f.y;return this.multiply(e).translate(c,g)}},rotateAroundInternalPoint:{enumerable:false,writable:false,configurable:false,value:function(a,h){return this.rotateAroundExternalPoint(this.transformPoint(a),h)}},matchInternalPointWithExternal:{enumerable:false,writable:false,configurable:false,value:function(a,h){var e=this.transformPoint(a);
return this.translate(h.x-e.x,h.y-e.y)}},interpolate:{enumerable:false,writable:false,configurable:false,value:function(a,h){this.a+=(a.a-this.a)*h;this.b+=(a.b-this.b)*h;this.c+=(a.c-this.c)*h;this.d+=(a.d-this.d)*h;this.tx+=(a.tx-this.tx)*h;this.ty+=(a.ty-this.ty)*h;return this}}};p=doodle.geom.Matrix.isMatrix=function(a){return a!==undefined&&a!==null&&typeof a.a==="number"&&typeof a.b==="number"&&typeof a.c==="number"&&typeof a.d==="number"&&typeof a.tx==="number"&&typeof a.ty==="number"};doodle.utils.types.check_matrix_type=
function(a,h){if(p(a))return true;else{h=h===undefined?"check_matrix_type":h;throw new TypeError(h+": Parameter must be a matrix.");}}})();
(function(){var k,i,p;i=doodle.geom.Rectangle=function(b,j,m,l){var d={},a=arguments.length;Object.defineProperties(d,k);Object.defineProperties(d,{x:{enumerable:true,configurable:false,get:function(){return b},set:function(h){b=h}},y:{enumerable:true,configurable:false,get:function(){return j},set:function(h){j=h}},width:{enumerable:true,configurable:false,get:function(){return m},set:function(h){m=h}},height:{enumerable:true,configurable:false,get:function(){return l},set:function(h){l=h}}});if(a===
0)d.compose(0,0,0,0);else if(a===4)d.compose(b,j,m,l);else{a=arguments[0];b=undefined;if(typeof a==="function"){d.compose(0,0,0,0);a.call(d)}else Array.isArray(a)?d.compose.apply(d,a):d.compose(a.x,a.y,a.width,a.height)}return d};k={top:{enumerable:true,configurable:false,get:function(){return this.y},set:function(b){this.y=b;this.height-=b}},right:{enumerable:true,configurable:false,get:function(){return this.x+this.width},set:function(b){this.width=b-this.x}},bottom:{enumerable:true,configurable:false,
get:function(){return this.y+this.height},set:function(b){this.height=b-this.y}},left:{enumerable:true,configurable:false,get:function(){return this.x},set:function(b){this.x=b;this.width-=b}},clone:{enumerable:false,writable:false,configurable:false,value:function(){return i(this.x,this.y,this.width,this.height)}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+")"}},toArray:{enumerable:false,writable:false,
configurable:false,value:function(){return[this.top,this.right,this.bottom,this.left]}},compose:{enumerable:false,writable:false,configurable:false,value:function(b,j,m,l){this.x=b;this.y=j;this.width=m;this.height=l;return this}},offset:{enumerable:false,writable:false,configurable:false,value:function(b,j){this.x+=b;this.y+=j;return this}},inflate:{enumerable:false,writable:false,configurable:false,value:function(b,j){this.x-=b;this.width+=2*b;this.y-=j;this.height+=2*j;return this}},equals:{enumerable:false,
writable:false,configurable:false,value:function(b){return this.x===b.x&&this.y===b.y&&this.width===b.width&&this.height===b.height}},isEmpty:{enumerable:false,writable:false,configurable:false,value:function(){return this.width>=0||this.height>=0}},containsPoint:{enumerable:false,writable:false,configurable:false,value:function(b){var j=b.x;b=b.y;return j>=this.left&&j<=this.right&&b>=this.top&&b<=this.bottom}},containsRect:{enumerable:false,writable:false,configurable:false,value:function(b){return this.containsPoint({x:b.x,
y:b.y})&&this.containsPoint({x:b.right,y:b.y})&&this.containsPoint({x:b.right,y:b.bottom})&&this.containsPoint({x:b.x,y:b.bottom})}},intersects:{enumerable:false,writable:false,configurable:false,value:function(b){return this.containsPoint({x:b.x,y:b.y})||this.containsPoint({x:b.right,y:b.y})||this.containsPoint({x:b.right,y:b.bottom})||this.containsPoint({x:b.x,y:b.bottom})}},intersection:{enumerable:false,writable:false,configurable:false,value:function(b){var j=i();if(this.intersects(b)){j.left=
Math.max(this.left,b.left);j.top=Math.max(this.top,b.top);j.right=Math.min(this.right,b.right);j.bottom=Math.min(this.bottom,b.bottom)}return j}},union:{enumerable:false,writable:false,configurable:false,value:function(b){var j=i();j.left=Math.min(this.left,b.left);j.top=Math.min(this.top,b.top);j.right=Math.max(this.right,b.right);j.bottom=Math.max(this.bottom,b.bottom);return j}}};p=doodle.geom.Rectangle.isRect=function(b){return typeof b.x==="number"&&typeof b.y==="number"&&typeof b.width==="number"&&
typeof b.height==="number"&&typeof b.top==="number"&&typeof b.bottom==="number"&&typeof b.left==="number"&&typeof b.right==="number"};doodle.utils.types.check_rect_type=function(b,j){if(p(b))return true;else{j=j===undefined?"check_rect_type":j;throw new TypeError(j+": Parameter must be a rectangle.");}}})();
(function(){var k,i,p,b,j=doodle.Event.CAPTURING_PHASE,m=doodle.Event.AT_TARGET,l=doodle.Event.BUBBLING_PHASE;doodle.EventDispatcher=function(d){var a={};Object.defineProperties(a,k);Object.defineProperties(a,{eventListeners:function(){var h={};return{enumerable:true,configurable:false,get:function(){return h}}}()});typeof d==="function"&&d.call(a);return a};k={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object EventDispatcher]"}},modify:{enumerable:false,
writable:false,configurable:false,value:function(d){d.call(this);return this}},addEventListener:{enumerable:false,writable:false,configurable:false,value:function(d,a,h){h=h===undefined?false:h;var e=this;this.eventListeners[d]||(this.eventListeners[d]={capture:[],bubble:[]});this.eventListeners[d][h?"capture":"bubble"].push(a);i.every(function(f){return e!==f})&&i.push(e)}},removeEventListener:{enumerable:false,writable:false,configurable:false,value:function(d,a,h){h=h===undefined?false:h;if(this.eventListeners[d]){var e=
this.eventListeners[d];h=e[h?"capture":"bubble"];h.splice(h.indexOf(a),1);e.capture.length===0&&e.bubble.length===0&&delete this.eventListeners[d];Object.keys(this.eventListeners).length===0&&i.splice(i.indexOf(this),1)}}},handleEvent:{enumerable:false,writable:false,configurable:false,value:function(d){var a=d.eventPhase===j?"capture":"bubble",h=this.eventListeners[d.type],e=0,f;if((h=h&&h[a])&&h.length>0){d.__setCurrentTarget(this);e=h.length;for(f=0;f<e;f+=1){a=h[f].call(this,d);if(a===false||
d.returnValue===false)d.__cancel||d.stopPropagation();if(d.__cancelNow)break}}return e>0?true:false}},dispatchEvent:{enumerable:true,writable:false,configurable:false,value:function(d){var a,h,e=[],f;if(d.__cancel)return false;d.target||d.__setTarget(this);a=d.target;for(h=a.parent||null;h;){e.push(h);h=h.parent}d.__setEventPhase(j);for(f=h=e.length;(f-=1)>=0;){e[f].handleEvent(d);if(d.__cancel)return true}d.__setEventPhase(m);a.handleEvent(d);if(d.__cancel)return true;if(!d.bubbles||d.cancelBubble)return true;
d.__setEventPhase(l);for(f=0;f<h;f+=1){e[f].handleEvent(d);if(d.__cancel||d.cancelBubble)return true}return true}},broadcastEvent:{enumerable:true,writable:false,configurable:false,value:function(d){var a,h,e=0;if(d.__cancel)throw Error(this+".broadcastEvent: Can not dispatch a cancelled event.");d.target||d.__setTarget(this);a=i.filter(function(f){return f.hasEventListener(d.type)});for(h=a.length;e<h;e+=1){a[e].handleEvent(d);if(d.__cancel)break}return true}},hasEventListener:{enumerable:false,
writable:false,configurable:false,value:function(d){return this.eventListeners!==null&&this.eventListeners.hasOwnProperty(d)}},willTrigger:{enumerable:false,writable:false,configurable:false,value:function(d){if(this.hasEventListener(d))return true;else if(!this.children||this.children.length===0)return false;else for(var a in this.children)if(this.children[a].willTrigger(d))return true;return false}}};i=doodle.EventDispatcher.dispatcher_queue=[];p=doodle.EventDispatcher.isEventDispatcher=function(d){return d.toString()===
"[object EventDispatcher]"};b=doodle.EventDispatcher.inheritsEventDispatcher=function(d){for(;d;)if(p(d))return true;else{if(typeof d!=="object")return false;d=Object.getPrototypeOf(d)}return false};doodle.utils.types.check_eventdispatcher_type=function(d,a,h){if(b(d))return true;else{a=a===undefined?"check_eventdispatcher_type":a;h=h===undefined?"":"("+h+")";throw new TypeError(a+h+": Parameter must be an EventDispatcher.");}}})();
(function(){function k(e,f,c){e.children.forEach(function(g){typeof c==="function"&&c(g);g.dispatchEvent(d(f,true));k(g,f,c)})}var i=0,p,b,j,m,l=doodle.geom.Point,d=doodle.Event,a=180/Math.PI,h=Math.PI/180;doodle.Node=function(e){var f=Object.create(doodle.EventDispatcher());Object.defineProperties(f,p);Object.defineProperties(f,{id:function(){var c;return{enumerable:true,configurable:true,get:function(){return c},set:function(g){c=g}}}(),root:function(){var c=null;return{enumerable:true,configurable:false,
get:function(){return c},set:function(g){c=g}}}(),parent:function(){var c=null;return{enumerable:true,configurable:false,get:function(){return c},set:function(g){c=g}}}(),children:function(){var c=[];return{enumerable:true,configurable:false,get:function(){return c}}}(),transform:function(){var c=doodle.geom.Matrix();return{enumerable:true,configurable:false,get:function(){return c},set:function(g){c=g}}}(),visible:function(){var c=true;return{enumerable:true,configurable:true,get:function(){return c},
set:function(g){c=g}}}(),alpha:function(){var c=1;return{enumerable:true,configurable:true,get:function(){return c},set:function(g){c=g>1?1:g<0?0:g}}}()});if(typeof e==="function"){e.call(f);e=undefined}if(f.id===undefined){f.id=e!==undefined?e:"node"+String("000"+i).slice(-3);i+=1}return f};p={x:{enumerable:true,configurable:false,get:function(){return this.transform.tx},set:function(e){this.transform.tx=e}},y:{enumerable:true,configurable:false,get:function(){return this.transform.ty},set:function(e){this.transform.ty=
e}},axis:{value:{x:this.x,y:this.y}},rotate:{value:function(e){this.transform.rotate(e*h)}},rotation:{enumerable:true,configurable:true,get:function(){return this.transform.rotation*a},set:function(e){this.transform.rotation=e*h}},scaleX:{enumerable:true,configurable:false,get:function(){return this.transform.a},set:function(e){this.transform.a=e}},scaleY:{enumerable:true,configurable:false,get:function(){return this.transform.d},set:function(e){this.transform.d=e}},toString:{enumerable:false,writable:false,
configurable:false,value:function(){return"[object Node]"}},addChildAt:{enumerable:false,writable:false,configurable:false,value:function(e,f){if(this.children.indexOf(e)!==-1)return false;if(e.root!==this.root)e.root=this.root;e.parent!==null&&e.parent!==this&&e.parent.removeChild(e);e.parent=this;this.children.splice(f,0,e);if(m(e)){e.dispatchEvent(d(d.ADDED,true));k(e,d.ADDED)}return e}},addChild:{enumerable:false,writable:false,configurable:false,value:function(e){return this.addChildAt(e,this.children.length)}},
removeChildAt:{enumerable:false,writable:false,configurable:false,value:function(){function e(f,c){var g=f.getBounds(f.root);c&&c.clearRect(g.x,g.y,g.width,g.height);f.root=null}return function(f){var c=this.children[f],g=c.context;this.children.splice(f,1);if(g){e(c,g);c.dispatchEvent(d(d.REMOVED,true));k(c,d.REMOVED,function(o){e(o,g)})}c.root=null;c.parent=null}}()},removeChild:{enumerable:false,writable:false,configurable:false,value:function(e){this.removeChildAt(this.children.indexOf(e))}},
removeChildById:{enumerable:false,writable:false,configurable:false,value:function(e){this.removeChild(this.getChildById(e))}},removeAllChildren:{enumerable:false,writable:false,configurable:false,value:function(){for(var e=this.children.length;(e-=1)>=0;)this.removeChildAt(e)}},getChildById:{enumerable:false,writable:false,configurable:false,value:function(e){return this.children.filter(function(f){return f.id===e})[0]}},setChildIndex:{enumerable:true,writable:false,configurable:false,value:function(e,
f){var c=this.children,g=c.length,o=c.indexOf(e);if(o===-1)throw new ReferenceError(this+".setChildIndex(*child*, index): "+e+" does not exist on child list.");if(f>g||f<-g)throw new RangeError(this+".setChildIndex(child, *index*): "+f+" does not exist on child list.");c.splice(o,1);c.splice(f,0,e)}},swapChildrenAt:{enumerable:false,writable:false,configurable:false,value:function(e,f){var c=this.children;c[e]=c.splice(f,1,c[e])[0]}},swapChildren:{enumerable:false,writable:false,configurable:false,
value:function(e,f){var c=this.children;this.swapChildrenAt(c.indexOf(e),c.indexOf(f))}},swapDepths:{enumerable:false,writable:false,configurable:false,value:function(e){var f=this.parent;if(!f||!Array.isArray(f.children))throw Error(this+".swapDepths: no parent found.");else f.swapChildren(this,e)}},swapDepthAt:{enumerable:false,writable:false,configurable:false,value:function(e){var f=this.parent;if(!f||!Array.isArray(f.children))throw Error(this+".swapDepthAt: no parent found.");else f.swapChildrenAt(e,
f.children.indexOf(this))}},contains:{enumerable:false,writable:false,configurable:false,value:function(e){for(;e;){if(e===this)return true;e=e.parent}return false}},localToGlobal:{enumerable:false,writable:false,configurable:false,value:function(e){for(var f=this;f;){e=f.transform.transformPoint(e);f=f.parent}return e}},globalToLocal:{enumerable:false,writable:false,configurable:false,value:function(e){var f=this.localToGlobal({x:0,y:0});return l(e.x-f.x,e.y-f.y)}}};b=doodle.Node.isNode=function(e){return e.toString()===
"[object Node]"};j=doodle.Node.inheritsNode=function(e){for(;e;)if(b(e))return true;else{if(typeof e!=="object")return false;e=Object.getPrototypeOf(e)}return false};doodle.utils.types.check_node_type=function(e,f,c){if(j(e))return true;else{f=f===undefined?"check_node_type":f;c=c===undefined?"":"("+c+")";throw new TypeError(f+c+": Parameter must be a Node.");}};m=doodle.Node.inDisplayList=function(e){for(;e;){if(e.context)return true;e=e.parent}return false}})();
(function(){var k,i=doodle.utils.hex_to_rgb_str,p=doodle.utils.get_element,b=doodle.Event,j=doodle.GradientType.LINEAR,m=doodle.GradientType.RADIAL;doodle.Graphics=function(l,d,a){var h=Object.create(null),e=0,f=0;Object.defineProperties(h,k);Object.defineProperties(h,{draw:{enumerable:false,writable:false,configurable:false,value:function(c){d.push(c)}},clear:{enumerable:false,writable:false,configurable:false,value:function(){for(var c=d.length;(c-=1)>=0;)d.splice(c,1);l.width=0;l.height=0;e=f=
a.min_x=a.min_y=a.max_x=a.max_y=0}},rect:{enumerable:false,writable:false,configurable:false,value:function(c,g,o,n){a.min_x=Math.min(0,c,a.min_x);a.min_y=Math.min(0,g,a.min_y);a.max_x=Math.max(0,c,c+o,a.max_x);a.max_y=Math.max(0,g,g+n,a.max_y);l.width=-a.min_x+a.max_x;l.height=-a.min_y+a.max_y;d.push(function(q){q.beginPath();q.rect(c,g,o,n);q.closePath();q.stroke()})}},circle:{enumerable:false,writable:false,configurable:false,value:function(c,g,o){a.min_x=Math.min(0,-o+c,a.min_x);a.min_y=Math.min(0,
-o+g,a.min_y);a.max_x=Math.max(0,c,c+o,a.max_x);a.max_y=Math.max(0,g,g+o,a.max_y);l.width=-a.min_x+a.max_x;l.height=-a.min_y+a.max_y;d.push(function(n){n.beginPath();n.arc(c,g,o,0,6.283185307179586,true);n.closePath();n.stroke()})}},ellipse:{enumerable:false,writable:false,configurable:false,value:function(c,g,o,n){n=n===undefined?o:n;var q=o/2,v=n/2,s=0.5522847498*q,u=0.5522847498*v;a.min_x=Math.min(0,-q+c,a.min_x);a.min_y=Math.min(0,-v+g,a.min_y);a.max_x=Math.max(0,c,c+q,a.max_x);a.max_y=Math.max(0,
g,g+v,a.max_y);l.width=-a.min_x+a.max_x;l.height=-a.min_y+a.max_y;d.push(function(r){r.beginPath();r.moveTo(c+q,g);r.bezierCurveTo(c+q,g-u,c+s,g-v,c,g-v);r.bezierCurveTo(c-s,g-v,c-q,g-u,c-q,g);r.bezierCurveTo(c-q,g+u,c-s,g+v,c,g+v);r.bezierCurveTo(c+s,g+v,c+q,g+u,c+q,g);r.closePath();r.stroke()})}},roundRect:{enumerable:false,writable:false,configurable:false,value:function(c,g,o,n,q,v){q=q===undefined?0:q;v=v===undefined?0:v;var s=c+o,u=s-q,r=c+q,t=g+n,A=t-v,w=g+v;a.min_x=Math.min(0,c,a.min_x);a.min_y=
Math.min(0,g,a.min_y);a.max_x=Math.max(0,c,c+o,a.max_x);a.max_y=Math.max(0,g,g+n,a.max_y);l.width=-a.min_x+a.max_x;l.height=-a.min_y+a.max_y;d.push(function(x){x.beginPath();x.moveTo(r,g);x.beginPath();x.lineTo(u,g);x.quadraticCurveTo(s,g,s,w);x.lineTo(s,A);x.quadraticCurveTo(s,t,u,t);x.lineTo(r,t);x.quadraticCurveTo(c,t,c,A);x.lineTo(c,w);x.quadraticCurveTo(c,g,r,g);x.closePath();x.stroke()})}},moveTo:{enumerable:false,writable:false,configurable:false,value:function(c,g){d.push(function(o){o.moveTo(c,
g)});e=c;f=g}},lineTo:{enumerable:false,writable:false,configurable:false,value:function(c,g){a.min_x=Math.min(0,c,e,a.min_x);a.min_y=Math.min(0,g,f,a.min_y);a.max_x=Math.max(0,c,e,a.max_x);a.max_y=Math.max(0,g,f,a.max_y);l.width=a.max_x-a.min_x;l.height=a.max_y-a.min_y;d.push(function(o){o.lineTo(c,g)});e=c;f=g}},curveTo:{enumerable:false,writable:false,configurable:false,value:function(c,g){var o=e,n=f,q=c.x,v=c.y,s=g.x,u=g.y,r,t=0,A=0;r=(o-q)/(o-2*q+s);if(0<=r&&r<=1)t=(1-r)*(1-r)*o+2*(1-r)*r*q+
r*r*s;r=(n-v)/(n-2*v+u);if(0<=r&&r<=1)A=(1-r)*(1-r)*n+2*(1-r)*r*v+r*r*u;a.min_x=Math.min(0,o,t,s,a.min_x);a.min_y=Math.min(0,n,A,u,a.min_y);a.max_x=Math.max(0,o,t,s,a.max_x);a.max_y=Math.max(0,n,A,u,a.max_y);l.width=-a.min_x+a.max_x;l.height=-a.min_y+a.max_y;d.push(function(w){w.quadraticCurveTo(q,v,s,u)});e=s;f=u}},bezierCurveTo:{enumerable:false,writable:false,configurable:false,value:function(c,g,o){var n=Math.pow,q=Math.max,v=Math.min,s=e,u=f,r=c.x,t=c.y,A=g.x,w=g.y,x=o.x,B=o.y,y,z=o=g=0,D=0;
for(c=0.1;c<1;c+=0.1){y=n(1-c,3)*s+3*n(1-c,2)*c*r+3*n(1-c,1)*n(c,2)*A+n(c,3)*x;if(y>g)g=y;if(y<o)o=y;y=n(1-c,3)*u+3*n(1-c,2)*c*t+3*n(1-c,1)*n(c,2)*w+n(c,3)*B;if(y>z)z=y;if(y<D)D=y}a.min_x=v(0,s,o,x,a.min_x);a.min_y=v(0,u,D,B,a.min_y);a.max_x=q(0,s,g,x,a.max_x);a.max_y=q(0,u,z,B,a.max_y);l.width=-a.min_x+a.max_x;l.height=-a.min_y+a.max_y;d.push(function(F){F.bezierCurveTo(r,t,A,w,x,B)});e=x;f=B}},beginFill:{enumerable:false,writable:false,configurable:false,value:function(c,g){g=g===undefined?1:g;
d.push(function(o){o.fillStyle=i(c,g)})}},beginGradientFill:{enumerable:true,writable:false,configurable:false,value:function(c,g,o,n,q,v){d.push(function(s){var u=doodle.utils.hex_to_rgb_str,r,t=n.length,A=0;if(c===j)r=s.createLinearGradient(g.x,g.y,o.x,o.y);else if(c===m)r=s.createRadialGradient(g.x,g.y,g.radius,o.x,o.y,o.radius);else throw new TypeError(this+".graphics.beginGradientFill(*type*, point1, point2, ratios, colors, alphas): Unknown gradient type.");for(;A<t;A+=1)r.addColorStop(n[A],
u(q[A],v[A]));s.fillStyle=r})}},beginPatternFill:{enumerable:true,writable:false,configurable:false,value:function(c,g){var o=null,n;n=doodle.Pattern;g=g===undefined?n.REPEAT:g;if(g!==n.REPEAT&&g!==n.NO_REPEAT&&g!==n.REPEAT_X&&g!==n.REPEAT_Y)throw new SyntaxError(this+".graphics.beginPatternFill(image, *repeat*): Invalid pattern repeat type.");if(typeof c==="string")if(c[0]==="#")c=p(c,this+".beginPatternFill");else(function(){var q=encodeURI(c);c=new Image;c.src=q})();if(c.complete)o=c;else{c.onload=
function(){o=c;l.dispatchEvent(b(b.LOAD))};n=function(){throw new URIError(this+".graphics.beginPatternFill(*image*,repeat): Unable to load "+c.src);};c.onerror=n;c.onabort=n}d.push(function(q){q.fillStyle=o?q.createPattern(o,g):"rgba(0,0,0,0)"})}},lineStyle:{enumerable:true,writable:false,configurable:false,value:function(c,g,o,n,q,v){c=c===undefined?1:c;g=g===undefined?"#000000":g;o=o===undefined?1:o;n=n===undefined?doodle.LineCap.BUTT:n;q=q===undefined?doodle.LineJoin.MITER:q;v=v===undefined?10:
v;if(typeof g==="string"||typeof g==="number")g=i(g,o);else throw new TypeError(this+".graphics.lineStyle(thickness,*color*,alpha,caps,joints,miterLimit): Color must be a hex value.");d.push(function(s){s.lineWidth=c;s.strokeStyle=g;s.lineCap=n;s.lineJoin=q;s.miterLimit=v})}},beginPath:{enumerable:false,writable:false,configurable:false,value:function(){d.push(function(c){c.beginPath();c.moveTo(e,f)})}},closePath:{enumerable:false,writable:false,configurable:false,value:function(){d.push(function(c){c.closePath();
c.stroke()});f=e=0}},endFill:{enumerable:false,writable:false,configurable:false,value:function(){d.push(function(c){c.fill()})}},stroke:{enumerable:false,writable:false,configurable:false,value:function(){d.push(function(c){c.stroke()});f=e=0}}});return h};k={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Graphics]"}}}})();
(function(){var k,i,p,b=doodle.utils.rgb_str_to_hex,j=doodle.geom.Rectangle;doodle.Sprite=function(m){var l=Object.create(doodle.Node(typeof m==="string"?m:undefined));Object.defineProperties(l,k);Object.defineProperties(l,function(){var d=[],a={min_x:0,max_x:0,min_y:0,max_y:0};return{graphics:{enumerable:false,configurable:false,value:Object.create(doodle.Graphics(l,d,a))},width:function(){var h=0;return{enumerable:true,configurable:false,get:function(){return h},set:function(e){h=e}}}(),height:function(){var h=
0;return{enumerable:true,configurable:false,get:function(){return h},set:function(e){h=e}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(h){var e=j(),f=this.width,c=this.height,g=Math.min,o=Math.max,n=this.localToGlobal({x:a.min_x,y:a.min_y}),q=this.localToGlobal({x:a.min_x+f,y:a.min_y});f=this.localToGlobal({x:a.min_x+f,y:a.min_y+c});c=this.localToGlobal({x:a.min_x,y:a.min_y+c});n=h.globalToLocal(n);q=h.globalToLocal(q);f=h.globalToLocal(f);c=h.globalToLocal(c);e.left=
g(n.x,q.x,f.x,c.x);e.right=o(n.x,q.x,f.x,c.x);e.top=g(n.y,q.y,f.y,c.y);e.bottom=o(n.y,q.y,f.y,c.y);return e}},hitArea:function(){var h=null;return{enumerable:true,configurable:false,get:function(){return h===null?this.getBounds(this):h},set:function(e){h=e=e===false?null:e}}}(),hitTestObject:{enumerable:true,writable:true,configurable:false,value:function(h){return this.getBounds(this).intersects(h.getBounds(this))}},hitTestPoint:{enumerable:true,writable:true,configurable:false,value:function(h){return this.getBounds(this).containsPoint(this.globalToLocal(h))}},
context:{get:function(){for(var h=this.parent;h;){if(h.context)return h.context;h=h.parent}return null}},__draw:{enumerable:false,writable:false,configurable:false,value:function(h){d.forEach(function(e){e.call(l,h)})}},debug:{enumerable:true,configurable:false,value:Object.create(null,{boundingBox:function(){var h="rgb(0,0,255)";return{enumerable:true,configurable:false,get:function(){return b(h)},set:function(e){h=e}}}()})}}}());typeof m==="function"&&m.call(l);return l};k={rotation:function(){var m=
180/Math.PI,l=Math.PI/180;return{enumerable:true,configurable:false,get:function(){return this.transform.rotation*m},set:function(d){this.transform.rotation=d*l}}}(),toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Sprite]"}},compose:{enumerable:false,writable:false,configurable:false,value:function(m,l,d,a){this.x=m;this.y=l;this.width=d;this.height=a;return this}}};i=doodle.Sprite.isSprite=function(m){return m.toString()==="[object Sprite]"};p=doodle.Sprite.inheritsSprite=
function(m){for(;m;)if(i(m))return true;else{if(typeof m!=="object")return false;m=Object.getPrototypeOf(m)}return false};doodle.utils.types.check_sprite_type=function(m,l,d){if(p(m))return true;else{l=l===undefined?"check_sprite_type":l;d=d===undefined?"":"("+d+")";throw new TypeError(l+d+": Parameter must inherit from Sprite.");}}})();
(function(){var k,i=doodle.utils,p=i.rgb_str_to_hex,b=i.hex_to_rgb_str,j=i.get_element,m=i.get_element_property,l=i.set_element_property;doodle.ElementNode=function(d){var a=Object.create(doodle.Node());Object.defineProperties(a,k);Object.defineProperties(a,{element:function(){var h=null;return{configurable:true,get:function(){return h},set:function(e){if(e===null)h=null;else h=e=j(e)}}}()});if(typeof d==="function")d.call(a);else if(d!==undefined)a.element=d;return a};k={id:{get:function(){return m(this.element,
"id")},set:function(d){return l(this.element,"id",d,"html")}},width:{enumerable:true,configurable:true,get:function(){return m(this.element,"width","int")},set:function(d){l(this.element,"width",d+"px");return d}},height:{enumerable:true,configurable:true,get:function(){return m(this.element,"height","int")},set:function(d){l(this.element,"height",d+"px");return d}},backgroundColor:{get:function(){return p(m(this.element,"backgroundColor"))},set:function(d){if(typeof d==="number")d=b(d);return l(this.element,
"backgroundColor",d)}},backgroundImage:function(){var d=/^url\((.*)\)/;return{get:function(){var a=m(this.element,"backgroundImage");return(a=a==="none"?null:a.match(d))?a[1]:null},set:function(a){if(!a)return l(this.element,"backgroundImage",null);if(typeof a==="string"){if(a[0]==="#")a=j(a).src}else if(a&&a.tagName==="IMG")a=a.src;d.test(a)||(a="url("+encodeURI(a)+")");return l(this.element,"backgroundImage",a)}}}(),backgroundRepeat:{get:function(){return m(this.element,"backgroundRepeat")},set:function(d){return l(this.element,
"backgroundRepeat",d)}},alpha:{get:function(){return m(this.element,"opacity","float")},set:function(d){return l(this.element,"opacity",d)}},visible:{get:function(){switch(m(this.element,"visibility")){case "visible":return true;case "hidden":return false;default:throw new ReferenceError(this+".visible: Unable to determine visibility.");}},set:function(d){d?l(this.element,"visibility","visible"):l(this.element,"visibility","hidden");return d}},toString:{enumerable:false,writable:false,configurable:false,
value:function(){return"[object ElementNode]"}}}})();
(function(){var k,i=0,p=doodle.utils.get_element_property,b=doodle.utils.set_element_property;doodle.Layer=function(j,m){var l=arguments.length,d,a=Object.create(doodle.ElementNode());if(l===1&&typeof arguments[0]==="function"){d=arguments[0];j=undefined}else if(l>2)throw new SyntaxError("[object Layer]: Invalid number of parameters.");Object.defineProperties(a,k);Object.defineProperties(a,{element:{get:function(){return m},set:function(h){m=h}}});a.element=m||document.createElement("canvas");a.element.style.position=
"absolute";d&&d.call(a);if(!a.id){a.id=typeof j==="string"?j:"layer"+String("00"+i).slice(-2);i+=1}return a};(function(){var j=doodle.Layer.isLayer=function(l){return l.toString()==="[object Layer]"},m=doodle.Layer.inheritsLayer=function(l){for(;l;)if(j(l))return true;else{if(typeof l!=="object")return false;l=Object.getPrototypeOf(l)}return false};doodle.utils.types.check_layer_type=function(l,d,a){if(m(l))return true;else{d=d===undefined?"check_layer_type":d;a=a===undefined?"":"("+a+")";throw new TypeError(d+
a+": Parameter must be a Layer.");}}})();k={context:{get:function(){return this.element.getContext("2d")}},width:{get:function(){return p(this.element,"width","int")},set:function(j){b(this.element,"width",j,"html");return j}},height:{get:function(){return p(this.element,"height","int")},set:function(j){b(this.element,"height",j,"html");return j}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Layer]"}}}})();
(function(){var k,i=doodle.Layer.isLayer,p=doodle.utils.get_element,b=doodle.utils.get_element_property,j=doodle.utils.set_element_property,m=doodle.Sprite.inheritsSprite,l=doodle.Event,d=doodle.MouseEvent,a=l.ENTER_FRAME,h=l(a),e=doodle.EventDispatcher.dispatcher_queue;doodle.Display=function(f){function c(){g(r);e.forEach(function(y){if(y.hasEventListener(a)){h.__setTarget(y);y.handleEvent(h)}});o(r);t+=1;x&&x.update()}function g(){r.children.forEach(function(y){var z=y.context;z.save();z.setTransform(1,
0,0,1,0,0);z.clearRect(0,0,y.width,y.height);z.restore()})}function o(y,z){var D;y.children.forEach(function(F){if(F.visible){z=z||F.context;D=F.transform.toArray();z.save();z.transform(D[0],D[1],D[2],D[3],D[4],D[5]);if(B){var I=z;if(typeof F.getBounds==="function"){var G=F.getBounds(r);I.save();I.setTransform(1,0,0,1,0,0);I.lineWidth=0.5;I.strokeStyle=F.debug.boundingBox;I.strokeRect(G.x,G.y,G.width,G.height);I.restore()}}if(!i(F))if(F.alpha!==1)z.globalAlpha=F.alpha;typeof F.__draw==="function"&&
F.__draw(z);o(F,z);z.restore()}})}function n(){g(r);o(r)}function q(y){var z=doodle.EventDispatcher.dispatcher_queue,D=d.MOUSE_OVER,F=d.MOUSE_OUT,I=d.MOUSE_MOVE,G=d(y),K=G.type,J=false;z.forEach(function(H){if(m(H)){var C=H.getBounds(r).containsPoint({x:G.offsetX,y:G.offsetY});G.__setTarget(null);if(C&&H.hasEventListener(K)){H.dispatchEvent(G);J=true}if(C&&H.hasEventListener(D))if(!H.__mouse_over){H.__mouse_over=true;G.__setType(D);H.dispatchEvent(G);J=true}if(!C&&H.hasEventListener(F))if(H.__mouse_over){H.__mouse_over=
false;G.__setType(F);H.dispatchEvent(G);J=true}}else if(H.hasEventListener(K)){G.__setTarget(null);H.dispatchEvent(G);J=true}});z.forEach(function(H){if(H===r&&!J&&H.hasEventListener(I)){K===I&&G.__setType(I);G.__setTarget(null);H.dispatchEvent(G);J=true}})}function v(y){var z=doodle.EventDispatcher.dispatcher_queue,D=doodle.KeyboardEvent(y);z.forEach(function(F){F.hasEventListener(D.type)&&F.handleEvent(D)})}var s=arguments.length,u,r=Object.create(doodle.ElementNode()),t=0,A=0,w=0,x=null,B=false;
if(s===1&&typeof arguments[0]==="function"){u=arguments[0];f=undefined}else if(s>1)throw new SyntaxError("[object Display]: Invalid number of parameters.");Object.defineProperties(r,k);Object.defineProperties(r,{element:{get:function(){return f},set:function(y){var z=p(y,"[object Display]"),D;f=z;f.style.position="relative";this.root=this;y=z.getAttribute("width");z=z.getAttribute("height");if(y)this.width=parseInt(y);if(z)this.height=parseInt(z);for(D in d)f.addEventListener(d[D],q,false);f.addEventListener(d.MOUSE_MOVE,
function(F){A=F.offsetX;w=F.offsetY},false);document.addEventListener(doodle.KeyboardEvent.KEY_PRESS,v,false);document.addEventListener(doodle.KeyboardEvent.KEY_DOWN,v,false);document.addEventListener(doodle.KeyboardEvent.KEY_UP,v,false)}},frameRate:function(){var y=false,z;return{get:function(){return y},set:function(D){if(D===0||D===false){y=false;clearInterval(z)}else if(typeof D==="number"&&isFinite(1E3/D)){y=D;clearInterval(z);z=setInterval(c,1E3/y)}else throw new TypeError("[object Display].frameRate: Parameter must be a valid number or false.");
}}}(),mouseX:{enumerable:false,configurable:false,get:function(){return A}},mouseY:{enumerable:false,configurable:false,get:function(){return w}},debug:{enumerable:true,configurable:false,value:Object.create(null,{stats:{enumerable:true,configurable:false,get:function(){return x?true:false},set:function(y){if(y&&!x){x=new Stats;r.element.appendChild(x.domElement)}else if(!y&&x){r.element.removeChild(x.domElement);x=null}}},boundingBox:{enumerable:true,configurable:false,get:function(){return B},set:function(y){B=
y}}})}});if(u)u.call(r);else r.element=f;if(!r.element)throw new ReferenceError("[object Display]: Requires a HTML element.");r.addEventListener(l.ADDED,n);r.addEventListener(l.REMOVED,n);n();return r};k={width:{get:function(){return b(this.element,"width","int")},set:function(f){j(this.element,"width",f+"px");this.children.forEach(function(c){c.width=f});return f}},height:{get:function(){return b(this.element,"height","int")},set:function(f){j(this.element,"height",f+"px");this.children.forEach(function(c){c.height=
f});return f}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Display]"}},toDataUrl:{value:function(){}},addChildAt:{value:function(f,c){f.parent!==null&&f.parent!==this&&f.parent.removeChild(node);f.root=this;f.parent=this;f.width=this.width;f.height=this.height;this.children.splice(c,0,f);this.element.appendChild(f.element);return this}},removeChildAt:{enumerable:false,writable:false,configurable:false,value:function(f){var c=this.children[f];c.root=
null;c.parent=null;this.children.splice(f,1);this.element.removeChild(c.element)}},swapChildrenAt:{enumerable:false,writable:false,configurable:false,value:function(f,c){var g=this.children;g[f]=g.splice(c,1,g[f])[0];f>c?this.element.insertBefore(g[c].element,g[f].element):this.element.insertBefore(g[f].element,g[c].element)}},addLayer:{value:function(f){f=doodle.Layer(f);this.addChild(f);return f}},removeLayer:{value:function(f){this.removeChildById(f)}}}})();
