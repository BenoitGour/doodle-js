var doodle={};doodle.geom={};if(typeof Function.prototype.bind!=="function")Function.prototype.bind=function(m){var l=this;return function(){return l.apply(m,arguments)}};
doodle.utils={rgb_to_hex:function(m,l,e){m=(e|l<<8|m<<16).toString(16);return"#"+String("000000"+m).slice(-6)},rgb_str_to_hex:function(m){var l=doodle.utils;m=l.rgb_str_to_rgb(m);return l.rgb_to_hex(parseInt(m[0],10),parseInt(m[1],10),parseInt(m[2],10))},rgb_to_rgb_str:function(m,l,e,a){a=a===undefined?1:a;a=a<0?0:a>1?1:a;return a===1?"rgb("+m+","+l+","+e+")":"rgba("+m+","+l+","+e+","+a+")"},rgb_str_to_rgb:function(){var m=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?(.*)\)$/;return function(l){l=
l.trim().match(m);var e=[parseInt(l[1],10),parseInt(l[2],10),parseInt(l[3],10)];l=parseFloat(l[4]);typeof l==="number"&&!isNaN(l)&&e.push(l);return e}}(),hex_to_rgb:function(m){if(typeof m==="string"){m=m[0]==="#"?m.slice(1):m;m=parseInt(m,16)}return[m>>16&255,m>>8&255,m&255]},hex_to_rgb_str:function(m,l){var e=doodle.utils;l=l===undefined?1:l;m=e.hex_to_rgb(m);return e.rgb_to_rgb_str(m[0],m[1],m[2],l)}};
doodle.utils.types=function(){function m(l,e,a){if(typeof l!=="string")throw new TypeError("throw_type_error: type must be a string.");e=e===undefined?"throw_type_error":e;a=a===undefined?"":"("+a+")";throw new TypeError(e+a+": Parameter must be a "+l+".");}return{check_number_type:function(l,e,a){return typeof l==="number"?true:m("number",e||"check_number_type",a)},check_boolean_type:function(l,e,a){return typeof l==="boolean"?true:m("boolean",e||"check_boolean_type",a)},check_string_type:function(l,
e,a){return typeof l==="string"?true:m("string",e||"check_string_type",a)},check_function_type:function(l,e,a){return typeof l==="function"?true:m("function",e||"check_function_type",a)},check_array_type:function(l,e,a){return Array.isArray(l)?true:m("array",e||"check_array_type",a)},check_event_type:function(l,e,a){if(l&&(l.toString()==="[object Event]"||l.toString()==="[object UIEvent]"||l.toString()==="[object MouseEvent]"||l.toString()==="[object KeyboardEvent]"||l.toString()==="[object TextEvent]"))return true;
else m("event",e||"check_event_type",a)},check_canvas_type:function(l,e,a){return l&&l.toString()==="[object HTMLCanvasElement]"?true:m("canvas element",e||"check_canvas_type",a)},check_context_type:function(l,e,a){return l&&l.toString()==="[object CanvasRenderingContext2D]"?true:m("canvas context",e||"check_context_type",a)},check_block_element:function(l,e,a){try{return doodle.utils.get_style_property(l,"display")==="block"?true:m("HTML block element",e||"check_block_type",a)}catch(c){m("HTML block element",
e||"check_block_type",a)}}}}();doodle.utils.get_element=function(m,l){var e;if(typeof m==="string"){m=m[0]==="#"?m.slice(1):m;e=document.getElementById(m)}else e=m;if(!e){l=l===undefined?"get_element":l;throw new ReferenceError(l+": Unable to get HTML element: "+m);}return e};
doodle.utils.get_style_property=function(m,l){try{if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(m,null)[l];else if(m.currentStyle)return m.currentStyle[l];else if(m.style)return m.style[l];else throw new ReferenceError("get_style_property: Cannot read property '"+l+"' of "+m+".");}catch(e){throw new ReferenceError("get_style_property: Cannot read property '"+l+"' of "+m+".");}};
doodle.utils.get_element_property=function(m,l,e){try{var a=doodle.utils.get_style_property(m,l)}catch(c){a=undefined}if(a===undefined||a===null)a=m.getAttribute(l);if(e!==undefined)switch(e){case "int":a=parseInt(a,10);a=isNaN(a)?null:a;break;case "float":a=parseFloat(a);a=isNaN(a)?null:a;break;default:break}return a};
doodle.utils.set_element_property=function(m,l,e,a){a=a===undefined?"css":a;switch(a){case "css":m.style[l]=e;break;case "html":m.setAttribute(l,e);break;default:throw new SyntaxError("set_element_property: type must be 'css' property or 'html' attribute.");}return e};
var Stats=function(){function m(n,p){var s,v,w;for(v=0;v<30;v++)for(s=0;s<73;s++){w=(s+v*74)*4;n[w]=n[w+4];n[w+1]=n[w+5];n[w+2]=n[w+6]}for(v=0;v<30;v++){w=(73+v*74)*4;if(v<p){n[w]=16;n[w+1]=16;n[w+2]=48}else{n[w]=0;n[w+1]=255;n[w+2]=255}}}var l,e="fps",a=0,c=(new Date).getTime(),d=c,g=c,f=0,b=1E3,o=0,j,i,u,q,t=0,y=1E3,z=0,A,r,h,k;l=document.createElement("div");l.style.fontFamily="Helvetica, Arial, sans-serif";l.style.fontSize="9px";l.style.backgroundColor="#000020";l.style.opacity="0.9";l.style.width=
"80px";l.style.paddingTop="2px";l.style.cursor="pointer";l.addEventListener("click",function(){switch(e){case "fps":e="ms";j.style.display="none";i.style.display="none";A.style.display="block";r.style.display="block";break;case "ms":e="fps";j.style.display="block";i.style.display="block";A.style.display="none";r.style.display="none";break}},false);j=document.createElement("div");j.innerHTML="<strong>FPS</strong>";j.style.color="#00ffff";j.style.marginLeft="3px";j.style.marginBottom="3px";l.appendChild(j);
i=document.createElement("canvas");i.width=74;i.height=30;i.style.display="block";i.style.marginLeft="3px";i.style.marginBottom="3px";l.appendChild(i);u=i.getContext("2d");u.fillStyle="#101030";u.fillRect(0,0,i.width,i.height);q=u.getImageData(0,0,i.width,i.height);A=document.createElement("div");A.innerHTML="<strong>MS</strong>";A.style.color="#00ffff";A.style.marginLeft="3px";A.style.marginBottom="3px";A.style.display="none";l.appendChild(A);r=document.createElement("canvas");r.width=74;r.height=
30;r.style.display="block";r.style.marginLeft="3px";r.style.marginBottom="3px";r.style.display="none";l.appendChild(r);h=r.getContext("2d");h.fillStyle="#101030";h.fillRect(0,0,r.width,r.height);k=h.getImageData(0,0,r.width,r.height);return{domElement:l,update:function(){a++;c=(new Date).getTime();t=c-d;y=Math.min(y,t);z=Math.max(z,t);m(k.data,Math.min(30,30-t/200*30));A.innerHTML="<strong>"+t+" MS</strong> ("+y+"-"+z+")";h.putImageData(k,0,0);d=c;if(c>g+1E3){f=Math.round(a*1E3/(c-g));b=Math.min(b,
f);o=Math.max(o,f);m(q.data,Math.min(30,30-f/100*30));j.innerHTML="<strong>"+f+" FPS</strong> ("+b+"-"+o+")";u.putImageData(q,0,0);g=c;a=0}}}};
Object.defineProperty(doodle,"Keyboard",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BACKSPACE:{enumerable:true,writable:false,configurable:false,value:8},TAB:{enumerable:true,writable:false,configurable:false,value:9},ENTER:{enumerable:true,writable:false,configurable:false,value:13},COMMAND:{enumerable:true,writable:false,configurable:false,value:15},SHIFT:{enumerable:true,writable:false,configurable:false,value:16},CONTROL:{enumerable:true,writable:false,configurable:false,
value:17},ALTERNATE:{enumerable:true,writable:false,configurable:false,value:18},PAUSE:{enumerable:true,writable:false,configurable:false,value:19},CAPS_LOCK:{enumerable:true,writable:false,configurable:false,value:20},NUMPAD:{enumerable:true,writable:false,configurable:false,value:21},ESCAPE:{enumerable:true,writable:false,configurable:false,value:27},SPACE:{enumerable:true,writable:false,configurable:false,value:32},PAGE_UP:{enumerable:true,writable:false,configurable:false,value:33},PAGE_DOWN:{enumerable:true,
writable:false,configurable:false,value:34},END:{enumerable:true,writable:false,configurable:false,value:35},HOME:{enumerable:true,writable:false,configurable:false,value:36},LEFT:{enumerable:true,writable:false,configurable:false,value:37},UP:{enumerable:true,writable:false,configurable:false,value:38},RIGHT:{enumerable:true,writable:false,configurable:false,value:39},DOWN:{enumerable:true,writable:false,configurable:false,value:40},INSERT:{enumerable:true,writable:false,configurable:false,value:45},
DELETE:{enumerable:true,writable:false,configurable:false,value:46},NUMBER_0:{enumerable:true,writable:false,configurable:false,value:48},NUMBER_1:{enumerable:true,writable:false,configurable:false,value:49},NUMBER_2:{enumerable:true,writable:false,configurable:false,value:50},NUMBER_3:{enumerable:true,writable:false,configurable:false,value:51},NUMBER_4:{enumerable:true,writable:false,configurable:false,value:52},NUMBER_5:{enumerable:true,writable:false,configurable:false,value:53},NUMBER_6:{enumerable:true,
writable:false,configurable:false,value:54},NUMBER_7:{enumerable:true,writable:false,configurable:false,value:55},NUMBER_8:{enumerable:true,writable:false,configurable:false,value:56},NUMBER_9:{enumerable:true,writable:false,configurable:false,value:57},A:{enumerable:true,writable:false,configurable:false,value:65},B:{enumerable:true,writable:false,configurable:false,value:66},C:{enumerable:true,writable:false,configurable:false,value:67},D:{enumerable:true,writable:false,configurable:false,value:68},
E:{enumerable:true,writable:false,configurable:false,value:69},F:{enumerable:true,writable:false,configurable:false,value:70},G:{enumerable:true,writable:false,configurable:false,value:71},H:{enumerable:true,writable:false,configurable:false,value:72},I:{enumerable:true,writable:false,configurable:false,value:73},J:{enumerable:true,writable:false,configurable:false,value:74},K:{enumerable:true,writable:false,configurable:false,value:75},L:{enumerable:true,writable:false,configurable:false,value:76},
M:{enumerable:true,writable:false,configurable:false,value:77},N:{enumerable:true,writable:false,configurable:false,value:78},O:{enumerable:true,writable:false,configurable:false,value:79},P:{enumerable:true,writable:false,configurable:false,value:80},Q:{enumerable:true,writable:false,configurable:false,value:81},R:{enumerable:true,writable:false,configurable:false,value:82},S:{enumerable:true,writable:false,configurable:false,value:83},T:{enumerable:true,writable:false,configurable:false,value:84},
U:{enumerable:true,writable:false,configurable:false,value:85},V:{enumerable:true,writable:false,configurable:false,value:86},W:{enumerable:true,writable:false,configurable:false,value:87},X:{enumerable:true,writable:false,configurable:false,value:88},Y:{enumerable:true,writable:false,configurable:false,value:89},Z:{enumerable:true,writable:false,configurable:false,value:90},WINDOWS_KEY:{enumerable:true,writable:false,configurable:false,value:91},NUMPAD_0:{enumerable:true,writable:false,configurable:false,
value:96},NUMPAD_1:{enumerable:true,writable:false,configurable:false,value:97},NUMPAD_2:{enumerable:true,writable:false,configurable:false,value:98},NUMPAD_3:{enumerable:true,writable:false,configurable:false,value:99},NUMPAD_4:{enumerable:true,writable:false,configurable:false,value:100},NUMPAD_5:{enumerable:true,writable:false,configurable:false,value:101},NUMPAD_6:{enumerable:true,writable:false,configurable:false,value:102},NUMPAD_7:{enumerable:true,writable:false,configurable:false,value:103},
NUMPAD_8:{enumerable:true,writable:false,configurable:false,value:104},NUMPAD_9:{enumerable:true,writable:false,configurable:false,value:105},NUMPAD_MULTIPLY:{enumerable:true,writable:false,configurable:false,value:106},NUMPAD_ADD:{enumerable:true,writable:false,configurable:false,value:107},NUMPAD_ENTER:{enumerable:true,writable:false,configurable:false,value:108},NUMPAD_SUBTRACT:{enumerable:true,writable:false,configurable:false,value:109},NUMPAD_DECIMAL:{enumerable:true,writable:false,configurable:false,
value:110},NUMPAD_DIVIDE:{enumerable:true,writable:false,configurable:false,value:111},F1:{enumerable:true,writable:false,configurable:false,value:112},F2:{enumerable:true,writable:false,configurable:false,value:113},F3:{enumerable:true,writable:false,configurable:false,value:114},F4:{enumerable:true,writable:false,configurable:false,value:115},F5:{enumerable:true,writable:false,configurable:false,value:116},F6:{enumerable:true,writable:false,configurable:false,value:117},F7:{enumerable:true,writable:false,
configurable:false,value:118},F8:{enumerable:true,writable:false,configurable:false,value:119},F9:{enumerable:true,writable:false,configurable:false,value:120},F10:{enumerable:true,writable:false,configurable:false,value:121},F11:{enumerable:true,writable:false,configurable:false,value:122},F12:{enumerable:true,writable:false,configurable:false,value:123},F13:{enumerable:true,writable:false,configurable:false,value:124},F14:{enumerable:true,writable:false,configurable:false,value:125},F15:{enumerable:true,
writable:false,configurable:false,value:126},SCROLL:{enumerable:true,writable:false,configurable:false,value:145},SEMICOLON:{enumerable:true,writable:false,configurable:false,value:186},EQUAL:{enumerable:true,writable:false,configurable:false,value:187},COMMA:{enumerable:true,writable:false,configurable:false,value:188},MINUS:{enumerable:true,writable:false,configurable:false,value:189},PERIOD:{enumerable:true,writable:false,configurable:false,value:190},SLASH:{enumerable:true,writable:false,configurable:false,
value:191},BACKQUOTE:{enumerable:true,writable:false,configurable:false,value:192},LEFTBRACKET:{enumerable:true,writable:false,configurable:false,value:219},BACKSLASH:{enumerable:true,writable:false,configurable:false,value:220},RIGHTBRACKET:{enumerable:true,writable:false,configurable:false,value:221},QUOTE:{enumerable:true,writable:false,configurable:false,value:222}})});
Object.defineProperty(doodle,"GradientType",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{LINEAR:{enumerable:true,writable:false,configurable:false,value:"linearGradient"},RADIAL:{enumerable:true,writable:false,configurable:false,value:"radialGradient"}})});
Object.defineProperty(doodle,"Pattern",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{REPEAT:{enumerable:true,writable:false,configurable:false,value:"repeat"},REPEAT_X:{enumerable:true,writable:false,configurable:false,value:"repeat-x"},REPEAT_Y:{enumerable:true,writable:false,configurable:false,value:"repeat-y"},NO_REPEAT:{enumerable:true,writable:false,configurable:false,value:"no-repeat"}})});
Object.defineProperty(doodle,"LineCap",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BUTT:{enumerable:true,writable:false,configurable:false,value:"butt"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},SQUARE:{enumerable:true,writable:false,configurable:false,value:"square"}})});
Object.defineProperty(doodle,"LineJoin",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{MITER:{enumerable:true,writable:false,configurable:false,value:"miter"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},BEVEL:{enumerable:true,writable:false,configurable:false,value:"bevel"}})});
(function(){var m={},l,e;doodle.Event=function(a,c,d){var g=arguments.length,f=Object.create(m),b=false,o=false,j=false,i=false,u=0,q=null,t=null,y=new Date,z=null,A=true;if(g===1&&e(arguments[0])){g=arguments[0];a=g.type;c=g.bubbles;d=g.cancelable;j=g.cancelBubble;i=g.defaultPrevented;u=g.eventPhase;q=g.target;t=g.currentTarget;y=g.timeStamp;z=g.srcElement;A=g.returnValue;if(g.__cancel)b=g.__cancel;if(g.__cancelNow)o=g.__cancelNow}else if(g===0||g>3)throw new SyntaxError("[object Event]: Invalid number of parameters.");
Object.defineProperties(f,l);Object.defineProperties(f,{bubbles:{enumerable:true,configurable:false,get:function(){return c}},cancelBubble:{enumerable:true,configurable:false,get:function(){return j},set:function(r){j=r}},cancelable:{enumerable:true,configurable:false,get:function(){return d}},__cancel:{enumerable:false,configurable:false,get:function(){return b}},__cancelNow:{enumerable:false,configurable:false,get:function(){return o}},currentTarget:{enumerable:true,configurable:false,get:function(){return t}},
__setCurrentTarget:{enumerable:false,value:function(r){t=r}},target:{enumerable:true,configurable:false,get:function(){return q}},__setTarget:{enumerable:false,value:function(r){q=r}},eventPhase:{enumerable:true,configurable:false,get:function(){return u}},__setEventPhase:{enumerable:false,value:function(r){u=r}},srcElement:{enumerable:true,configurable:false,get:function(){return z}},timeStamp:{enumerable:true,configurable:false,get:function(){return y}},type:{enumerable:true,configurable:false,
get:function(){return a}},__setType:{enumerable:false,value:function(r){a=r}},returnValue:{enumerable:true,configurable:false,get:function(){return A}},initEvent:{enumerable:true,configurable:false,value:function(r,h,k){h=h===true;k=k===true;a=r;c=h;d=k;return this}},preventDefault:{enumerable:true,configurable:false,value:function(){i=true}},stopPropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)b=true;else throw Error(this+".stopPropagation: Event can not be cancelled.");
}},stopImmediatePropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)o=b=true;else throw Error(this+".stopImmediatePropagation: Event can not be cancelled.");}}});f.initEvent(a,c,d);return f};(function(){var a=Object.getPrototypeOf(document.createEvent("Event"));for(var c in a)if(typeof a[c]!=="function")m[c]=a[c];l={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Event]"}}}})();e=doodle.Event.isEvent=function(a){if(typeof a!==
"object")return false;else a=a.toString();return a==="[object Event]"||a==="[object UIEvent]"||a==="[object MouseEvent]"||a==="[object KeyboardEvent]"||a==="[object TextEvent]"||a==="[object WheelEvent]"}})();
(function(){var m,l=doodle.Event.isEvent;doodle.UIEvent=function(e,a,c,d,g){var f=arguments.length,b=0,o=0,j=0,i=0,u=0,q=0,t=0;if(f===1&&l(arguments[0])){f=arguments[0];e=f.type;a=f.bubbles;c=f.cancelable;d=f.view;g=f.detail;b=f.which||0;o=f.charCode||0;j=f.keyCode||0;i=f.layerX||0;u=f.layerY||0;q=f.pageX||0;t=f.pageY||0;f=Object.create(doodle.Event(f))}else if(f===0||f>5)throw new SyntaxError("[object UIEvent]: Invalid number of parameters.");else{a=a===true;c=c===true;f=Object.create(doodle.Event(e,
a,c))}Object.defineProperties(f,m);Object.defineProperties(f,{view:{enumerable:true,configurable:false,get:function(){return d}},detail:{enumerable:true,configurable:false,get:function(){return g}},which:{enumerable:true,configurable:false,get:function(){return b}},charCode:{enumerable:true,configurable:false,get:function(){return o}},keyCode:{enumerable:true,configurable:false,get:function(){return j}},layerX:{enumerable:true,configurable:false,get:function(){return i}},layerY:{enumerable:true,configurable:false,
get:function(){return u}},pageX:{enumerable:true,configurable:false,get:function(){return q}},pageY:{enumerable:true,configurable:false,get:function(){return t}},initUIEvent:{value:function(y,z,A,r,h){e=y;a=z===true;c=A===true;d=r===undefined?null:r;g=h===undefined?0:h;this.initEvent(e,a,c);return this}}});f.initUIEvent(e,a,c,d,g);return f};m={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object UIEvent]"}}}})();
(function(){var m,l=doodle.Event.isEvent,e=doodle.utils.types.check_string_type;doodle.MouseEvent=function(a,c,d,g,f,b,o,j,i,u,q,t,y,z,A){var r=arguments.length,h=0,k=0,n=0,p=0;if(r===1&&l(arguments[0])){r=arguments[0];a=r.type;c=r.bubbles;d=r.cancelable;g=r.view;f=r.detail;b=r.screenX;o=r.screenY;j=r.clientX;i=r.clientY;u=r.ctrlKey;q=r.altKey;t=r.shiftKey;y=r.metaKey;z=r.button;A=r.relatedTarget;h=r.x||0;k=r.y||0;n=r.offsetX||0;p=r.offsetY||0;r=Object.create(doodle.UIEvent(r))}else if(r===0||r>15)throw new SyntaxError("[object MouseEvent]: Invalid number of parameters.");
else{c=c===true;d=d===true;g=g===undefined?null:g;f=f===undefined?0:f;r=Object.create(doodle.UIEvent(a,c,d,g,f))}Object.defineProperties(r,m);Object.defineProperties(r,{x:{enumerable:true,configurable:false,get:function(){return h}},y:{enumerable:true,configurable:false,get:function(){return k}},screenX:{enumerable:true,configurable:false,get:function(){return b}},screenY:{enumerable:true,configurable:false,get:function(){return o}},clientX:{enumerable:true,configurable:false,get:function(){return j}},
clientY:{enumerable:true,configurable:false,get:function(){return i}},offsetX:{enumerable:true,configurable:false,get:function(){return n}},offsetY:{enumerable:true,configurable:false,get:function(){return p}},ctrlKey:{enumerable:true,configurable:false,get:function(){return u}},altKey:{enumerable:true,configurable:false,get:function(){return q}},shiftKey:{enumerable:true,configurable:false,get:function(){return t}},metaKey:{enumerable:true,configurable:false,get:function(){return y}},button:{enumerable:true,
configurable:false,get:function(){return z}},relatedTarget:{enumerable:true,configurable:false,get:function(){return A}},initMouseEvent:{value:function(s,v,w,D,x,B,E,F,C,H,G,I,J,K,L){c=v===true;d=w===true;g=D===undefined?null:D;f=x===undefined?0:x;b=B===undefined?0:B;o=E===undefined?0:E;j=F===undefined?0:F;i=C===undefined?0:C;u=H===true;q=G===true;t=I===true;y=J===true;z=K===undefined?0:K;A=L===undefined?null:L;this.initUIEvent(a,c,d,g,f);return this}},getModifierState:{value:function(s){e(s,this+
".getModifierState");switch(s){case "Alt":return q;case "Control":return u;case "Meta":return y;case "Shift":return t;default:return false}}}});r.initMouseEvent(a,c,d,g,f,b,o,j,i,u,q,t,y,z,A);return r};m={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object MouseEvent]"}}}})();
(function(){var m,l=doodle.Event.isEvent;doodle.TextEvent=function(e,a,c,d,g,f){var b=arguments.length;if(b===1&&l(arguments[0])){b=arguments[0];e=b.type;a=b.bubbles;c=b.cancelable;d=b.view;g=b.data;f=b.inputMode;b=Object.create(doodle.UIEvent(b))}else if(b===0||b>6)throw new SyntaxError("[object TextEvent]: Invalid number of parameters.");else{a=a===true;c=c===true;d=viewArg===undefined?null:d;b=Object.create(doodle.UIEvent(e,a,c,d))}Object.defineProperties(b,m);Object.defineProperties(b,{data:{enumerable:true,
configurable:false,get:function(){return g}},inputMode:{enumerable:true,configurable:false,get:function(){return f}},initTextEvent:{value:function(o,j,i,u,q,t){e=o;a=j===true;c=i===true;d=u===undefined?null:u;g=q===undefined?"":q;f=t===undefined?doodle.TextEvent.INPUT_METHOD_UNKNOWN:t;this.initUIEvent(e,a,c,d);return this}}});b.initTextEvent(e,a,c,d,g,f);return b};m={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TextEvent]"}}}})();
(function(){var m,l=doodle.Event.isEvent,e=doodle.utils.types.check_string_type;doodle.KeyboardEvent=function(a,c,d,g,f,b,o,j){var i=arguments.length,u=false,q=false,t=false,y=false;if(i===1&&l(arguments[0])){i=arguments[0];a=i.type;c=i.bubbles;d=i.cancelable;g=i.view;f=i.keyIdentifier;b=i.keyLocation;j=i.repeat;u=i.ctrlKey||false;q=i.shiftKey||false;t=i.altKey||false;y=i.metaKey||false;i=Object.create(doodle.UIEvent(i))}else if(i===0||i>8)throw new SyntaxError("[object KeyboardEvent]: Invalid number of parameters.");
else{c=c===true;d=d===true;g=g===undefined?null:g;i=Object.create(doodle.UIEvent(a,c,d,g))}Object.defineProperties(i,m);Object.defineProperties(i,{keyIdentifier:{enumerable:true,configurable:false,get:function(){return f}},keyLocation:{enumerable:true,configurable:false,get:function(){return b}},repeat:{enumerable:true,configurable:false,get:function(){return j}},altKey:{enumerable:true,configurable:false,get:function(){return t}},ctrlKey:{enumerable:true,configurable:false,get:function(){return u}},
metaKey:{enumerable:true,configurable:false,get:function(){return y}},shiftKey:{enumerable:true,configurable:false,get:function(){return q}},initKeyboardEvent:{value:function(z,A,r,h,k,n,p,s){a=z;c=A===true;d=r===true;g=h===undefined?null:h;f=k===undefined?"":k;b=n===undefined?0:n;o=p===undefined?"":p;j=s===true;o.split(" ").forEach(function(v){switch(v){case "Alt":t=true;break;case "Control":u=true;break;case "Meta":y=true;break;case "Shift":q=true;break}});this.initUIEvent(a,c,d,g);return this}},
getModifierState:{value:function(z){e(z,this+".getModifierState");switch(z){case "Alt":return t;case "Control":return u;case "Meta":return y;case "Shift":return q;default:return false}}}});i.initKeyboardEvent(a,c,d,g,f,b,o,j);return i};m={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object KeyboardEvent]"}}}})();
Object.defineProperties(doodle.Event,{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},ADDED:{enumerable:true,writable:false,configurable:false,value:"added"},REMOVED:{enumerable:true,writable:false,configurable:false,value:"removed"},ENTER_FRAME:{enumerable:true,writable:false,configurable:false,value:"enterFrame"},LOAD:{enumerable:true,
writable:false,configurable:false,value:"load"},CHANGE:{enumerable:true,writable:false,configurable:false,value:"change"}});Object.defineProperties(doodle.UIEvent,{FOCUS_IN:{enumerable:true,writable:false,configurable:false,value:"focusIn"}});
Object.defineProperties(doodle.MouseEvent,{CLICK:{enumerable:true,writable:false,configurable:false,value:"click"},DOUBLE_CLICK:{enumerable:true,writable:false,configurable:false,value:"dblclick"},CONTEXT_MENU:{enumerable:true,writable:false,configurable:false,value:"contextmenu"},MOUSE_DOWN:{enumerable:true,writable:false,configurable:false,value:"mousedown"},MOUSE_UP:{enumerable:true,writable:false,configurable:false,value:"mouseup"},MOUSE_WHEEL:{enumerable:true,writable:false,configurable:false,
value:"mousewheel"},MOUSE_MOVE:{enumerable:true,writable:false,configurable:false,value:"mousemove"},MOUSE_OUT:{enumerable:true,writable:false,configurable:false,value:"mouseout"},MOUSE_OVER:{enumerable:true,writable:false,configurable:false,value:"mouseover"},MOUSE_ENTER:{enumerable:true,writable:false,configurable:false,value:"mouseenter"},MOUSE_LEAVE:{enumerable:true,writable:false,configurable:false,value:"mouseleave"}});
Object.defineProperties(doodle.KeyboardEvent,{KEY_PRESS:{enumerable:true,writable:false,configurable:false,value:"keypress"},KEY_UP:{enumerable:true,writable:false,configurable:false,value:"keyup"},KEY_DOWN:{enumerable:true,writable:false,configurable:false,value:"keydown"},KEY_LOCATION_STANDARD:{enumerable:true,writable:false,configurable:false,value:0},KEY_LOCATION_LEFT:{enumerable:true,writable:false,configurable:false,value:1},KEY_LOCATION_RIGHT:{enumerable:true,writable:false,configurable:false,
value:2},KEY_LOCATION_NUMPAD:{enumerable:true,writable:false,configurable:false,value:3},KEY_LOCATION_MOBILE:{enumerable:true,writable:false,configurable:false,value:4},KEY_LOCATION_JOYSTICK:{enumerable:true,writable:false,configurable:false,value:5}});
Object.defineProperties(doodle.TextEvent,{TEXT_INPUT:{enumerable:true,writable:false,configurable:false,value:"textInput"},INPUT_METHOD_UNKNOWN:{enumerable:true,writable:false,configurable:false,value:0},INPUT_METHOD_KEYBOARD:{enumerable:true,writable:false,configurable:false,value:1},INPUT_METHOD_PASTE:{enumerable:true,writable:false,configurable:false,value:2},INPUT_METHOD_DROP:{enumerable:true,writable:false,configurable:false,value:3},INPUT_METHOD_IME:{enumerable:true,writable:false,configurable:false,
value:4},INPUT_METHOD_OPTION:{enumerable:true,writable:false,configurable:false,value:5},INPUT_METHOD_HANDWRITING:{enumerable:true,writable:false,configurable:false,value:6},INPUT_METHOD_VOICE:{enumerable:true,writable:false,configurable:false,value:7},INPUT_METHOD_MULTIMODAL:{enumerable:true,writable:false,configurable:false,value:8},INPUT_METHOD_SCRIPT:{enumerable:true,writable:false,configurable:false,value:9}});
(function(){var m,l;doodle.geom.Point=function(e,a){var c=arguments.length,d,g={};if(c===1&&typeof arguments[0]==="function"){d=arguments[0];e=undefined}else if(c>2)throw new SyntaxError("[object Point]: Invalid number of parameters.");Object.defineProperties(g,m);Object.defineProperties(g,{x:{enumerable:true,configurable:false,get:function(){return e},set:function(f){e=f}},y:{enumerable:true,configurable:false,get:function(){return a},set:function(f){a=f}}});if(d)if(typeof d==="function"){g.compose(0,
0);d.call(g)}else if(Array.isArray(d)&&d.length===2)g.compose.apply(g,d);else if(l(d))g.compose(d.x,d.y);else throw new SyntaxError(this+": Passed an invalid initializer object.");else switch(c){case 0:g.compose(0,0);break;case 2:g.compose(e,a);break;default:throw new SyntaxError(this+": Invalid number of parameters.");}return g};l=doodle.geom.Point.isPoint=function(e){return e&&typeof e.x==="number"&&typeof e.y==="number"};doodle.utils.types.check_point_type=function(e,a,c){if(l(e))return true;else{a=
a===undefined?"check_point_type":a;c=c===undefined?"":"("+c+")";throw new TypeError(a+c+": Parameter must be a point.");}};(function(){var e=doodle.geom.Point;m={length:{enumerable:true,configurable:false,get:function(){return this.distance({x:0,y:0},this)}},compose:{enumerable:false,writable:false,configurable:false,value:function(a,c){this.x=a;this.y=c;return this}},clone:{enumerable:false,writable:false,configurable:false,value:function(){return e(this.x,this.y)}},toArray:{enumerable:false,writable:false,
configurable:false,value:function(){var a=Array(2);a[0]=this.x;a[1]=this.y;return a}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+")"}},distance:{enumerable:false,writable:false,configurable:false,value:function(a,c){var d=c.x-a.x,g=c.y-a.x;return Math.sqrt(d*d+g*g)}},normalize:{enumerable:false,writable:false,configurable:false,value:function(a){var c=this.length;this.x=this.x/c*a;this.y=this.y/c*a;return this}},equals:{enumerable:false,
writable:false,configurable:false,value:function(a){return this&&point&&this.x===a.x&&this.y===a.y||!this&&!a}},interpolate:{enumerable:false,writable:false,configurable:false,value:function(a,c,d){return e(a.x+(c.x-a.x)*d,a.y+(c.y-a.y)*d)}},polar:{enumerable:false,writable:false,configurable:false,value:function(a,c){return e(a*Math.cos(c),a*Math.sin(c))}},add:{enumerable:false,writable:false,configurable:false,value:function(a){return e(this.x+a.x,this.y+a.y)}},subtract:{enumerable:false,writable:false,
configurable:false,value:function(a){return e(this.x-a.x,this.y-a.y)}},offset:{enumerable:false,writable:false,configurable:false,value:function(a,c){this.x+=a;this.y+=c;return this}}}})()})();
(function(){var m,l;doodle.geom.Matrix=function(e,a,c,d,g,f){var b=arguments.length,o,j={};if(b===1){o=arguments[0];e=undefined}else if(b>6)throw new SyntaxError("[object Matrix]: Invalid number of parameters.");Object.defineProperties(j,m);Object.defineProperties(j,{a:{enumerable:true,configurable:false,get:function(){return e},set:function(i){e=i}},b:{enumerable:true,configurable:false,get:function(){return a},set:function(i){a=i}},c:{enumerable:true,configurable:false,get:function(){return c},
set:function(i){c=i}},d:{enumerable:true,configurable:false,get:function(){return d},set:function(i){d=i}},tx:{enumerable:true,configurable:false,get:function(){return g},set:function(i){g=i}},ty:{enumerable:true,configurable:false,get:function(){return f},set:function(i){f=i}}});if(o)if(typeof o==="function"){j.identity();o.call(j)}else if(Array.isArray(o)&&o.length===6)j.compose.apply(j,o);else if(l(o))j.compose(o.a,o.b,o.c,o.d,o.tx,o.ty);else throw new SyntaxError("[object Matrix]: Passed an invalid initializer object.");
else switch(b){case 0:j.identity();break;case 6:j.compose(e,a,c,d,g,f);break;default:throw new SyntaxError("[object Matrix]: Invalid number of parameters.");}return j};l=doodle.geom.Matrix.isMatrix=function(e){return e!==undefined&&e!==null&&typeof e.a==="number"&&typeof e.b==="number"&&typeof e.c==="number"&&typeof e.d==="number"&&typeof e.tx==="number"&&typeof e.ty==="number"};doodle.utils.types.check_matrix_type=function(e,a){if(l(e))return true;else{a=a===undefined?"check_matrix_type":a;throw new TypeError(a+
": Parameter must be a matrix.");}};(function(){var e=doodle.geom.Matrix,a=doodle.geom.Point,c=Math.sin,d=Math.cos,g=Math.atan2,f=Math.tan;m={compose:{enumerable:false,writable:false,configurable:false,value:function(b,o,j,i,u,q){this.a=b;this.b=o;this.c=j;this.d=i;this.tx=u;this.ty=q;return this}},toArray:{enumerable:false,writable:false,configurable:false,value:function(){var b=Array(6);b[0]=this.a;b[1]=this.b;b[2]=this.c;b[3]=this.d;b[4]=this.tx;b[5]=this.ty;return b}},toString:{enumerable:false,
writable:false,configurable:false,value:function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}},equals:{enumerable:false,writable:false,configurable:false,value:function(b){return this&&b&&this.a===b.a&&this.b===b.b&&this.c===b.c&&this.d===b.d&&this.tx===b.tx&&this.ty===b.ty||!this&&!b}},identity:{enumerable:false,writable:false,configurable:false,value:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this}},clone:{enumerable:false,
writable:false,configurable:false,value:function(){return e(this.a,this.b,this.c,this.d,this.tx,this.ty)}},multiply:{enumerable:false,writable:false,configurable:false,value:function(b){return this.compose(this.a*b.a+this.c*b.b,this.b*b.a+this.d*b.b,this.a*b.c+this.c*b.d,this.b*b.c+this.d*b.d,this.a*b.tx+this.c*b.ty+this.tx,this.b*b.tx+this.d*b.ty+this.ty)}},rotate:{enumerable:false,writable:false,configurable:false,value:function(b){var o=d(b);b=c(b);return this.multiply(e(o,b,-b,o,0,0))}},deltaRotate:{enumerable:false,
writable:false,configurable:false,value:function(b){var o=this.tx,j=this.ty;this.rotate(b);this.tx=o;this.ty=j;return this}},rotation:{enumerable:true,configurable:false,get:function(){return g(this.b,this.a)},set:function(b){var o=d(b);b=c(b);return this.compose(o,b,-b,o,this.tx,this.ty)}},scale:{enumerable:false,writable:false,configurable:false,value:function(b,o){return this.multiply(e(b,0,0,o,0,0))}},deltaScale:{enumerable:false,writable:false,configurable:false,value:function(b,o){var j=this.tx,
i=this.ty;this.scale(b,o);this.tx=j;this.ty=i;return this}},translate:{enumerable:false,writable:false,configurable:false,value:function(b,o){this.tx+=b;this.ty+=o;return this}},skew:{enumerable:false,writable:false,configurable:false,value:function(b,o){var j=f(b),i=f(o);return this.multiply(e(1,i,j,1,0,0))}},deltaSkew:{enumerable:false,writable:false,configurable:false,value:function(b,o){var j=this.tx,i=this.ty;this.skew(b,o);this.tx=j;this.ty=i;return this}},add:{enumerable:false,writable:false,
configurable:false,value:function(b){this.a+=b.a;this.b+=b.b;this.c+=b.c;this.d+=b.d;this.tx+=b.tx;this.ty+=b.ty;return this}},invert:{enumerable:false,writable:false,configurable:false,value:function(){var b=this.a*this.d-this.b*this.c;return this.compose(this.d/b,-this.b/b,-this.c/b,this.a/b,(this.ty*this.c-this.d*this.tx)/b,-(this.ty*this.a-this.b*this.tx)/b)}},transformPoint:{enumerable:false,writable:false,configurable:false,value:function(b){return a(this.a*b.x+this.c*b.y+this.tx,this.b*b.x+
this.d*b.y+this.ty)}},deltaTransformPoint:{enumerable:false,writable:false,configurable:false,value:function(b){return a(this.a*b.x+this.c*b.y,this.b*b.x+this.d*b.y)}},rotateAroundExternalPoint:{enumerable:false,writable:false,configurable:false,value:function(b,o){var j=e().rotate(o),i,u=b.x,q=b.y;this.translate(-u,-q);i=j.transformPoint({x:this.tx,y:this.ty});this.tx=i.x;this.ty=i.y;return this.multiply(j).translate(u,q)}},rotateAroundInternalPoint:{enumerable:false,writable:false,configurable:false,
value:function(b,o){return this.rotateAroundExternalPoint(this.transformPoint(b),o)}},matchInternalPointWithExternal:{enumerable:false,writable:false,configurable:false,value:function(b,o){var j=this.transformPoint(b);return this.translate(o.x-j.x,o.y-j.y)}},interpolate:{enumerable:false,writable:false,configurable:false,value:function(b,o){this.a+=(b.a-this.a)*o;this.b+=(b.b-this.b)*o;this.c+=(b.c-this.c)*o;this.d+=(b.d-this.d)*o;this.tx+=(b.tx-this.tx)*o;this.ty+=(b.ty-this.ty)*o;return this}}}})()})();
(function(){var m,l;doodle.geom.Rectangle=function(e,a,c,d){var g=arguments.length,f,b={};if(g===1&&typeof arguments[0]==="function"){f=arguments[0];e=undefined}else if(g>4)throw new SyntaxError("[object Rectangle]: Invalid number of parameters.");Object.defineProperties(b,m);Object.defineProperties(b,{x:{enumerable:true,configurable:false,get:function(){return e},set:function(o){e=o}},y:{enumerable:true,configurable:false,get:function(){return a},set:function(o){a=o}},width:{enumerable:true,configurable:false,
get:function(){return c},set:function(o){c=o}},height:{enumerable:true,configurable:false,get:function(){return d},set:function(o){d=o}}});if(f)if(typeof f==="function"){b.identity();f.call(b)}else if(isRectangle(f))b.compose(f.x,f.y,f.width,f.height);else throw new SyntaxError("[object Rectangle]: Passed an invalid initializer object.");else switch(g){case 0:b.compose(0,0,0,0);break;case 4:b.compose(e,a,c,d);break;default:throw new SyntaxError("[object Rectangle]: Invalid number of parameters.");
}return b};l=doodle.geom.Rectangle.isRect=function(e){return typeof e.x==="number"&&typeof e.y==="number"&&typeof e.width==="number"&&typeof e.height==="number"&&typeof e.top==="number"&&typeof e.bottom==="number"&&typeof e.left==="number"&&typeof e.right==="number"};doodle.utils.types.check_rect_type=function(e,a){if(l(e))return true;else{a=a===undefined?"check_rect_type":a;throw new TypeError(a+": Parameter must be a rectangle.");}};(function(){var e=doodle.geom.Rectangle;m={top:{enumerable:true,
configurable:false,get:function(){return this.y},set:function(a){this.y=a;this.height-=a}},right:{enumerable:true,configurable:false,get:function(){return this.x+this.width},set:function(a){this.width=a-this.x}},bottom:{enumerable:true,configurable:false,get:function(){return this.y+this.height},set:function(a){this.height=a-this.y}},left:{enumerable:true,configurable:false,get:function(){return this.x},set:function(a){this.x=a;this.width-=a}},clone:{enumerable:false,writable:false,configurable:false,
value:function(){return e(this.x,this.y,this.width,this.height)}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+")"}},toArray:{enumerable:false,writable:false,configurable:false,value:function(){return[this.top,this.right,this.bottom,this.left]}},compose:{enumerable:false,writable:false,configurable:false,value:function(a,c,d,g){this.x=a;this.y=c;this.width=d;this.height=g;return this}},offset:{enumerable:false,
writable:false,configurable:false,value:function(a,c){this.x+=a;this.y+=c;return this}},inflate:{enumerable:false,writable:false,configurable:false,value:function(a,c){this.x-=a;this.width+=2*a;this.y-=c;this.height+=2*c;return this}},equals:{enumerable:false,writable:false,configurable:false,value:function(a){return this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height}},isEmpty:{enumerable:false,writable:false,configurable:false,value:function(){return this.width>=0||this.height>=
0}},containsPoint:{enumerable:false,writable:false,configurable:false,value:function(a){var c=a.x;a=a.y;return c>=this.left&&c<=this.right&&a>=this.top&&a<=this.bottom}},containsRect:{enumerable:false,writable:false,configurable:false,value:function(a){return this.containsPoint({x:a.x,y:a.y})&&this.containsPoint({x:a.right,y:a.y})&&this.containsPoint({x:a.right,y:a.bottom})&&this.containsPoint({x:a.x,y:a.bottom})}},intersects:{enumerable:false,writable:false,configurable:false,value:function(a){return this.containsPoint({x:a.x,
y:a.y})||this.containsPoint({x:a.right,y:a.y})||this.containsPoint({x:a.right,y:a.bottom})||this.containsPoint({x:a.x,y:a.bottom})}},intersection:{enumerable:false,writable:false,configurable:false,value:function(a){var c=e();if(this.intersects(a)){c.left=Math.max(this.left,a.left);c.top=Math.max(this.top,a.top);c.right=Math.min(this.right,a.right);c.bottom=Math.min(this.bottom,a.bottom)}return c}},union:{enumerable:false,writable:false,configurable:false,value:function(a){var c=e();c.left=Math.min(this.left,
a.left);c.top=Math.min(this.top,a.top);c.right=Math.max(this.right,a.right);c.bottom=Math.max(this.bottom,a.bottom);return c}}}})()})();
(function(){var m,l;doodle.EventDispatcher=function(){var e=arguments.length,a,c={},d={};if(e===1&&typeof arguments[0]==="function")a=arguments[0];else if(e>0)throw new SyntaxError("[object EventDispatcher]: Invalid number of parameters.");Object.defineProperties(c,m);Object.defineProperties(c,{eventListeners:{enumerable:true,configurable:false,get:function(){return d}}});a&&a.call(c);return c};doodle.EventDispatcher.dispatcher_queue=[];l=doodle.EventDispatcher.isEventDispatcher=function(e){return e.toString()===
"[object EventDispatcher]"};doodle.EventDispatcher.inheritsEventDispatcher=function(e){for(;e;)if(l(e))return true;else{if(typeof e!=="object")return false;e=Object.getPrototypeOf(e)}return false};doodle.utils.types.check_eventdispatcher_type=function(e,a,c){if(doodle.EventDispatcher.inheritsEventDispatcher(e))return true;else{a=a===undefined?"check_eventdispatcher_type":a;c=c===undefined?"":"("+c+")";throw new TypeError(a+c+": Parameter must be an EventDispatcher.");}};(function(){var e=doodle.EventDispatcher.dispatcher_queue,
a=doodle.utils.types.check_function_type;m={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object EventDispatcher]"}},modify:{enumerable:false,writable:false,configurable:false,value:function(c){c.call(this);return this}},addEventListener:{enumerable:false,writable:false,configurable:false,value:function(c,d,g){g=g===true;var f=this;this.eventListeners[c]||(this.eventListeners[c]={capture:[],bubble:[]});this.eventListeners[c][g?"capture":"bubble"].push(d);e.every(function(b){return f!==
b})&&e.push(f)}},removeEventListener:{enumerable:false,writable:false,configurable:false,value:function(c,d,g){g=g===true;if(this.eventListeners[c]){var f=this.eventListeners[c];g=f[g?"capture":"bubble"];g.splice(g.indexOf(d),1);f.capture.length===0&&f.bubble.length===0&&delete this.eventListeners[c];Object.keys(this.eventListeners).length===0&&e.splice(e.indexOf(this),1)}}},handleEvent:{enumerable:false,writable:false,configurable:false,value:function(c){var d=c.eventPhase===doodle.Event.CAPTURING_PHASE?
"capture":"bubble",g=this.eventListeners[c.type],f=0,b;if((g=g&&g[d])&&g.length>0){c.__setCurrentTarget(this);f=g.length;for(b=0;b<f;b+=1){a(g[b],this+".handleEvent::listeners["+b+"]");d=g[b].call(this,c);if(d===false||c.returnValue===false)c.__cancel||c.stopPropagation();if(c.__cancelNow)break}}return f>0?true:false}},dispatchEvent:{enumerable:true,writable:false,configurable:false,value:function(c){var d,g,f=[],b;if(c.__cancel)return false;c.target||c.__setTarget(this);d=c.target;for(g=d.parent||
null;g;){f.push(g);g=g.parent}c.__setEventPhase(c.CAPTURING_PHASE);for(b=g=f.length;(b-=1)>=0;){f[b].handleEvent(c);if(c.__cancel)return true}c.__setEventPhase(c.AT_TARGET);d.handleEvent(c);if(c.__cancel)return true;if(!c.bubbles||c.cancelBubble)return true;c.__setEventPhase(c.BUBBLING_PHASE);for(b=0;b<g;b+=1){f[b].handleEvent(c);if(c.__cancel||c.cancelBubble)return true}return true}},broadcastEvent:{enumerable:true,writable:false,configurable:false,value:function(c){var d,g,f;if(c.__cancel)throw Error(this+
".broadcastEvent: Can not dispatch a cancelled event.");c.target||c.__setTarget(this);d=e.filter(function(b){return b.hasEventListener(c.type)});f=0;for(g=d.length;f<g;f+=1){d[f].handleEvent(c);if(c.__cancel)break}return true}},hasEventListener:{enumerable:false,writable:false,configurable:false,value:function(c){return this.eventListeners!==null&&this.eventListeners.hasOwnProperty(c)}},willTrigger:{enumerable:false,writable:false,configurable:false,value:function(c){if(this.hasEventListener(c))return true;
else if(!this.children||this.children.length===0)return false;else for(var d in this.children)if(this.children[d].willTrigger(c))return true;return false}}}})()})();
(function(){var m,l=0,e,a,c;doodle.Node=function(d){var g=arguments.length,f,b=Object.create(doodle.EventDispatcher()),o=[],j=doodle.geom.Matrix(),i=null,u=null;if(g===1&&typeof arguments[0]==="function"){f=arguments[0];d=undefined}else if(g>1)throw new SyntaxError("[object Node]: Invalid number of parameters.");Object.defineProperties(b,m);Object.defineProperties(b,{id:{enumerable:true,configurable:false,get:function(){return d},set:function(q){d=q}},root:{enumerable:true,configurable:false,get:function(){return i},
set:function(q){i=q}},parent:{enumerable:true,configurable:false,get:function(){return u},set:function(q){u=q}},children:{enumerable:false,configurable:false,get:function(){return o}},transform:{enumerable:false,configurable:false,get:function(){return j},set:function(q){j=q}},visible:function(){var q=true;return{enumerable:true,configurable:false,get:function(){return q},set:function(t){q=t}}}(),alpha:function(){var q=1;return{enumerable:true,configurable:false,get:function(){return q},set:function(t){q=
t>1?1:t<0?0:t}}}()});if(f){b.id="node"+String("000"+l).slice(-3);f.call(b)}else b.id=d!==undefined?d:"node"+String("000"+l).slice(-3);l+=1;return b};e=doodle.Node.isNode=function(d){return d.toString()==="[object Node]"};a=doodle.Node.inheritsNode=function(d){for(;d;)if(e(d))return true;else{if(typeof d!=="object")return false;d=Object.getPrototypeOf(d)}return false};doodle.utils.types.check_node_type=function(d,g,f){if(a(d))return true;else{g=g===undefined?"check_node_type":g;f=f===undefined?"":
"("+f+")";throw new TypeError(g+f+": Parameter must be a Node.");}};c=doodle.Node.inDisplayList=function(d){for(;d;){if(d.context)return true;d=d.parent}return false};(function(){function d(j,i,u){j.children.forEach(function(q){typeof u==="function"&&u(q);q.dispatchEvent(f(i,true));d(q,i,u)})}var g=doodle.geom.Point,f=doodle.Event,b=180/Math.PI,o=Math.PI/180;m={x:{enumerable:true,configurable:false,get:function(){return this.transform.tx},set:function(j){this.transform.tx=j}},y:{enumerable:true,configurable:false,
get:function(){return this.transform.ty},set:function(j){this.transform.ty=j}},axis:{value:{x:this.x,y:this.y}},rotate:{value:function(j){this.axis.x!==undefined&&this.axis.y!==undefined?this.transform.rotateAroundInternalPoint(this.axis,j*o):this.transform.rotate(j*o)}},rotation:{enumerable:true,configurable:false,get:function(){return this.transform.rotation*b},set:function(j){this.transform.rotation=j*o}},scaleX:{enumerable:true,configurable:false,get:function(){return this.transform.a},set:function(j){this.transform.a=
j}},scaleY:{enumerable:true,configurable:false,get:function(){return this.transform.d},set:function(j){this.transform.d=j}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Node]"}},addChildAt:{enumerable:false,writable:false,configurable:false,value:function(j,i){if(this.children.indexOf(j)!==-1)return false;if(j.root!==this.root)j.root=this.root;j.parent!==null&&j.parent!==this&&j.parent.removeChild(j);j.parent=this;this.children.splice(i,0,j);if(c(j)){j.dispatchEvent(f(f.ADDED,
true));d(j,f.ADDED)}return j}},addChild:{enumerable:false,writable:false,configurable:false,value:function(j){return this.addChildAt(j,this.children.length)}},removeChildAt:{enumerable:false,writable:false,configurable:false,value:function(){function j(i,u){var q=i.getBounds(i.root);u&&u.clearRect(q.x,q.y,q.width,q.height);i.root=null}return function(i){var u=this.children[i],q=u.context;this.children.splice(i,1);if(q){j(u,q);u.dispatchEvent(f(f.REMOVED,true));d(u,f.REMOVED,function(t){j(t,q)})}u.root=
null;u.parent=null}}()},removeChild:{enumerable:false,writable:false,configurable:false,value:function(j){this.removeChildAt(this.children.indexOf(j))}},removeChildById:{enumerable:false,writable:false,configurable:false,value:function(j){this.removeChild(this.getChildById(j))}},removeAllChildren:{enumerable:false,writable:false,configurable:false,value:function(){for(var j=this.children.length;(j-=1)>=0;)this.removeChildAt(j)}},getChildById:{enumerable:false,writable:false,configurable:false,value:function(j){return this.children.filter(function(i){return i.id===
j})[0]}},setChildIndex:{enumerable:true,writable:false,configurable:false,value:function(j,i){var u=this.children,q=u.length,t=u.indexOf(j);if(t===-1)throw new ReferenceError(this+".setChildIndex(*child*, index): "+j+" does not exist on child list.");if(i>q||i<-q)throw new RangeError(this+".setChildIndex(child, *index*): "+i+" does not exist on child list.");u.splice(t,1);u.splice(i,0,j)}},swapChildrenAt:{enumerable:false,writable:false,configurable:false,value:function(j,i){var u=this.children;u[j]=
u.splice(i,1,u[j])[0]}},swapChildren:{enumerable:false,writable:false,configurable:false,value:function(j,i){this.swapChildrenAt(this.children.indexOf(j),this.children.indexOf(i))}},swapDepths:{enumerable:false,writable:false,configurable:false,value:function(j){var i=this.parent;if(!i||!Array.isArray(i.children))throw Error(this+".swapDepths: no parent found.");else i.swapChildren(this,j)}},swapDepthAt:{enumerable:false,writable:false,configurable:false,value:function(j){var i=this.parent;if(!i||
!Array.isArray(i.children))throw Error(this+".swapDepthAt: no parent found.");else i.swapChildrenAt(j,i.children.indexOf(this))}},contains:{enumerable:false,writable:false,configurable:false,value:function(j){for(;j;){if(j===this)return true;j=j.parent}return false}},localToGlobal:{enumerable:false,writable:false,configurable:false,value:function(j){for(var i=this;i;){j=i.transform.transformPoint(j);i=i.parent}return j}},globalToLocal:{enumerable:false,writable:false,configurable:false,value:function(j){var i=
this.localToGlobal({x:0,y:0});return g(j.x-i.x,j.y-i.y)}}}})()})();
(function(){var m,l,e,a=doodle.utils.hex_to_rgb_str,c=doodle.utils.rgb_str_to_hex,d=doodle.utils.types.check_context_type,g=doodle.utils.get_element,f=doodle.geom.Rectangle;doodle.Sprite=function(b){var o=arguments.length,j,i,u=[],q=0,t=0,y=0,z=0,A=0,r=0;i=typeof b==="string"?Object.create(doodle.Node(b)):Object.create(doodle.Node());if(o===1&&typeof arguments[0]==="function"){j=arguments[0];b=undefined}else if(o>1)throw new SyntaxError("[object Sprite]: Invalid number of parameters.");Object.defineProperties(i,
m);Object.defineProperties(i,{width:function(){var h=0;return{enumerable:true,configurable:false,get:function(){return h},set:function(k){h=k}}}(),height:function(){var h=0;return{enumerable:true,configurable:false,get:function(){return h},set:function(k){h=k}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(h){var k=f(),n=this.width,p=this.height,s=this.localToGlobal({x:q,y:t}),v=this.localToGlobal({x:q+n,y:t});n=this.localToGlobal({x:q+n,y:t+p});p=this.localToGlobal({x:q,
y:t+p});s=h.globalToLocal(s);v=h.globalToLocal(v);n=h.globalToLocal(n);p=h.globalToLocal(p);k.left=Math.min(s.x,v.x,n.x,p.x);k.right=Math.max(s.x,v.x,n.x,p.x);k.top=Math.min(s.y,v.y,n.y,p.y);k.bottom=Math.max(s.y,v.y,n.y,p.y);return k}},hitArea:function(){var h=null;return{enumerable:true,configurable:false,get:function(){return h===null?this.getBounds(this):h},set:function(k){h=k=k===false?null:k}}}(),hitTestObject:{enumerable:true,writable:true,configurable:false,value:function(h){return this.getBounds(this).intersects(h.getBounds(this))}},
hitTestPoint:{enumerable:true,writable:true,configurable:false,value:function(h){return this.getBounds(this).containsPoint(this.globalToLocal(h))}},context:{get:function(){for(var h=this.parent;h;){if(h.context){h=h.context;d(h,this+".context (traversal)");return h}h=h.parent}return null}},__draw:{enumerable:false,writable:false,configurable:false,value:function(h){u.forEach(function(k){k.call(i,h)})}},debug:{enumerable:true,configurable:false,value:Object.create(null,{boundingBox:function(){var h=
"rgb(0, 0, 255)";return{enumerable:true,configurable:false,get:function(){return c(h)},set:function(k){h=a(k)}}}()})},graphics:{value:Object.create(null,{draw:{enumerable:false,writable:false,configurable:false,value:function(h){u.push(h)}.bind(i)},clear:{enumerable:false,writable:false,configurable:false,value:function(){for(var h=u.length;(h-=1)>=0;)u.splice(h,1);A=r=q=t=y=z=this.height=this.width=0}.bind(i)},rect:{enumerable:false,writable:false,configurable:false,value:function(h,k,n,p){q=Math.min(0,
h,q);t=Math.min(0,k,t);y=Math.max(0,h,h+n,y);z=Math.max(0,k,k+p,z);this.width=-q+y;this.height=-t+z;u.push(function(s){s.beginPath();s.rect(h,k,n,p);s.closePath();s.stroke()})}.bind(i)},circle:{enumerable:false,writable:false,configurable:false,value:function(h,k,n){q=Math.min(0,-n+h,q);t=Math.min(0,-n+k,t);y=Math.max(0,h,h+n,y);z=Math.max(0,k,k+n,z);this.width=-q+y;this.height=-t+z;u.push(function(p){p.beginPath();p.arc(h,k,n,0,6.283185307179586,true);p.closePath();p.stroke()})}.bind(i)},ellipse:{enumerable:false,
writable:false,configurable:false,value:function(h,k,n,p){p=p===undefined?n:p;var s=n/2,v=p/2,w=0.5522847498*s,D=0.5522847498*v;q=Math.min(0,-s+h,q);t=Math.min(0,-v+k,t);y=Math.max(0,h,h+s,y);z=Math.max(0,k,k+v,z);this.width=-q+y;this.height=-t+z;u.push(function(x){x.beginPath();x.moveTo(h+s,k);x.bezierCurveTo(h+s,k-D,h+w,k-v,h,k-v);x.bezierCurveTo(h-w,k-v,h-s,k-D,h-s,k);x.bezierCurveTo(h-s,k+D,h-w,k+v,h,k+v);x.bezierCurveTo(h+w,k+v,h+s,k+D,h+s,k);x.closePath();x.stroke()})}.bind(i)},roundRect:{enumerable:false,
writable:false,configurable:false,value:function(h,k,n,p,s,v){s=s===undefined?0:s;v=v===undefined?0:v;var w=h+n,D=w-s,x=h+s,B=k+p,E=B-v,F=k+v;q=Math.min(0,h,q);t=Math.min(0,k,t);y=Math.max(0,h,h+n,y);z=Math.max(0,k,k+p,z);this.width=-q+y;this.height=-t+z;u.push(function(C){C.beginPath();C.moveTo(x,k);C.beginPath();C.lineTo(D,k);C.quadraticCurveTo(w,k,w,F);C.lineTo(w,E);C.quadraticCurveTo(w,B,D,B);C.lineTo(x,B);C.quadraticCurveTo(h,B,h,E);C.lineTo(h,F);C.quadraticCurveTo(h,k,x,k);C.closePath();C.stroke()})}.bind(i)},
moveTo:{enumerable:false,writable:false,configurable:false,value:function(h,k){u.push(function(n){n.moveTo(h,k)});A=h;r=k}.bind(i)},lineTo:{enumerable:false,writable:false,configurable:false,value:function(h,k){q=Math.min(0,h,A,q);t=Math.min(0,k,r,t);y=Math.max(0,h,A,y);z=Math.max(0,k,r,z);this.width=y-q;this.height=z-t;u.push(function(n){n.lineTo(h,k)});A=h;r=k}.bind(i)},curveTo:{enumerable:false,writable:false,configurable:false,value:function(h,k){var n=A,p=r,s=h.x,v=h.y,w=k.x,D=k.y,x,B=0,E=0;
x=(n-s)/(n-2*s+w);if(0<=x&&x<=1)B=(1-x)*(1-x)*n+2*(1-x)*x*s+x*x*w;x=(p-v)/(p-2*v+D);if(0<=x&&x<=1)E=(1-x)*(1-x)*p+2*(1-x)*x*v+x*x*D;q=Math.min(0,n,B,w,q);t=Math.min(0,p,E,D,t);y=Math.max(0,n,B,w,y);z=Math.max(0,p,E,D,z);this.width=-q+y;this.height=-t+z;u.push(function(F){F.quadraticCurveTo(s,v,w,D)});A=w;r=D}.bind(i)},bezierCurveTo:{enumerable:false,writable:false,configurable:false,value:function(h,k,n){var p=Math.pow,s=Math.max,v=Math.min,w=A,D=r,x=h.x,B=h.y,E=k.x,F=k.y,C=n.x,H=n.y,G,I=n=k=0,J=
0;for(h=0.1;h<1;h+=0.1){G=p(1-h,3)*w+3*p(1-h,2)*h*x+3*p(1-h,1)*p(h,2)*E+p(h,3)*C;if(G>k)k=G;if(G<n)n=G;G=p(1-h,3)*D+3*p(1-h,2)*h*B+3*p(1-h,1)*p(h,2)*F+p(h,3)*H;if(G>I)I=G;if(G<J)J=G}q=v(0,w,n,C,q);t=v(0,D,J,H,t);y=s(0,w,k,C,y);z=s(0,D,I,H,z);this.width=-q+y;this.height=-t+z;u.push(function(K){K.bezierCurveTo(x,B,E,F,C,H)});A=C;r=H}.bind(i)},beginFill:{enumerable:false,writable:false,configurable:false,value:function(h,k){k=k===undefined?1:k;u.push(function(n){n.fillStyle=a(h,k)})}.bind(i)},beginGradientFill:{enumerable:true,
writable:false,configurable:false,value:function(){var h=doodle.GradientType.LINEAR,k=doodle.GradientType.RADIAL;return function(n,p,s,v,w,D){u.push(function(x){var B=doodle.utils.hex_to_rgb_str,E,F=v.length,C=0;if(n===h)E=x.createLinearGradient(p.x,p.y,s.x,s.y);else if(n===k)E=x.createRadialGradient(p.x,p.y,p.radius,s.x,s.y,s.radius);else throw new TypeError(this+".graphics.beginGradientFill(*type*, point1, point2, ratios, colors, alphas): Unknown gradient type.");for(;C<F;C+=1)E.addColorStop(v[C],
B(w[C],D[C]));x.fillStyle=E})}.bind(i)}()},beginPatternFill:{enumerable:true,writable:false,configurable:false,value:function(h,k){var n=null,p;p=doodle.Pattern;var s=doodle.Event;k=k===undefined?p.REPEAT:k;if(k!==p.REPEAT&&k!==p.NO_REPEAT&&k!==p.REPEAT_X&&k!==p.REPEAT_Y)throw new SyntaxError(this+".graphics.beginPatternFill(image, *repeat*): Invalid pattern repeat type.");if(typeof h==="string")if(h[0]==="#")h=g(h,this+".beginPatternFill");else(function(){var v=encodeURI(h);h=new Image;h.src=v})();
if(h.complete)n=h;else{h.onload=function(){n=h;this.dispatchEvent(s(s.LOAD))}.bind(this);p=function(){throw new URIError(this+".graphics.beginPatternFill(*image*,repeat): Unable to load "+h.src);}.bind(this);h.onerror=p;h.onabort=p}u.push(function(v){v.fillStyle=n?v.createPattern(n,k):"rgba(0,0,0,0)"})}.bind(i)},lineStyle:{enumerable:true,writable:false,configurable:false,value:function(h,k,n,p,s,v){h=h===undefined?1:h;k=k===undefined?"#000000":k;n=n===undefined?1:n;p=p===undefined?doodle.LineCap.BUTT:
p;s=s===undefined?doodle.LineJoin.MITER:s;v=v===undefined?10:v;if(typeof k==="string"||typeof k==="number")k=a(k,n);else throw new TypeError(this+".graphics.lineStyle(thickness,*color*,alpha,caps,joints,miterLimit): Color must be a hex value.");u.push(function(w){w.lineWidth=h;w.strokeStyle=k;w.lineCap=p;w.lineJoin=s;w.miterLimit=v})}.bind(i)},beginPath:{enumerable:false,writable:false,configurable:false,value:function(){u.push(function(h){h.beginPath();h.moveTo(A,r)})}},closePath:{enumerable:false,
writable:false,configurable:false,value:function(){u.push(function(h){h.closePath();h.stroke()});r=A=0}},endFill:{enumerable:false,writable:false,configurable:false,value:function(){u.push(function(h){h.fill()})}},stroke:{enumerable:false,writable:false,configurable:false,value:function(){u.push(function(h){h.stroke()});r=A=0}}})}});j&&j.call(i);return i};l=doodle.Sprite.isSprite=function(b){return b.toString()==="[object Sprite]"};e=doodle.Sprite.inheritsSprite=function(b){for(;b;)if(l(b))return true;
else{if(typeof b!=="object")return false;b=Object.getPrototypeOf(b)}return false};doodle.utils.types.check_sprite_type=function(b,o,j){if(e(b))return true;else{o=o===undefined?"check_sprite_type":o;j=j===undefined?"":"("+j+")";throw new TypeError(o+j+": Parameter must inherit from Sprite.");}};(function(){m={rotation:{enumerable:true,configurable:false,get:function(){return this.transform.rotation*180/Math.PI},set:function(b){this.transform.rotation=b*Math.PI/180}},toString:{enumerable:false,writable:false,
configurable:false,value:function(){return"[object Sprite]"}},compose:{enumerable:false,writable:false,configurable:false,value:function(b,o,j,i){this.x=b;this.y=o;this.width=j;this.height=i;return this}}}})()})();
(function(){var m,l=doodle.utils,e=l.rgb_str_to_hex,a=l.hex_to_rgb_str,c=l.get_element,d=l.get_element_property,g=l.set_element_property;doodle.ElementNode=function(f){var b=arguments.length,o,j=Object.create(doodle.Node());if(b===1&&typeof arguments[0]==="function"){o=arguments[0];f=undefined}else if(b>1)throw new SyntaxError("[object ElementNode]: Invalid number of parameters.");Object.defineProperties(j,m);Object.defineProperties(j,{element:{get:function(){return f},set:function(i){f=i}}});o&&
o.call(j);return j};m={id:{get:function(){return d(this.element,"id")},set:function(f){return g(this.element,"id",f,"html")}},width:{get:function(){return d(this.element,"width","int")},set:function(f){g(this.element,"width",f+"px");return f}},height:{get:function(){return d(this.element,"height","int")},set:function(f){g(this.element,"height",f+"px");return f}},backgroundColor:{get:function(){return e(d(this.element,"backgroundColor"))},set:function(f){if(typeof f==="number")f=a(f);return g(this.element,
"backgroundColor",f)}},backgroundImage:function(){var f=/^url\((.*)\)/;return{get:function(){var b=d(this.element,"backgroundImage");return(b=b==="none"?null:b.match(f))?b[1]:null},set:function(b){if(!b)return g(this.element,"backgroundImage",null);if(typeof b==="string"){if(b[0]==="#")b=c(b).src}else if(b&&b.tagName==="IMG")b=b.src;f.test(b)||(b="url("+encodeURI(b)+")");return g(this.element,"backgroundImage",b)}}}(),backgroundRepeat:{get:function(){return d(this.element,"backgroundRepeat")},set:function(f){return g(this.element,
"backgroundRepeat",f)}},alpha:{get:function(){return d(this.element,"opacity","float")},set:function(f){return g(this.element,"opacity",f)}},visible:{get:function(){switch(d(this.element,"visibility")){case "visible":return true;case "hidden":return false;default:throw new ReferenceError(this+".visible: Unable to determine visibility.");}},set:function(f){f?g(this.element,"visibility","visible"):g(this.element,"visibility","hidden");return f}},toString:{enumerable:false,writable:false,configurable:false,
value:function(){return"[object ElementNode]"}}}})();
(function(){var m,l=0,e=doodle.utils.get_element_property,a=doodle.utils.set_element_property;doodle.Layer=function(c,d){var g=arguments.length,f,b=Object.create(doodle.ElementNode());if(g===1&&typeof arguments[0]==="function"){f=arguments[0];c=undefined}else if(g>2)throw new SyntaxError("[object Layer]: Invalid number of parameters.");Object.defineProperties(b,m);Object.defineProperties(b,{element:{get:function(){return d},set:function(o){d=o}}});b.element=d||document.createElement("canvas");b.element.style.position=
"absolute";f&&f.call(b);if(!b.id){b.id=typeof c==="string"?c:"layer"+String("00"+l).slice(-2);l+=1}return b};(function(){var c=doodle.Layer.isLayer=function(g){return g.toString()==="[object Layer]"},d=doodle.Layer.inheritsLayer=function(g){for(;g;)if(c(g))return true;else{if(typeof g!=="object")return false;g=Object.getPrototypeOf(g)}return false};doodle.utils.types.check_layer_type=function(g,f,b){if(d(g))return true;else{f=f===undefined?"check_layer_type":f;b=b===undefined?"":"("+b+")";throw new TypeError(f+
b+": Parameter must be a Layer.");}}})();m={context:{get:function(){return this.element.getContext("2d")}},width:{get:function(){return e(this.element,"width","int")},set:function(c){a(this.element,"width",c,"html");return c}},height:{get:function(){return e(this.element,"height","int")},set:function(c){a(this.element,"height",c,"html");return c}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Layer]"}}}})();
(function(){var m,l=doodle.Layer.isLayer,e=doodle.utils.get_element,a=doodle.utils.get_element_property,c=doodle.utils.set_element_property;inheritsSprite=doodle.Sprite.inheritsSprite;doodle_Event=doodle.Event;doodle_MouseEvent=doodle.MouseEvent;ENTER_FRAME=doodle_Event.ENTER_FRAME;enterFrame=doodle_Event(ENTER_FRAME);dispatcher_queue=doodle.EventDispatcher.dispatcher_queue;doodle.Display=function(d){function g(){f(t);dispatcher_queue.forEach(function(k){if(k.hasEventListener(ENTER_FRAME)){enterFrame.__setTarget(k);
k.handleEvent(enterFrame)}});b(t);y+=1;r&&r.update()}function f(){t.children.forEach(function(k){var n=k.context;n.save();n.setTransform(1,0,0,1,0,0);n.clearRect(0,0,k.width,k.height);n.restore()})}function b(k,n){var p;k.children.forEach(function(s){if(s.visible){n=n||s.context;p=s.transform.toArray();n.save();n.transform(p[0],p[1],p[2],p[3],p[4],p[5]);if(h){var v=n;if(typeof s.getBounds==="function"){var w=s.getBounds(t);v.save();v.setTransform(1,0,0,1,0,0);v.lineWidth=0.5;v.strokeStyle=s.debug.boundingBox;
v.strokeRect(w.x,w.y,w.width,w.height);v.restore()}}if(!l(s))if(s.alpha!==1)n.globalAlpha=s.alpha;typeof s.__draw==="function"&&s.__draw(n);b(s,n);n.restore()}})}function o(){f(t);b(t)}function j(k){var n=doodle.EventDispatcher.dispatcher_queue,p=doodle_MouseEvent.MOUSE_OVER,s=doodle_MouseEvent.MOUSE_OUT,v=doodle_MouseEvent.MOUSE_MOVE,w=doodle_MouseEvent(k),D=w.type,x=false;n.forEach(function(B){if(inheritsSprite(B)){var E=B.getBounds(t).containsPoint({x:w.offsetX,y:w.offsetY});w.__setTarget(null);
if(E&&B.hasEventListener(D)){B.dispatchEvent(w);x=true}if(E&&B.hasEventListener(p))if(!B.__mouse_over){B.__mouse_over=true;w.__setType(p);B.dispatchEvent(w);x=true}if(!E&&B.hasEventListener(s))if(B.__mouse_over){B.__mouse_over=false;w.__setType(s);B.dispatchEvent(w);x=true}}else if(B.hasEventListener(D)){w.__setTarget(null);B.dispatchEvent(w);x=true}});n.forEach(function(B){if(B===t&&!x&&B.hasEventListener(v)){D===v&&w.__setType(v);w.__setTarget(null);B.dispatchEvent(w);x=true}})}function i(k){var n=
doodle.EventDispatcher.dispatcher_queue,p=doodle.KeyboardEvent(k);n.forEach(function(s){s.hasEventListener(p.type)&&s.handleEvent(p)})}var u=arguments.length,q,t=Object.create(doodle.ElementNode()),y=0,z=0,A=0,r=null,h=false;if(u===1&&typeof arguments[0]==="function"){q=arguments[0];d=undefined}else if(u>1)throw new SyntaxError("[object Display]: Invalid number of parameters.");Object.defineProperties(t,m);Object.defineProperties(t,{element:{get:function(){return d},set:function(k){var n=e(k,"[object Display]"),
p;d=n;d.style.position="relative";this.root=this;k=n.getAttribute("width");n=n.getAttribute("height");if(k)this.width=parseInt(k);if(n)this.height=parseInt(n);for(p in doodle_MouseEvent)d.addEventListener(doodle_MouseEvent[p],j,false);d.addEventListener(doodle_MouseEvent.MOUSE_MOVE,function(s){z=s.offsetX;A=s.offsetY});document.addEventListener(doodle.KeyboardEvent.KEY_PRESS,i,false);document.addEventListener(doodle.KeyboardEvent.KEY_DOWN,i,false);document.addEventListener(doodle.KeyboardEvent.KEY_UP,
i,false)}},frameRate:function(){var k=false,n;return{get:function(){return k},set:function(p){if(p===0||p===false){k=false;clearInterval(n)}else if(typeof p==="number"&&isFinite(1E3/p)){k=p;clearInterval(n);n=setInterval(g,1E3/k)}else throw new TypeError("[object Display].frameRate: Parameter must be a valid number or false.");}}}(),mouseX:{enumerable:false,configurable:false,get:function(){return z}},mouseY:{enumerable:false,configurable:false,get:function(){return A}},debug:{enumerable:true,configurable:false,
value:Object.create(null,{stats:{enumerable:true,configurable:false,get:function(){return r?true:false},set:function(k){if(k&&!r){r=new Stats;t.element.appendChild(r.domElement)}else if(!k&&r){t.element.removeChild(r.domElement);r=null}}},boundingBox:{enumerable:true,configurable:false,get:function(){return h},set:function(k){h=k}}})}});if(q)q.call(t);else t.element=d;if(!t.element)throw new ReferenceError("[object Display]: Requires a HTML element.");t.addEventListener(doodle_Event.ADDED,o);t.addEventListener(doodle_Event.REMOVED,
o);o();return t};m={width:{get:function(){return a(this.element,"width","int")},set:function(d){c(this.element,"width",d+"px");this.children.forEach(function(g){g.width=d});return d}},height:{get:function(){return a(this.element,"height","int")},set:function(d){c(this.element,"height",d+"px");this.children.forEach(function(g){g.height=d});return d}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Display]"}},toDataUrl:{value:function(){}},addChildAt:{value:function(d,
g){d.parent!==null&&d.parent!==this&&d.parent.removeChild(node);d.root=this;d.parent=this;d.width=this.width;d.height=this.height;this.children.splice(g,0,d);this.element.appendChild(d.element);return this}},removeChildAt:{enumerable:false,writable:false,configurable:false,value:function(d){var g=this.children[d];g.root=null;g.parent=null;this.children.splice(d,1);this.element.removeChild(g.element)}},swapChildrenAt:{enumerable:false,writable:false,configurable:false,value:function(d,g){var f=this.children;
f[d]=f.splice(g,1,f[d])[0];d>g?this.element.insertBefore(f[g].element,f[d].element):this.element.insertBefore(f[d].element,f[g].element)}},addLayer:{value:function(d){d=doodle.Layer(d);this.addChild(d);return d}},removeLayer:{value:function(d){this.removeChildById(d)}}}})();
