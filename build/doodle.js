var doodle={};doodle.geom={};doodle.events={};if(typeof Function.prototype.bind!=="function")Function.prototype.bind=function(s){var v=this;return function(){return v.apply(s,arguments)}};
doodle.utils=Object.create({},{hex_to_rgb:{enumerable:true,writable:false,configurable:false,value:function(s){if(typeof s==="string"){s=s[0]==="#"?s.slice(1):s;s=parseInt(s,16)}return[s>>16&255,s>>8&255,s&255]}},hex_to_rgb_str:{enumerable:true,writable:false,configurable:false,value:function(s,v){var i=doodle.utils;v=v===undefined?1:v;s=i.hex_to_rgb(s);return i.rgb_to_rgb_str(s[0],s[1],s[2],v)}},rgb_str_to_hex:{enumerable:true,writable:false,configurable:false,value:function(s){var v=doodle.utils;
s=v.rgb_str_to_rgb(s);return v.rgb_to_hex(parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10))}},rgb_str_to_rgb:{enumerable:true,writable:false,configurable:false,value:function(){var s=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?(.*)\)$/;return function(v){v=v.trim().match(s);var i=[parseInt(v[1],10),parseInt(v[2],10),parseInt(v[3],10)];v=parseFloat(v[4]);typeof v==="number"&&!isNaN(v)&&i.push(v);return i}}()},rgb_to_hex:{enumerable:true,writable:false,configurable:false,value:function(s,
v,i){s=(i|v<<8|s<<16).toString(16);return"#"+String("000000"+s).slice(-6)}},rgb_to_rgb_str:{enumerable:true,writable:false,configurable:false,value:function(s,v,i,g){g=g===undefined?1:g;g=g<0?0:g>1?1:g;return g===1?"rgb("+s+","+v+","+i+")":"rgba("+s+","+v+","+i+","+g+")"}},get_element:{enumerable:true,writable:false,configurable:false,value:function(s){if(typeof s==="string"){s=s[0]==="#"?s.slice(1):s;return document.getElementById(s)}else return s&&s.tagName?s:null}},get_style_property:{enumerable:true,
writable:false,configurable:false,value:function(s,v,i){i=i===undefined?true:false;try{if(i&&document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(s,null)[v];else if(s.currentStyle)return s.currentStyle[v];else if(s.style)return s.style[v];else throw new ReferenceError("get_style_property: Cannot read property '"+v+"' of "+s+".");}catch(g){throw new ReferenceError("get_style_property: Cannot read property '"+v+"' of "+s+".");}}},get_element_property:{enumerable:true,
writable:false,configurable:false,value:function(s,v,i,g){i=i||false;var q;try{q=doodle.utils.get_style_property(s,v,g)}catch(k){q=undefined}if(q===undefined||q===null||q==="")q=s.getAttribute(v);if(i!==false)switch(i){case "int":q=parseInt(q,10);q=isNaN(q)?null:q;break;case "number":case "float":q=parseFloat(q);q=isNaN(q)?null:q;break;case "string":q=String(q)}return q}},set_element_property:{enumerable:true,writable:false,configurable:false,value:function(s,v,i,g){g=g===undefined?"css":g;switch(g){case "css":s.style[v]=
i;break;case "html":s.setAttribute(v,i);break;default:throw new SyntaxError("set_element_property: type must be 'css' property or 'html' attribute.");}return i}},create_scene_path:{enumerable:true,writable:false,configurable:false,value:function(){return function s(v,i,g){i=i===undefined?[]:i;g=g===undefined?false:g;var q=v.children.length;g&&i.splice(0,i.length);if(q!==0)for(;q--;)s(v.children[q],i,false);i.push(v);return i}}()}});
Object.defineProperty(doodle,"Keyboard",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BACKSPACE:{enumerable:true,writable:false,configurable:false,value:8},TAB:{enumerable:true,writable:false,configurable:false,value:9},ENTER:{enumerable:true,writable:false,configurable:false,value:13},COMMAND:{enumerable:true,writable:false,configurable:false,value:15},SHIFT:{enumerable:true,writable:false,configurable:false,value:16},CONTROL:{enumerable:true,writable:false,configurable:false,
value:17},ALTERNATE:{enumerable:true,writable:false,configurable:false,value:18},PAUSE:{enumerable:true,writable:false,configurable:false,value:19},CAPS_LOCK:{enumerable:true,writable:false,configurable:false,value:20},NUMPAD:{enumerable:true,writable:false,configurable:false,value:21},ESCAPE:{enumerable:true,writable:false,configurable:false,value:27},SPACE:{enumerable:true,writable:false,configurable:false,value:32},PAGE_UP:{enumerable:true,writable:false,configurable:false,value:33},PAGE_DOWN:{enumerable:true,
writable:false,configurable:false,value:34},END:{enumerable:true,writable:false,configurable:false,value:35},HOME:{enumerable:true,writable:false,configurable:false,value:36},LEFT:{enumerable:true,writable:false,configurable:false,value:37},UP:{enumerable:true,writable:false,configurable:false,value:38},RIGHT:{enumerable:true,writable:false,configurable:false,value:39},DOWN:{enumerable:true,writable:false,configurable:false,value:40},INSERT:{enumerable:true,writable:false,configurable:false,value:45},
DELETE:{enumerable:true,writable:false,configurable:false,value:46},NUMBER_0:{enumerable:true,writable:false,configurable:false,value:48},NUMBER_1:{enumerable:true,writable:false,configurable:false,value:49},NUMBER_2:{enumerable:true,writable:false,configurable:false,value:50},NUMBER_3:{enumerable:true,writable:false,configurable:false,value:51},NUMBER_4:{enumerable:true,writable:false,configurable:false,value:52},NUMBER_5:{enumerable:true,writable:false,configurable:false,value:53},NUMBER_6:{enumerable:true,
writable:false,configurable:false,value:54},NUMBER_7:{enumerable:true,writable:false,configurable:false,value:55},NUMBER_8:{enumerable:true,writable:false,configurable:false,value:56},NUMBER_9:{enumerable:true,writable:false,configurable:false,value:57},A:{enumerable:true,writable:false,configurable:false,value:65},B:{enumerable:true,writable:false,configurable:false,value:66},C:{enumerable:true,writable:false,configurable:false,value:67},D:{enumerable:true,writable:false,configurable:false,value:68},
E:{enumerable:true,writable:false,configurable:false,value:69},F:{enumerable:true,writable:false,configurable:false,value:70},G:{enumerable:true,writable:false,configurable:false,value:71},H:{enumerable:true,writable:false,configurable:false,value:72},I:{enumerable:true,writable:false,configurable:false,value:73},J:{enumerable:true,writable:false,configurable:false,value:74},K:{enumerable:true,writable:false,configurable:false,value:75},L:{enumerable:true,writable:false,configurable:false,value:76},
M:{enumerable:true,writable:false,configurable:false,value:77},N:{enumerable:true,writable:false,configurable:false,value:78},O:{enumerable:true,writable:false,configurable:false,value:79},P:{enumerable:true,writable:false,configurable:false,value:80},Q:{enumerable:true,writable:false,configurable:false,value:81},R:{enumerable:true,writable:false,configurable:false,value:82},S:{enumerable:true,writable:false,configurable:false,value:83},T:{enumerable:true,writable:false,configurable:false,value:84},
U:{enumerable:true,writable:false,configurable:false,value:85},V:{enumerable:true,writable:false,configurable:false,value:86},W:{enumerable:true,writable:false,configurable:false,value:87},X:{enumerable:true,writable:false,configurable:false,value:88},Y:{enumerable:true,writable:false,configurable:false,value:89},Z:{enumerable:true,writable:false,configurable:false,value:90},WINDOWS_KEY:{enumerable:true,writable:false,configurable:false,value:91},NUMPAD_0:{enumerable:true,writable:false,configurable:false,
value:96},NUMPAD_1:{enumerable:true,writable:false,configurable:false,value:97},NUMPAD_2:{enumerable:true,writable:false,configurable:false,value:98},NUMPAD_3:{enumerable:true,writable:false,configurable:false,value:99},NUMPAD_4:{enumerable:true,writable:false,configurable:false,value:100},NUMPAD_5:{enumerable:true,writable:false,configurable:false,value:101},NUMPAD_6:{enumerable:true,writable:false,configurable:false,value:102},NUMPAD_7:{enumerable:true,writable:false,configurable:false,value:103},
NUMPAD_8:{enumerable:true,writable:false,configurable:false,value:104},NUMPAD_9:{enumerable:true,writable:false,configurable:false,value:105},NUMPAD_MULTIPLY:{enumerable:true,writable:false,configurable:false,value:106},NUMPAD_ADD:{enumerable:true,writable:false,configurable:false,value:107},NUMPAD_ENTER:{enumerable:true,writable:false,configurable:false,value:108},NUMPAD_SUBTRACT:{enumerable:true,writable:false,configurable:false,value:109},NUMPAD_DECIMAL:{enumerable:true,writable:false,configurable:false,
value:110},NUMPAD_DIVIDE:{enumerable:true,writable:false,configurable:false,value:111},F1:{enumerable:true,writable:false,configurable:false,value:112},F2:{enumerable:true,writable:false,configurable:false,value:113},F3:{enumerable:true,writable:false,configurable:false,value:114},F4:{enumerable:true,writable:false,configurable:false,value:115},F5:{enumerable:true,writable:false,configurable:false,value:116},F6:{enumerable:true,writable:false,configurable:false,value:117},F7:{enumerable:true,writable:false,
configurable:false,value:118},F8:{enumerable:true,writable:false,configurable:false,value:119},F9:{enumerable:true,writable:false,configurable:false,value:120},F10:{enumerable:true,writable:false,configurable:false,value:121},F11:{enumerable:true,writable:false,configurable:false,value:122},F12:{enumerable:true,writable:false,configurable:false,value:123},F13:{enumerable:true,writable:false,configurable:false,value:124},F14:{enumerable:true,writable:false,configurable:false,value:125},F15:{enumerable:true,
writable:false,configurable:false,value:126},SCROLL:{enumerable:true,writable:false,configurable:false,value:145},SEMICOLON:{enumerable:true,writable:false,configurable:false,value:186},EQUAL:{enumerable:true,writable:false,configurable:false,value:187},COMMA:{enumerable:true,writable:false,configurable:false,value:188},MINUS:{enumerable:true,writable:false,configurable:false,value:189},PERIOD:{enumerable:true,writable:false,configurable:false,value:190},SLASH:{enumerable:true,writable:false,configurable:false,
value:191},BACKQUOTE:{enumerable:true,writable:false,configurable:false,value:192},LEFTBRACKET:{enumerable:true,writable:false,configurable:false,value:219},BACKSLASH:{enumerable:true,writable:false,configurable:false,value:220},RIGHTBRACKET:{enumerable:true,writable:false,configurable:false,value:221},QUOTE:{enumerable:true,writable:false,configurable:false,value:222}})});
Object.defineProperty(doodle,"GradientType",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{LINEAR:{enumerable:true,writable:false,configurable:false,value:"linearGradient"},RADIAL:{enumerable:true,writable:false,configurable:false,value:"radialGradient"}})});
Object.defineProperty(doodle,"Pattern",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{REPEAT:{enumerable:true,writable:false,configurable:false,value:"repeat"},REPEAT_X:{enumerable:true,writable:false,configurable:false,value:"repeat-x"},REPEAT_Y:{enumerable:true,writable:false,configurable:false,value:"repeat-y"},NO_REPEAT:{enumerable:true,writable:false,configurable:false,value:"no-repeat"}})});
Object.defineProperty(doodle,"LineCap",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BUTT:{enumerable:true,writable:false,configurable:false,value:"butt"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},SQUARE:{enumerable:true,writable:false,configurable:false,value:"square"}})});
Object.defineProperty(doodle,"LineJoin",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{MITER:{enumerable:true,writable:false,configurable:false,value:"miter"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},BEVEL:{enumerable:true,writable:false,configurable:false,value:"bevel"}})});
(function(){var s,v,i;doodle.events.Event=function(g,q,k){var t=Object.create(s),e=arguments.length,d,n;Object.defineProperties(t,v);Object.defineProperties(t,function(){var a,c,h,r=false,x=0,z=null,f=null,m=null,o=new Date,l=true,j=false,b=false;n=function(p,w,u){w=w===undefined?false:w;if(w!==false)f=z=w;else{z=p.currentTarget;f=p.target}a=u?u:p.type;c=p.bubbles;h=p.cancelable;r=p.cancelBubble;x=p.eventPhase;m=p.srcElement;o=p.timeStamp;l=p.returnValue;if(p.__cancel)j=true;if(p.__cancelNow)b=true};
return{type:{enumerable:true,configurable:false,get:function(){return a}},__setType:{enumerable:false,value:function(p){a=p}},bubbles:{enumerable:true,configurable:false,get:function(){return c}},cancelable:{enumerable:true,configurable:false,get:function(){return h}},cancelBubble:{enumerable:true,configurable:false,get:function(){return r},set:function(p){r=p}},__cancel:{enumerable:false,configurable:false,get:function(){return j}},__cancelNow:{enumerable:false,configurable:false,get:function(){return b}},
currentTarget:{enumerable:true,configurable:false,get:function(){return z}},__setCurrentTarget:{enumerable:false,value:function(p){z=p;return this}},target:{enumerable:true,configurable:false,get:function(){return f}},__setTarget:{enumerable:false,value:function(p){f=p;return this}},eventPhase:{enumerable:true,configurable:false,get:function(){return x}},__setEventPhase:{enumerable:false,value:function(p){x=p;return this}},srcElement:{enumerable:true,configurable:false,get:function(){return m}},timeStamp:{enumerable:true,
configurable:false,get:function(){return o}},returnValue:{enumerable:true,configurable:false,get:function(){return l}},initEvent:{enumerable:true,configurable:false,value:function(p,w,u){p=p===undefined?"undefined":p;w=w===undefined?false:w;u=u===undefined?false:u;a=p;c=w;h=u;return this}},preventDefault:{enumerable:true,configurable:false,value:function(){}},stopPropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)j=true;else throw Error(this+".stopPropagation: Event can not be cancelled.");
}},stopImmediatePropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)b=j=true;else throw Error(this+".stopImmediatePropagation: Event can not be cancelled.");}},__copyEventProperties:{enumerable:false,configurable:false,value:function(p,w,u){w=w===undefined?false:w;u=u===undefined?false:u;n(p,w,u);return this}}}}());if(e===1&&(typeof arguments[0]==="function"||i(arguments[0]))){d=arguments[0];g=undefined}if(d)typeof d==="function"?d.call(t):n(d,false,false);else t.initEvent(g,
q,k);return t};v={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Event]"}}};s=Object.create({},{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},MOUSEDOWN:{enumerable:true,writable:false,configurable:false,value:1},MOUSEUP:{enumerable:true,writable:false,configurable:false,value:2},MOUSEOVER:{enumerable:true,
writable:false,configurable:false,value:4},MOUSEOUT:{enumerable:true,writable:false,configurable:false,value:8},MOUSEMOVE:{enumerable:true,writable:false,configurable:false,value:16},MOUSEDRAG:{enumerable:true,writable:false,configurable:false,value:32},CLICK:{enumerable:true,writable:false,configurable:false,value:64},DBLCLICK:{enumerable:true,writable:false,configurable:false,value:128},KEYDOWN:{enumerable:true,writable:false,configurable:false,value:256},KEYUP:{enumerable:true,writable:false,configurable:false,
value:512},KEYPRESS:{enumerable:true,writable:false,configurable:false,value:1024},DRAGDROP:{enumerable:true,writable:false,configurable:false,value:2048},FOCUS:{enumerable:true,writable:false,configurable:false,value:4096},BLUR:{enumerable:true,writable:false,configurable:false,value:8192},SELECT:{enumerable:true,writable:false,configurable:false,value:16384},CHANGE:{enumerable:true,writable:false,configurable:false,value:32768}});i=doodle.events.Event.isEvent=function(g){if(!g||typeof g!=="object"||
typeof g.toString!=="function")return false;else g=g.toString();return g==="[object Event]"||g==="[object UIEvent]"||g==="[object MouseEvent]"||g==="[object TouchEvent]"||g==="[object KeyboardEvent]"||g==="[object TextEvent]"||g==="[object WheelEvent]"}})();
(function(){var s,v=doodle.events.Event.isEvent;doodle.events.UIEvent=function(i,g,q,k,t){var e,d,n;if(v(arguments[0])){d=arguments[0];i=undefined;e=Object.create(doodle.events.Event(d))}else if(typeof arguments[0]==="function"){d=arguments[0];i=undefined;e=Object.create(doodle.events.Event(""))}else{g=g===undefined?false:g;q=q===undefined?false:q;e=Object.create(doodle.events.Event(i,g,q))}Object.defineProperties(e,s);Object.defineProperties(e,function(){var a=null,c=0,h=0,r=0,x=0,z=0,f=0,m=0,o=
0;n=function(l){if(l.view!==undefined)a=l.view;if(l.detail!==undefined)c=l.detail;if(l.which!==undefined)h=l.which;if(l.charCode!==undefined)r=l.charCode;if(l.keyCode!==undefined)x=l.keyCode;if(l.layerX!==undefined)z=l.layerX;if(l.layerY!==undefined)f=l.layerY;if(l.pageX!==undefined)m=l.pageX;if(l.pageY!==undefined)o=l.pageY};return{view:{enumerable:true,configurable:false,get:function(){return a}},detail:{enumerable:true,configurable:false,get:function(){return c}},which:{enumerable:true,configurable:false,
get:function(){return h}},charCode:{enumerable:true,configurable:false,get:function(){return r}},keyCode:{enumerable:true,configurable:false,get:function(){return x}},layerX:{enumerable:true,configurable:false,get:function(){return z}},layerY:{enumerable:true,configurable:false,get:function(){return f}},pageX:{enumerable:true,configurable:false,get:function(){return m}},pageY:{enumerable:true,configurable:false,get:function(){return o}},initUIEvent:{value:function(l,j,b,p,w){j=j===undefined?false:
j;b=b===undefined?false:b;p=p===undefined?null:p;w=w===undefined?0:w;a=p;c=w;this.initEvent(l,j,b);return this}},__copyUIEventProperties:{enumerable:false,configurable:false,value:function(l,j,b){j=j===undefined?false:j;b=b===undefined?false:b;n(l);return this.__copyEventProperties(l,j,b)}}}}());if(d)typeof d==="function"?d.call(e):n(d);else e.initUIEvent(i,g,q,k,t);return e};s={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object UIEvent]"}}};doodle.events.UIEvent.isUIEvent=
function(i){if(!i||typeof i!=="object"||typeof i.toString!=="function")return false;else i=i.toString();return i==="[object UIEvent]"||i==="[object MouseEvent]"||i==="[object TouchEvent]"||i==="[object KeyboardEvent]"||i==="[object TextEvent]"||i==="[object WheelEvent]"}})();
(function(){var s,v=doodle.events.Event.isEvent;doodle.events.MouseEvent=function(i,g,q,k,t,e,d,n,a,c,h,r,x,z,f){var m,o,l;if(v(arguments[0])){o=arguments[0];i=undefined;m=Object.create(doodle.events.UIEvent(o))}else if(typeof arguments[0]==="function"){o=arguments[0];i=undefined;m=Object.create(doodle.events.UIEvent(""))}else{g=g===undefined?false:g;q=q===undefined?false:q;k=k===undefined?null:k;t=t===undefined?0:t;m=Object.create(doodle.events.UIEvent(i,g,q,k,t))}Object.defineProperties(m,s);Object.defineProperties(m,
function(){var j=0,b=0,p=0,w=0,u=0,A=0,F=0,G=0,C=false,H=false,J=false,L=false,O=0,P=null;l=function(E){j=E.x!==undefined?E.x:0;b=E.y!==undefined?E.y:0;p=E.offsetX!==undefined?E.offsetX:0;w=E.offsetY!==undefined?E.offsetY:0;if(E.screenX!==undefined)u=E.screenX;if(E.screenY!==undefined)A=E.screenY;if(E.clientX!==undefined)F=E.clientX;if(E.clientY!==undefined)G=E.clientY;if(E.ctrlKey!==undefined)C=E.ctrlKey;if(E.altKey!==undefined)H=E.altKey;if(E.shiftKey!==undefined)J=E.shiftKey;if(E.metaKey!==undefined)L=
E.metaKey;if(E.button!==undefined)O=E.button;if(E.relatedTarget!==undefined)P=E.relatedTarget};return{x:{enumerable:true,configurable:false,get:function(){return j}},y:{enumerable:true,configurable:false,get:function(){return b}},screenX:{enumerable:true,configurable:false,get:function(){return u}},screenY:{enumerable:true,configurable:false,get:function(){return A}},clientX:{enumerable:true,configurable:false,get:function(){return F}},clientY:{enumerable:true,configurable:false,get:function(){return G}},
offsetX:{enumerable:true,configurable:false,get:function(){return p}},offsetY:{enumerable:true,configurable:false,get:function(){return w}},ctrlKey:{enumerable:true,configurable:false,get:function(){return C}},altKey:{enumerable:true,configurable:false,get:function(){return H}},shiftKey:{enumerable:true,configurable:false,get:function(){return J}},metaKey:{enumerable:true,configurable:false,get:function(){return L}},button:{enumerable:true,configurable:false,get:function(){return O}},relatedTarget:{enumerable:true,
configurable:false,get:function(){return P}},initMouseEvent:{value:function(E,K,B,M,N,S,T,U,Q,V,y,D,I,R,W){K=K===undefined?false:K;B=B===undefined?false:B;M=M===undefined?null:M;N=N===undefined?0:N;S=S===undefined?0:S;T=T===undefined?0:T;U=U===undefined?0:U;Q=Q===undefined?0:Q;V=V===undefined?false:V;y=y===undefined?false:y;D=D===undefined?false:D;I=I===undefined?false:I;R=R===undefined?0:R;f=W===undefined?null:W;u=S;A=T;F=U;G=Q;C=V;H=y;J=D;L=I;O=R;P=W;return this.initUIEvent(E,K,B,M,N)}},getModifierState:{value:function(E){switch(E){case "Alt":return H;
case "Control":return C;case "Meta":return L;case "Shift":return J;default:return false}}},__copyMouseEventProperties:{enumerable:false,configurable:false,value:function(E,K,B){K=K===undefined?false:K;B=B===undefined?false:B;l(E);return this.__copyUIEventProperties(E,K,B)}}}}());if(o)typeof o==="function"?o.call(m):l(o);else m.initMouseEvent(i,g,q,k,t,e,d,n,a,c,h,r,x,z,f);return m};s={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object MouseEvent]"}}};doodle.events.MouseEvent.isMouseEvent=
function(i){if(!i||typeof i!=="object"||typeof i.toString!=="function")return false;else i=i.toString();return i==="[object MouseEvent]"}})();
(function(){var s,v=doodle.events.Event.isEvent;doodle.events.TouchEvent=function(i,g,q,k,t,e,d,n,a,c,h,r,x,z,f,m,o,l){var j,b,p;if(v(arguments[0])){b=arguments[0];i=undefined;j=Object.create(doodle.events.UIEvent(b))}else if(typeof arguments[0]==="function"){b=arguments[0];i=undefined;j=Object.create(doodle.events.UIEvent(""))}else{g=g===undefined?false:g;q=q===undefined?false:q;k=k===undefined?null:k;t=t===undefined?0:t;j=Object.create(doodle.events.UIEvent(i,g,q,k,t))}Object.defineProperties(j,
s);Object.defineProperties(j,function(){var w=0,u=0,A=0,F=0,G=false,C=false,H=false,J=false,L=null,O=null,P=null,E=1,K=0;p=function(B){if(B.screenX!==undefined)w=B.screenX;if(B.screenY!==undefined)u=B.screenY;if(B.clientX!==undefined)A=B.clientX;if(B.clientY!==undefined)F=B.clientY;if(B.ctrlKey!==undefined)G=B.ctrlKey;if(B.altKey!==undefined)C=B.altKey;if(B.shiftKey!==undefined)H=B.shiftKey;if(B.metaKey!==undefined)J=B.metaKey;if(B.touches!==undefined)L=B.touches;if(B.targetTouches!==undefined)O=
B.targetTouches;if(B.changedTouches!==undefined)P=B.changedTouches;if(B.scale!==undefined)E=B.scale;if(B.rotation!==undefined)K=B.rotation};return{screenX:{enumerable:true,configurable:false,get:function(){return w}},screenY:{enumerable:true,configurable:false,get:function(){return u}},clientX:{enumerable:true,configurable:false,get:function(){return A}},clientY:{enumerable:true,configurable:false,get:function(){return F}},ctrlKey:{enumerable:true,configurable:false,get:function(){return G}},altKey:{enumerable:true,
configurable:false,get:function(){return C}},shiftKey:{enumerable:true,configurable:false,get:function(){return H}},metaKey:{enumerable:true,configurable:false,get:function(){return J}},touches:{enumerable:true,configurable:false,get:function(){return L}},targetTouches:{enumerable:true,configurable:false,get:function(){return O}},changedTouches:{enumerable:true,configurable:false,get:function(){return P}},scale:{enumerable:true,configurable:false,get:function(){return E}},rotation:{enumerable:true,
configurable:false,get:function(){return K}},initTouchEvent:{value:function(B,M,N,S,T,U,Q,V,y,D,I,R,W,X,Y,Z,$,aa){M=M===undefined?false:M;N=N===undefined?false:N;S=S===undefined?null:S;T=T===undefined?0:T;U=U===undefined?0:U;Q=Q===undefined?0:Q;V=V===undefined?0:V;y=y===undefined?0:y;D=D===undefined?false:D;I=I===undefined?false:I;R=R===undefined?false:R;W=W===undefined?false:W;X=X===undefined?null:X;Y=Y===undefined?null:Y;Z=Z===undefined?null:Z;$=$===undefined?1:$;aa=aa===undefined?0:aa;w=U;u=Q;
A=V;F=y;G=D;C=I;H=R;J=W;L=X;O=Y;P=Z;E=$;K=aa;this.initUIEvent(B,M,N,S,T);return this}},getModifierState:{value:function(B){switch(B){case "Alt":return C;case "Control":return G;case "Meta":return J;case "Shift":return H;default:return false}}},__copyTouchEventProperties:{enumerable:false,configurable:false,value:function(B,M,N){M=M===undefined?false:M;N=N===undefined?false:N;p(B);return this.__copyUIEventProperties(B,M,N)}}}}());if(b)typeof b==="function"?b.call(j):p(b);else j.initTouchEvent(i,g,
q,k,t,e,d,n,a,c,h,r,x,z,f,m,o,l);return j};s={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TouchEvent]"}}};doodle.events.TouchEvent.isTouchEvent=function(i){if(!i||typeof i!=="object"||typeof i.toString!=="function")return false;else i=i.toString();return i==="[object TouchEvent]"}})();
(function(){var s,v=doodle.events.Event.isEvent;doodle.events.TextEvent=function(i,g,q,k,t,e){var d,n,a;if(v(arguments[0])){n=arguments[0];i=undefined;d=Object.create(doodle.events.UIEvent(n))}else if(typeof arguments[0]==="function"){n=arguments[0];i=undefined;d=Object.create(doodle.events.UIEvent(""))}else{g=g===undefined?false:g;q=q===undefined?false:q;k=k===undefined?null:k;d=Object.create(doodle.events.UIEvent(i,g,q,k))}Object.defineProperties(d,s);Object.defineProperties(d,function(){var c=
"",h=doodle.events.TextEvent.INPUT_METHOD_UNKNOWN;a=function(r){if(r.data!==undefined)c=r.data;if(r.inputMode!==undefined)h=r.inputMode};return{data:{enumerable:true,configurable:false,get:function(){return c}},inputMode:{enumerable:true,configurable:false,get:function(){return h}},initTextEvent:{value:function(r,x,z,f,m,o){x=x===undefined?false:x;z=z===undefined?false:z;f=f===undefined?null:f;m=m===undefined?"":m;o=o===undefined?doodle.events.TextEvent.INPUT_METHOD_UNKNOWN:o;c=m;h=o;this.initUIEvent(r,
x,z,f);return this}},__copyTextEventProperties:{enumerable:false,configurable:false,value:function(r,x,z){x=x===undefined?false:x;z=z===undefined?false:z;a(r);return this.__copyUIEventProperties(r,x,z)}}}}());if(n)typeof n==="function"?n.call(d):a(n);else d.initTextEvent(i,g,q,k,t,e);return d};s={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TextEvent]"}}};doodle.events.TextEvent.isTextEvent=function(i){if(!i||typeof i!=="object"||typeof i.toString!==
"function")return false;else i=i.toString();return i==="[object TextEvent]"}})();
(function(){var s,v=doodle.events.Event.isEvent;doodle.events.KeyboardEvent=function(i,g,q,k,t,e,d,n){var a,c,h;if(v(arguments[0])){c=arguments[0];i=undefined;a=Object.create(doodle.events.UIEvent(c))}else if(typeof arguments[0]==="function"){c=arguments[0];i=undefined;a=Object.create(doodle.events.UIEvent(""))}else{g=g===undefined?false:g;q=q===undefined?false:q;k=k===undefined?null:k;a=Object.create(doodle.events.UIEvent(i,g,q,k))}Object.defineProperties(a,s);Object.defineProperties(a,function(){var r=
"",x=0,z=false,f=false,m=false,o=false,l=false;h=function(j){if(j.keyIdentifier!==undefined)r=j.keyIdentifier;if(j.keyLocation!==undefined)x=j.keyLocation;if(j.repeat!==undefined)z=j.repeat;if(j.ctrlKey!==undefined)f=j.ctrlKey;if(j.altKey!==undefined)m=j.altKey;if(j.shiftKey!==undefined)o=j.shiftKey;if(j.metaKey!==undefined)l=j.metaKey;if(j.altGraphKey!==undefined)m=j.altGraphKey};return{keyIdentifier:{enumerable:true,configurable:false,get:function(){return r}},keyLocation:{enumerable:true,configurable:false,
get:function(){return x}},repeat:{enumerable:true,configurable:false,get:function(){return z}},ctrlKey:{enumerable:true,configurable:false,get:function(){return f}},altKey:{enumerable:true,configurable:false,get:function(){return m}},shiftKey:{enumerable:true,configurable:false,get:function(){return o}},metaKey:{enumerable:true,configurable:false,get:function(){return l}},altGraphKey:{enumerable:true,configurable:false,get:function(){return false}},initKeyboardEvent:{value:function(j,b,p,w,u,A,F,
G){b=b===undefined?false:b;p=p===undefined?false:p;w=w===undefined?null:w;u=u===undefined?"":u;A=A===undefined?0:A;F=F===undefined?"":F;G=G===undefined?false:G;r=u;x=A;z=G;F.split(" ").forEach(function(C){switch(C){case "Alt":m=true;break;case "Control":f=true;break;case "Meta":l=true;break;case "Shift":o=true}});this.initUIEvent(j,b,p,w);return this}},getModifierState:{value:function(j){switch(j){case "Alt":return m;case "Control":return f;case "Meta":return l;case "Shift":return o;default:return false}}},
__copyKeyboardEventProperties:{enumerable:false,configurable:false,value:function(j,b,p){b=b===undefined?false:b;p=p===undefined?false:p;h(j);return this.__copyUIEventProperties(j,b,p)}}}}());if(c)typeof c==="function"?c.call(a):h(c);else a.initKeyboardEvent(i,g,q,k,t,e,d,n);return a};s={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object KeyboardEvent]"}}};doodle.events.KeyboardEvent.isKeyboardEvent=function(i){if(!i||typeof i!=="object"||typeof i.toString!==
"function")return false;else i=i.toString();return i==="[object KeyboardEvent]"}})();
Object.defineProperties(doodle.events.Event,{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},ADDED:{enumerable:true,writable:false,configurable:false,value:"added"},REMOVED:{enumerable:true,writable:false,configurable:false,value:"removed"},ENTER_FRAME:{enumerable:true,writable:false,configurable:false,value:"enterFrame"},LOAD:{enumerable:true,
writable:false,configurable:false,value:"load"},CHANGE:{enumerable:true,writable:false,configurable:false,value:"change"}});Object.defineProperties(doodle.events.UIEvent,{FOCUS_IN:{enumerable:true,writable:false,configurable:false,value:"focusIn"}});
Object.defineProperties(doodle.events.MouseEvent,{CLICK:{enumerable:true,writable:false,configurable:false,value:"click"},DOUBLE_CLICK:{enumerable:true,writable:false,configurable:false,value:"dblclick"},CONTEXT_MENU:{enumerable:true,writable:false,configurable:false,value:"contextmenu"},MOUSE_DOWN:{enumerable:true,writable:false,configurable:false,value:"mousedown"},MOUSE_UP:{enumerable:true,writable:false,configurable:false,value:"mouseup"},MOUSE_WHEEL:{enumerable:true,writable:false,configurable:false,
value:"mousewheel"},MOUSE_MOVE:{enumerable:true,writable:false,configurable:false,value:"mousemove"},MOUSE_OUT:{enumerable:true,writable:false,configurable:false,value:"mouseout"},MOUSE_OVER:{enumerable:true,writable:false,configurable:false,value:"mouseover"},MOUSE_ENTER:{enumerable:true,writable:false,configurable:false,value:"mouseenter"},MOUSE_LEAVE:{enumerable:true,writable:false,configurable:false,value:"mouseleave"}});
Object.defineProperties(doodle.events.TouchEvent,{TOUCH_START:{enumerable:true,writable:false,configurable:false,value:"touchstart"},TOUCH_MOVE:{enumerable:true,writable:false,configurable:false,value:"touchmove"},TOUCH_END:{enumerable:true,writable:false,configurable:false,value:"touchend"},TOUCH_CANCEL:{enumerable:true,writable:false,configurable:false,value:"touchcancel"}});
Object.defineProperties(doodle.events.KeyboardEvent,{KEY_PRESS:{enumerable:true,writable:false,configurable:false,value:"keypress"},KEY_UP:{enumerable:true,writable:false,configurable:false,value:"keyup"},KEY_DOWN:{enumerable:true,writable:false,configurable:false,value:"keydown"},KEY_LOCATION_STANDARD:{enumerable:true,writable:false,configurable:false,value:0},KEY_LOCATION_LEFT:{enumerable:true,writable:false,configurable:false,value:1},KEY_LOCATION_RIGHT:{enumerable:true,writable:false,configurable:false,
value:2},KEY_LOCATION_NUMPAD:{enumerable:true,writable:false,configurable:false,value:3},KEY_LOCATION_MOBILE:{enumerable:true,writable:false,configurable:false,value:4},KEY_LOCATION_JOYSTICK:{enumerable:true,writable:false,configurable:false,value:5}});
Object.defineProperties(doodle.events.TextEvent,{TEXT_INPUT:{enumerable:true,writable:false,configurable:false,value:"textInput"},INPUT_METHOD_UNKNOWN:{enumerable:true,writable:false,configurable:false,value:0},INPUT_METHOD_KEYBOARD:{enumerable:true,writable:false,configurable:false,value:1},INPUT_METHOD_PASTE:{enumerable:true,writable:false,configurable:false,value:2},INPUT_METHOD_DROP:{enumerable:true,writable:false,configurable:false,value:3},INPUT_METHOD_IME:{enumerable:true,writable:false,configurable:false,
value:4},INPUT_METHOD_OPTION:{enumerable:true,writable:false,configurable:false,value:5},INPUT_METHOD_HANDWRITING:{enumerable:true,writable:false,configurable:false,value:6},INPUT_METHOD_VOICE:{enumerable:true,writable:false,configurable:false,value:7},INPUT_METHOD_MULTIMODAL:{enumerable:true,writable:false,configurable:false,value:8},INPUT_METHOD_SCRIPT:{enumerable:true,writable:false,configurable:false,value:9}});
(function(){var s,v,i=Array(2),g={x:0,y:0},q,k=Math.cos,t=Math.sin,e=Math.sqrt;q=doodle.geom.Point=function(d,n){var a={},c=arguments.length;Object.defineProperties(a,s);Object.defineProperties(a,function(){var h=0,r=0;return{x:{enumerable:true,configurable:false,get:function(){return h},set:function(x){h=x}},y:{enumerable:true,configurable:false,get:function(){return r},set:function(x){r=x}},__toArray:{enumerable:false,writable:false,configurable:false,value:function(){i[0]=h;i[1]=r;return i}}}}());
switch(c){case 2:a.compose(d,n);break;case 1:c=arguments[0];d=undefined;if(typeof c==="function")c.call(a);else Array.isArray(c)?a.compose.apply(a,c):a.compose(c.x,c.y)}return a};s={length:{enumerable:true,configurable:false,get:function(){return v(g,this)}},toArray:{enumerable:true,writable:false,configurable:false,value:function(){return this.__toArray().concat()}},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+")"}},compose:{enumerable:true,
writable:false,configurable:false,value:function(d,n){this.x=d;this.y=n;return this}},clone:{enumerable:true,writable:false,configurable:false,value:function(){return q(this.x,this.y)}},equals:{enumerable:true,writable:false,configurable:false,value:function(d){return this&&d&&this.x===d.x&&this.y===d.y||!this&&!d}},add:{enumerable:true,writable:false,configurable:false,value:function(d){return q(this.x+d.x,this.y+d.y)}},subtract:{enumerable:true,writable:false,configurable:false,value:function(d){return q(this.x-
d.x,this.y-d.y)}},offset:{enumerable:true,writable:false,configurable:false,value:function(d,n){this.x+=d;this.y+=n;return this}},normalize:{enumerable:true,writable:false,configurable:false,value:function(d){this.x=this.x/this.length*d;this.y=this.y/this.length*d;return this}},interpolate:{enumerable:true,writable:false,configurable:false,value:function(d,n,a){return q(d.x+(n.x-d.x)*a,d.y+(n.y-d.y)*a)}},polar:{enumerable:true,writable:false,configurable:false,value:function(d,n){return q(d*k(n),
d*t(n))}}};v=doodle.geom.Point.distance=function(d,n){var a=n.x-d.x,c=n.y-d.y;return e(a*a+c*c)};doodle.geom.Point.isPoint=function(d){return d&&typeof d.x==="number"&&typeof d.y==="number"}})();
(function(){var s,v=Array(6),i={x:null,y:null},g={a:null,b:null,c:null,d:null,tx:null,ty:null},q,k=doodle.geom.Point,t=Math.sin,e=Math.cos,d=Math.atan2,n=Math.tan;q=doodle.geom.Matrix=function(a,c,h,r,x,z){var f={},m=arguments.length;Object.defineProperties(f,s);Object.defineProperties(f,function(){var o=1,l=0,j=0,b=1,p=0,w=0;return{a:{enumerable:true,configurable:false,get:function(){return o},set:function(u){o=u}},b:{enumerable:true,configurable:false,get:function(){return l},set:function(u){l=
u}},c:{enumerable:true,configurable:false,get:function(){return j},set:function(u){j=u}},d:{enumerable:true,configurable:false,get:function(){return b},set:function(u){b=u}},tx:{enumerable:true,configurable:false,get:function(){return p},set:function(u){p=u}},ty:{enumerable:true,configurable:false,get:function(){return w},set:function(u){w=u}},__toArray:{enumerable:false,writable:false,configurable:false,value:function(){v[0]=o;v[1]=l;v[2]=j;v[3]=b;v[4]=p;v[5]=w;return v}}}}());switch(m){case 6:f.compose(a,
c,h,r,x,z);break;case 1:m=arguments[0];a=undefined;if(typeof m==="function")m.call(f);else Array.isArray(m)?f.compose.apply(f,m):f.compose(m.a,m.b,m.c,m.d,m.tx,m.ty)}return f};s={compose:{enumerable:true,writable:false,configurable:false,value:function(a,c,h,r,x,z){this.a=a;this.b=c;this.c=h;this.d=r;this.tx=x;this.ty=z;return this}},toArray:{enumerable:true,writable:false,configurable:false,value:function(){return this.__toArray().concat()}},toString:{enumerable:true,writable:false,configurable:false,
value:function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}},equals:{enumerable:true,writable:false,configurable:false,value:function(a){return this&&a&&this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d&&this.tx===a.tx&&this.ty===a.ty||!this&&!a}},identity:{enumerable:true,writable:false,configurable:false,value:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this}},clone:{enumerable:true,writable:false,configurable:false,
value:function(){return q(this.a,this.b,this.c,this.d,this.tx,this.ty)}},multiply:{enumerable:true,writable:false,configurable:false,value:function(a){return this.compose(this.a*a.a+this.c*a.b,this.b*a.a+this.d*a.b,this.a*a.c+this.c*a.d,this.b*a.c+this.d*a.d,this.a*a.tx+this.c*a.ty+this.tx,this.b*a.tx+this.d*a.ty+this.ty)}},rotate:{enumerable:true,writable:false,configurable:false,value:function(a){var c=e(a);a=t(a);g.a=c;g.b=a;g.c=-a;g.d=c;g.tx=0;g.ty=0;return this.multiply(g)}},deltaRotate:{enumerable:true,
writable:false,configurable:false,value:function(a){var c=this.tx,h=this.ty;this.rotate(a);this.tx=c;this.ty=h;return this}},rotation:{enumerable:true,configurable:false,get:function(){return d(this.b,this.a)},set:function(a){var c=e(a);a=t(a);this.compose(c,a,-a,c,this.tx,this.ty)}},scale:{enumerable:true,writable:false,configurable:false,value:function(a,c){g.a=a;g.b=0;g.c=0;g.d=c;g.tx=0;g.ty=0;return this.multiply(g)}},deltaScale:{enumerable:true,writable:false,configurable:false,value:function(a,
c){var h=this.tx,r=this.ty;this.scale(a,c);this.tx=h;this.ty=r;return this}},translate:{enumerable:true,writable:false,configurable:false,value:function(a,c){this.tx+=a;this.ty+=c;return this}},skew:{enumerable:true,writable:false,configurable:false,value:function(a,c){var h=n(a),r=n(c);g.a=1;g.b=r;g.c=h;g.d=1;g.tx=0;g.ty=0;return this.multiply(g)}},deltaSkew:{enumerable:true,writable:false,configurable:false,value:function(a,c){var h=this.tx,r=this.ty;this.skew(a,c);this.tx=h;this.ty=r;return this}},
add:{enumerable:true,writable:false,configurable:false,value:function(a){this.a+=a.a;this.b+=a.b;this.c+=a.c;this.d+=a.d;this.tx+=a.tx;this.ty+=a.ty;return this}},invert:{enumerable:true,writable:false,configurable:false,value:function(){var a=this.a*this.d-this.b*this.c;return this.compose(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.ty*this.c-this.d*this.tx)/a,-(this.ty*this.a-this.b*this.tx)/a)}},transformPoint:{enumerable:true,writable:false,configurable:false,value:function(a){return k(this.a*
a.x+this.c*a.y+this.tx,this.b*a.x+this.d*a.y+this.ty)}},__transformPoint:{enumerable:false,writable:false,configurable:false,value:function(a){var c=a.x,h=a.y;a.x=this.a*c+this.c*h+this.tx;a.y=this.b*c+this.d*h+this.ty;return a}},deltaTransformPoint:{enumerable:true,writable:false,configurable:false,value:function(a){return k(this.a*a.x+this.c*a.y,this.b*a.x+this.d*a.y)}},__deltaTransformPoint:{enumerable:false,writable:false,configurable:false,value:function(a){var c=a.x,h=a.y;a.x=this.a*c+this.c*
h;a.y=this.b*c+this.d*h;return a}},rotateAroundExternalPoint:{enumerable:true,writable:false,configurable:false,value:function(a,c){var h=e(c),r=t(c);g.a=h;g.b=r;g.c=-r;g.d=h;g.tx=0;g.ty=0;this.translate(-a.x,-a.y);i.x=g.a*this.tx+g.c*this.ty+g.tx;i.y=g.b*this.tx+g.d*this.ty+g.ty;this.tx=i.x;this.ty=i.y;return this.multiply(g).translate(a.x,a.y)}},rotateAroundInternalPoint:{enumerable:true,writable:false,configurable:false,value:function(a,c){i.x=this.a*a.x+this.c*a.y+this.tx;i.y=this.b*a.x+this.d*
a.y+this.ty;return this.rotateAroundExternalPoint(i,c)}},matchInternalPointWithExternal:{enumerable:true,writable:false,configurable:false,value:function(a,c){i.x=this.a*a.x+this.c*a.y+this.tx;i.y=this.b*a.x+this.d*a.y+this.ty;return this.translate(c.x-i.x,c.y-i.y)}},interpolate:{enumerable:true,writable:false,configurable:false,value:function(a,c){this.a+=(a.a-this.a)*c;this.b+=(a.b-this.b)*c;this.c+=(a.c-this.c)*c;this.d+=(a.d-this.d)*c;this.tx+=(a.tx-this.tx)*c;this.ty+=(a.ty-this.ty)*c;return this}}};
doodle.geom.Matrix.isMatrix=function(a){return a!==undefined&&a!==null&&typeof a.a==="number"&&typeof a.b==="number"&&typeof a.c==="number"&&typeof a.d==="number"&&typeof a.tx==="number"&&typeof a.ty==="number"}})();
(function(){var s,v=Array(4),i,g=Math.max,q=Math.min;i=doodle.geom.Rectangle=function(k,t,e,d){var n={},a=arguments.length;Object.defineProperties(n,s);Object.defineProperties(n,function(){var c=0,h=0,r=0,x=0;return{x:{enumerable:true,configurable:false,get:function(){return c},set:function(z){c=z}},y:{enumerable:true,configurable:false,get:function(){return h},set:function(z){h=z}},width:{enumerable:true,configurable:false,get:function(){return r},set:function(z){r=z}},height:{enumerable:true,configurable:false,
get:function(){return x},set:function(z){x=z}},__toArray:{enumerable:false,writable:false,configurable:false,value:function(){v[0]=c;v[1]=h;v[2]=r;v[3]=x;return v}}}}());switch(a){case 4:n.compose(k,t,e,d);break;case 1:a=arguments[0];k=undefined;if(typeof a==="function")a.call(n);else Array.isArray(a)?n.compose.apply(n,a):n.compose(a.x,a.y,a.width,a.height)}return n};s={top:{enumerable:true,configurable:false,get:function(){return this.y},set:function(k){this.y=k;this.height-=k}},right:{enumerable:true,
configurable:false,get:function(){return this.x+this.width},set:function(k){this.width=k-this.x}},bottom:{enumerable:true,configurable:false,get:function(){return this.y+this.height},set:function(k){this.height=k-this.y}},left:{enumerable:true,configurable:false,get:function(){return this.x},set:function(k){this.x=k;this.width-=k}},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+")"}},toArray:{enumerable:true,
writable:false,configurable:false,value:function(){return this.__toArray().concat()}},compose:{enumerable:true,writable:false,configurable:false,value:function(k,t,e,d){this.x=k;this.y=t;this.width=e;this.height=d;return this}},__compose:{enumerable:false,writable:false,configurable:false,value:function(k){this.compose.apply(this,k.__toArray());return this}},clone:{enumerable:true,writable:false,configurable:false,value:function(){return i(this.x,this.y,this.width,this.height)}},offset:{enumerable:true,
writable:false,configurable:false,value:function(k,t){this.x+=k;this.y+=t;return this}},inflate:{enumerable:true,writable:false,configurable:false,value:function(k,t){this.x-=k;this.width+=2*k;this.y-=t;this.height+=2*t;return this}},equals:{enumerable:true,writable:false,configurable:false,value:function(k){return this.x===k.x&&this.y===k.y&&this.width===k.width&&this.height===k.height}},isEmpty:{enumerable:true,writable:false,configurable:false,value:function(){return this.width>=0||this.height>=
0}},contains:{enumerable:false,writable:false,configurable:false,value:function(k,t){return k>=this.left&&k<=this.right&&t>=this.top&&t<=this.bottom}},containsPoint:{enumerable:true,writable:false,configurable:false,value:function(k){return this.contains(k.x,k.y)}},containsRect:{enumerable:true,writable:false,configurable:false,value:function(k){return this.contains(k.x,k.y)&&this.contains(k.right,k.y)&&this.contains(k.right,k.bottom)&&this.contains(k.x,k.bottom)}},intersects:{enumerable:true,writable:false,
configurable:false,value:function(k){return this.contains(k.x,k.y)||this.contains(k.right,k.y)||this.contains(k.right,k.bottom)||this.contains(k.x,k.bottom)}},intersection:{enumerable:true,writable:false,configurable:false,value:function(k){var t=i(0,0,0,0);if(this.intersects(k)){t.left=g(this.left,k.left);t.top=g(this.top,k.top);t.right=q(this.right,k.right);t.bottom=q(this.bottom,k.bottom)}return t}},__intersection:{enumerable:false,writable:false,configurable:false,value:function(k){if(this.intersects(k)){this.left=
g(this.left,k.left);this.top=g(this.top,k.top);this.right=q(this.right,k.right);this.bottom=q(this.bottom,k.bottom)}return this}},union:{enumerable:true,writable:false,configurable:false,value:function(k){var t=i(0,0,0,0);t.left=q(this.left,k.left);t.top=q(this.top,k.top);t.right=g(this.right,k.right);t.bottom=g(this.bottom,k.bottom);return t}},__union:{enumerable:false,writable:false,configurable:false,value:function(k){var t=q(this.left,k.left),e=q(this.top,k.top),d=g(this.right,k.right);k=g(this.bottom,
k.bottom);this.left=t;this.top=e;this.right=d;this.bottom=k;return this}}};doodle.geom.Rectangle.isRect=function(k){return typeof k.x==="number"&&typeof k.y==="number"&&typeof k.width==="number"&&typeof k.height==="number"&&typeof k.top==="number"&&typeof k.bottom==="number"&&typeof k.left==="number"&&typeof k.right==="number"}})();
(function(){var s,v,i,g=doodle.events.Event.CAPTURING_PHASE,q=doodle.events.Event.AT_TARGET,k=doodle.events.Event.BUBBLING_PHASE,t=Array.prototype.indexOf,e=Array.prototype.splice;doodle.EventDispatcher=function(d){var n={};Object.defineProperties(n,s);Object.defineProperties(n,{eventListeners:function(){var a={};return{enumerable:true,configurable:false,get:function(){return a}}}()});typeof d==="function"&&d.call(n);return n};s={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object EventDispatcher]"}},
modify:{enumerable:true,writable:false,configurable:false,value:function(d){d.call(this);return this}},addEventListener:{enumerable:true,writable:false,configurable:false,value:function(d,n,a){a=a===undefined?false:a;var c=this.eventListeners;c.hasOwnProperty(d)||(c[d]={capture:[],bubble:[]});c[d][a?"capture":"bubble"].push(n);v.indexOf(this)===-1&&v.push(this)}},removeEventListener:{enumerable:true,writable:false,configurable:false,value:function(d,n,a){a=a===undefined?false:a;var c=this.eventListeners,
h=c.hasOwnProperty(d)?c[d]:false;if(h){a=h[a?"capture":"bubble"];e.call(a,t.call(a,n),1);h.capture.length===0&&h.bubble.length===0&&delete c[d];if(Object.keys(c).length===0){d=v;e.call(d,t.call(d,this),1)}}}},handleEvent:{enumerable:true,writable:false,configurable:false,value:function(d){var n=d.eventPhase===g?"capture":"bubble",a=this.eventListeners[d.type],c=0,h;if((a=a&&a[n])&&a.length>0){d.__setCurrentTarget(this);c=a.length;for(h=0;h<c;h+=1){n=a[h].call(this,d);if(n===false||d.returnValue===
false)d.__cancel||d.stopPropagation();if(d.__cancelNow)break}}return c>0?true:false}},dispatchEvent:{enumerable:true,writable:false,configurable:false,value:function(d){var n,a=d.type,c=Object.prototype.hasOwnProperty,h=c.call(this.eventListeners,a),r,x=[];if(d.__cancel)return false;d.target||d.__setTarget(this);n=d.target;for(r=n.parent||null;r;){h||(h=c.call(r.eventListeners,a));x.push(r);r=r.parent}if(!h)return true;d.__setEventPhase(g);for(c=a=x.length;c--;){x[c].handleEvent(d);if(d.__cancel)return true}d.__setEventPhase(q);
n.handleEvent(d);if(d.__cancel)return true;if(!d.bubbles||d.cancelBubble)return true;d.__setEventPhase(k);for(c=0;c<a;c+=1){x[c].handleEvent(d);if(d.__cancel||d.cancelBubble)break}return true}},broadcastEvent:{enumerable:true,writable:false,configurable:false,value:function(d){var n=d.type,a=Object.prototype.hasOwnProperty,c=v,h=c.length;if(d.__cancel)throw Error(this+".broadcastEvent: Can not dispatch a cancelled event.");for(d.target||d.__setTarget(this);h--;){a.call(c[h].eventListeners,n)&&c[h].handleEvent(d);
if(d.__cancel)break}return true}},hasEventListener:{enumerable:true,writable:false,configurable:false,value:function(d){return this.eventListeners.hasOwnProperty(d)}},willTrigger:{enumerable:true,writable:false,configurable:false,value:function(d){if(this.eventListeners.hasOwnProperty(d))return true;for(var n=this.children,a=n?n.length:0;a--;)if(n[a].willTrigger(d))return true;return false}}};v=doodle.EventDispatcher.dispatcher_queue=[];i=doodle.EventDispatcher.isEventDispatcher=function(d){if(!d||
typeof d!=="object"||typeof d.toString!=="function")return false;return d.toString()==="[object EventDispatcher]"};doodle.EventDispatcher.inheritsEventDispatcher=function(d){for(;d;)if(i(d))return true;else{if(typeof d!=="object")break;d=Object.getPrototypeOf(d)}return false}})();
(function(){var s=0,v,i,g=doodle.events.Event(doodle.events.Event.ADDED,true),q=doodle.events.Event(doodle.events.Event.REMOVED,true),k=doodle.geom.Point,t=doodle.geom.Matrix,e=doodle.geom.Rectangle,d=doodle.utils.create_scene_path,n=Math.PI;doodle.Node=function(a){var c=Object.create(doodle.EventDispatcher());Object.defineProperties(c,v);Object.defineProperties(c,{id:function(){var h=typeof a==="string"?a:"node"+String("000"+s).slice(-3);s+=1;return{enumerable:true,configurable:true,get:function(){return h},
set:function(r){h=r}}}(),root:function(){var h=null;return{enumerable:true,configurable:true,get:function(){return h},set:function(r){h=r}}}(),parent:function(){var h=null;return{enumerable:true,configurable:true,get:function(){return h},set:function(r){h=r}}}(),children:function(){var h=[];return{enumerable:true,configurable:false,get:function(){return h}}}(),transform:function(){var h=t(1,0,0,1,0,0);return{enumerable:true,configurable:false,get:function(){return h},set:function(r){h=r}}}(),visible:function(){var h=
true;return{enumerable:true,configurable:true,get:function(){return h},set:function(r){h=r}}}(),alpha:function(){var h=1;return{enumerable:true,configurable:true,get:function(){return h},set:function(r){h=r>1?1:r<0?0:r}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(h){return this.__getBounds(h).clone()}},__getBounds:{enumerable:false,writable:true,configurable:false,value:function(){var h=e(0,0,0,0);return function(r){for(var x=null,z,f=this.children,m=f.length;m--;){z=
f[m].__getBounds(r);if(z!==null)if(x===null)x=h.__compose(z);else x.__union(z)}return x}}()}});if(typeof a==="function"){a.call(c);a=undefined}return c};v={x:{enumerable:true,configurable:false,get:function(){return this.transform.tx},set:function(a){this.transform.tx=a}},y:{enumerable:true,configurable:false,get:function(){return this.transform.ty},set:function(a){this.transform.ty=a}},rotate:{enumerable:true,configurable:false,value:function(a){this.transform.rotate(a*n/180)}},rotation:{enumerable:true,
configurable:true,get:function(){return this.transform.rotation*180/n},set:function(a){this.transform.rotation=a*n/180}},scaleX:{enumerable:true,configurable:false,get:function(){return this.transform.a},set:function(a){this.transform.a=a}},scaleY:{enumerable:true,configurable:false,get:function(){return this.transform.d},set:function(a){this.transform.d=a}},context:{enumerable:true,configurable:true,get:function(){for(var a=this.parent;a;){if(a.context)return a.context;a=a.parent}return null}},__allTransforms:{enumerable:false,
configurable:false,get:function(){var a=t(1,0,0,1,0,0);return function(){var c=this.parent;for(a.compose.apply(a,this.transform.__toArray());c;){a.multiply(c.transform);c=c.parent}return a}}()},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Node]"}},addChildAt:{enumerable:true,writable:false,configurable:false,value:function(a,c){var h=this.children,r=this.root,x=a.parent;if(h.indexOf(a)!==-1)return false;x!==null&&x!==this&&a.parent.removeChild(a);a.parent=
this;h.splice(c,0,a);if(r&&a.root!==r){r.__sortAllChildren();h=d(a,[]);for(x=h.length;x--;){a=h[x];a.root=r;a.dispatchEvent(g.__setTarget(null))}}return a}},addChild:{enumerable:true,writable:false,configurable:false,value:function(a){return this.addChildAt(a,this.children.length)}},removeChildAt:{enumerable:true,writable:false,configurable:false,value:function(a){var c=this.children,h=c[a],r=this.root,x=d(h,[]),z=x.length,f=z;if(r)for(;z--;)x[z].dispatchEvent(q.__setTarget(null));c.splice(a,1);for(h.parent=
null;f--;)x[f].root=null;r&&r.__sortAllChildren()}},removeChild:{enumerable:false,writable:false,configurable:false,value:function(a){this.removeChildAt(this.children.indexOf(a))}},removeChildById:{enumerable:true,writable:false,configurable:false,value:function(a){this.removeChild(this.getChildById(a))}},removeAllChildren:{enumerable:true,writable:false,configurable:false,value:function(){for(var a=this.children.length;a--;)this.removeChildAt(a)}},getChildById:{enumerable:true,writable:false,configurable:false,
value:function(a){for(var c=this.children,h=c.length,r=0;r<h;r++)if(c[r].id===a)return c[r];return null}},setChildIndex:{enumerable:true,writable:false,configurable:false,value:function(a,c){var h=this.children,r=h.indexOf(a);h.splice(r,1);h.splice(c,0,a)}},swapChildrenAt:{enumerable:true,writable:false,configurable:false,value:function(a,c){var h=this.children;h[a]=h.splice(c,1,h[a])[0]}},swapChildren:{enumerable:true,writable:false,configurable:false,value:function(a,c){var h=this.children;this.swapChildrenAt(h.indexOf(a),
h.indexOf(c))}},swapDepths:{enumerable:true,writable:false,configurable:false,value:function(a){var c=this.parent,h;h=c.children;c.swapChildrenAt(h.indexOf(this),h.indexOf(a))}},swapDepthAt:{enumerable:true,writable:false,configurable:false,value:function(a){var c=this.parent;c.swapChildrenAt(a,c.children.indexOf(this))}},contains:{enumerable:true,writable:false,configurable:false,value:function(a){return d(this,[]).indexOf(a)!==-1?true:false}},localToGlobal:{enumerable:true,writable:false,configurable:false,
value:function(a){var c=this.parent;for(a=this.transform.transformPoint(a);c;){c.transform.__transformPoint(a);c=c.parent}return a}},__localToGlobal:{enumerable:false,writable:false,configurable:false,value:function(a){for(var c=this;c;){c.transform.__transformPoint(a);c=c.parent}return a}},globalToLocal:{enumerable:true,writable:false,configurable:false,value:function(a){var c={x:0,y:0};this.__localToGlobal(c);return k(a.x-c.x,a.y-c.y)}},__globalToLocal:{enumerable:false,writable:false,configurable:false,
value:function(a){var c={x:0,y:0};this.__localToGlobal(c);a.x-=c.x;a.y-=c.y;return a}}};i=doodle.Node.isNode=function(a){if(!a||typeof a!=="object"||typeof a.toString!=="function")return false;return a.toString()==="[object Node]"};doodle.Node.inheritsNode=function(a){for(;a;)if(i(a))return true;else{if(typeof a!=="object")break;a=Object.getPrototypeOf(a)}return false}})();
(function(){var s,v,i=doodle.geom.Rectangle;doodle.Sprite=function(g){var q=Object.create(doodle.Node(typeof g==="string"?g:undefined));Object.defineProperties(q,s);Object.defineProperties(q,function(){var k=[],t={min_x:0,max_x:0,min_y:0,max_y:0};return{graphics:{enumerable:false,configurable:false,value:Object.create(doodle.Graphics.call(q,k,t))},width:function(){var e=0;return{enumerable:true,configurable:false,get:function(){return e},set:function(d){e=d}}}(),height:function(){var e=0;return{enumerable:true,
configurable:false,get:function(){return e},set:function(d){e=d}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(e){return this.__getBounds(e).clone()}},__getBounds:{enumerable:false,writable:true,configurable:false,value:function(){var e=i(0,0,0,0);return function(d){var n=this.children,a=n.length,c,h=this.width,r=this.height;c=Math.min;var x=Math.max,z={x:t.min_x,y:t.min_y},f={x:t.min_x+h,y:t.min_y};h={x:t.min_x+h,y:t.min_y+r};r={x:t.min_x,y:t.min_y+r};this.__localToGlobal(z);
this.__localToGlobal(f);this.__localToGlobal(h);this.__localToGlobal(r);d.__globalToLocal(z);d.__globalToLocal(f);d.__globalToLocal(h);d.__globalToLocal(r);e.left=c(z.x,f.x,h.x,r.x);e.right=x(z.x,f.x,h.x,r.x);e.top=c(z.y,f.y,h.y,r.y);for(e.bottom=x(z.y,f.y,h.y,r.y);a--;){c=n[a].__getBounds(d);c!==null&&e.__union(c)}return e}}()},hitTestObject:{enumerable:true,writable:true,configurable:false,value:function(e){return this.getBounds(this).intersects(e.getBounds(this))}},hitTestPoint:{enumerable:true,
writable:true,configurable:false,value:function(e){return this.getBounds(this).containsPoint(this.globalToLocal(e))}},__draw:{enumerable:false,writable:false,configurable:false,value:function(e){k.forEach(function(d){d.call(q,e)})}}}}());typeof g==="function"&&g.call(q);return q};s={rotation:function(){var g=180/Math.PI,q=Math.PI/180;return{enumerable:true,configurable:false,get:function(){return this.transform.rotation*g},set:function(k){this.transform.rotation=k*q}}}(),toString:{enumerable:false,
writable:false,configurable:false,value:function(){return"[object Sprite]"}},compose:{enumerable:false,writable:false,configurable:false,value:function(g,q,k,t){this.x=g;this.y=q;this.width=k;this.height=t;return this}}};v=doodle.Sprite.isSprite=function(g){if(!g||typeof g!=="object"||typeof g.toString!=="function")return false;return g.toString()==="[object Sprite]"};doodle.Sprite.inheritsSprite=function(g){for(;g;)if(v(g))return true;else{if(typeof g!=="object")break;g=Object.getPrototypeOf(g)}return false}})();
(function(){var s,v=doodle.utils.hex_to_rgb_str,i=doodle.utils.get_element,g=doodle.events.Event,q=doodle.GradientType.LINEAR,k=doodle.GradientType.RADIAL;doodle.Graphics=function(t,e){var d={},n=this,a=0,c=0,h=1,r=doodle.LineCap.BUTT,x=doodle.LineJoin.MITER,z=10;Object.defineProperties(d,s);Object.defineProperties(d,{lineWidth:{enumerable:true,configurable:false,get:function(){return h}},lineCap:{enumerable:true,configurable:false,get:function(){return r}},lineJoin:{enumerable:true,configurable:false,
get:function(){return x}},lineMiter:{enumerable:true,configurable:false,get:function(){return z}},draw:{enumerable:false,writable:false,configurable:false,value:function(f){t.push(f)}},clear:{enumerable:false,writable:false,configurable:false,value:function(){t.length=0;n.width=0;n.height=0;a=c=e.min_x=e.min_y=e.max_x=e.max_y=0}},rect:{enumerable:false,writable:false,configurable:false,value:function(f,m,o,l){e.min_x=Math.min(0,f,e.min_x);e.min_y=Math.min(0,m,e.min_y);e.max_x=Math.max(0,f,f+o,e.max_x);
e.max_y=Math.max(0,m,m+l,e.max_y);n.width=-e.min_x+e.max_x;n.height=-e.min_y+e.max_y;t.push(function(j){j.beginPath();j.rect(f,m,o,l);j.closePath();j.stroke()})}},circle:{enumerable:false,writable:false,configurable:false,value:function(f,m,o){e.min_x=Math.min(0,-o+f,e.min_x);e.min_y=Math.min(0,-o+m,e.min_y);e.max_x=Math.max(0,f,f+o,e.max_x);e.max_y=Math.max(0,m,m+o,e.max_y);n.width=-e.min_x+e.max_x;n.height=-e.min_y+e.max_y;t.push(function(l){l.beginPath();l.arc(f,m,o,0,6.283185307179586,true);l.closePath();
l.stroke()})}},ellipse:{enumerable:false,writable:false,configurable:false,value:function(f,m,o,l){l=l===undefined?o:l;var j=o/2,b=l/2,p=0.5522847498*j,w=0.5522847498*b;e.min_x=Math.min(0,-j+f,e.min_x);e.min_y=Math.min(0,-b+m,e.min_y);e.max_x=Math.max(0,f,f+j,e.max_x);e.max_y=Math.max(0,m,m+b,e.max_y);n.width=-e.min_x+e.max_x;n.height=-e.min_y+e.max_y;t.push(function(u){u.beginPath();u.moveTo(f+j,m);u.bezierCurveTo(f+j,m-w,f+p,m-b,f,m-b);u.bezierCurveTo(f-p,m-b,f-j,m-w,f-j,m);u.bezierCurveTo(f-j,
m+w,f-p,m+b,f,m+b);u.bezierCurveTo(f+p,m+b,f+j,m+w,f+j,m);u.closePath();u.stroke()})}},roundRect:{enumerable:false,writable:false,configurable:false,value:function(f,m,o,l,j,b){j=j===undefined?0:j;b=b===undefined?0:b;var p=f+o,w=p-j,u=f+j,A=m+l,F=A-b,G=m+b;e.min_x=Math.min(0,f,e.min_x);e.min_y=Math.min(0,m,e.min_y);e.max_x=Math.max(0,f,f+o,e.max_x);e.max_y=Math.max(0,m,m+l,e.max_y);n.width=-e.min_x+e.max_x;n.height=-e.min_y+e.max_y;t.push(function(C){C.beginPath();C.moveTo(u,m);C.beginPath();C.lineTo(w,
m);C.quadraticCurveTo(p,m,p,G);C.lineTo(p,F);C.quadraticCurveTo(p,A,w,A);C.lineTo(u,A);C.quadraticCurveTo(f,A,f,F);C.lineTo(f,G);C.quadraticCurveTo(f,m,u,m);C.closePath();C.stroke()})}},moveTo:{enumerable:false,writable:false,configurable:false,value:function(f,m){t.push(function(o){o.moveTo(f,m)});a=f;c=m}},lineTo:{enumerable:false,writable:false,configurable:false,value:function(f,m){e.min_x=Math.min(0,f,a,e.min_x);e.min_y=Math.min(0,m,c,e.min_y);e.max_x=Math.max(0,f,a,e.max_x);e.max_y=Math.max(0,
m,c,e.max_y);n.width=e.max_x-e.min_x;n.height=e.max_y-e.min_y;t.push(function(o){o.lineTo(f,m)});a=f;c=m}},curveTo:{enumerable:false,writable:false,configurable:false,value:function(f,m){var o=a,l=c,j=f.x,b=f.y,p=m.x,w=m.y,u,A=0,F=0;u=(o-j)/(o-2*j+p);if(0<=u&&u<=1)A=(1-u)*(1-u)*o+2*(1-u)*u*j+u*u*p;u=(l-b)/(l-2*b+w);if(0<=u&&u<=1)F=(1-u)*(1-u)*l+2*(1-u)*u*b+u*u*w;e.min_x=Math.min(0,o,A,p,e.min_x);e.min_y=Math.min(0,l,F,w,e.min_y);e.max_x=Math.max(0,o,A,p,e.max_x);e.max_y=Math.max(0,l,F,w,e.max_y);
n.width=-e.min_x+e.max_x;n.height=-e.min_y+e.max_y;t.push(function(G){G.quadraticCurveTo(j,b,p,w)});a=p;c=w}},bezierCurveTo:{enumerable:false,writable:false,configurable:false,value:function(f,m,o){var l=Math.pow,j=Math.max,b=Math.min,p=a,w=c,u=f.x,A=f.y,F=m.x,G=m.y,C=o.x,H=o.y,J,L=o=m=0,O=0;for(f=0.1;f<1;f+=0.1){J=l(1-f,3)*p+3*l(1-f,2)*f*u+3*l(1-f,1)*l(f,2)*F+l(f,3)*C;if(J>m)m=J;if(J<o)o=J;J=l(1-f,3)*w+3*l(1-f,2)*f*A+3*l(1-f,1)*l(f,2)*G+l(f,3)*H;if(J>L)L=J;if(J<O)O=J}e.min_x=b(0,p,o,C,e.min_x);e.min_y=
b(0,w,O,H,e.min_y);e.max_x=j(0,p,m,C,e.max_x);e.max_y=j(0,w,L,H,e.max_y);n.width=-e.min_x+e.max_x;n.height=-e.min_y+e.max_y;t.push(function(P){P.bezierCurveTo(u,A,F,G,C,H)});a=C;c=H}},beginFill:{enumerable:false,writable:false,configurable:false,value:function(f,m){m=m===undefined?1:m;t.push(function(o){o.fillStyle=v(f,m)})}},beginGradientFill:{enumerable:true,writable:false,configurable:false,value:function(f,m,o,l,j,b){t.push(function(p){var w=doodle.utils.hex_to_rgb_str,u,A=l.length,F=0;if(f===
q)u=p.createLinearGradient(m.x,m.y,o.x,o.y);else if(f===k)u=p.createRadialGradient(m.x,m.y,m.radius,o.x,o.y,o.radius);else throw new TypeError(n+".graphics.beginGradientFill(*type*, point1, point2, ratios, colors, alphas): Unknown gradient type.");for(;F<A;F+=1)u.addColorStop(l[F],w(j[F],b[F]));p.fillStyle=u})}},beginPatternFill:{enumerable:true,writable:false,configurable:false,value:function(f,m){var o=null,l;l=doodle.Pattern;m=m===undefined?l.REPEAT:m;if(typeof f==="string")if(f[0]==="#")f=i(f,
n+".graphics..beginPatternFill");else(function(){var j=encodeURI(f);f=new Image;f.src=j})();if(f.complete)o=f;else{f.onload=function(){o=f;n.dispatchEvent(g(g.LOAD))};l=function(){throw new URIError(n+".graphics.beginPatternFill(*image*,repeat): Unable to load "+f.src);};f.onerror=l;f.onabort=l}t.push(function(j){j.fillStyle=o?j.createPattern(o,m):"rgba(0,0,0,0)"})}},lineStyle:{enumerable:true,writable:false,configurable:false,value:function(f,m,o,l,j,b){f=f===undefined?1:f;m=m===undefined?"#000000":
m;o=o===undefined?1:o;l=l===undefined?doodle.LineCap.BUTT:l;j=j===undefined?doodle.LineJoin.MITER:j;b=b===undefined?10:b;h=f;x=j;r=l;z=b;if(typeof m==="string"||typeof m==="number")m=v(m,o);else throw new TypeError(n+".graphics.lineStyle(thickness,*color*,alpha,caps,joints,miterLimit): Color must be a hex value.");t.push(function(p){p.lineWidth=h;p.strokeStyle=m;p.lineCap=r;p.lineJoin=x;p.miterLimit=z})}},beginPath:{enumerable:false,writable:false,configurable:false,value:function(){t.push(function(f){f.beginPath();
f.moveTo(a,c)})}},closePath:{enumerable:false,writable:false,configurable:false,value:function(){t.push(function(f){f.closePath();f.stroke()});c=a=0}},endFill:{enumerable:false,writable:false,configurable:false,value:function(){t.push(function(f){f.fill()})}},stroke:{enumerable:false,writable:false,configurable:false,value:function(){t.push(function(f){f.stroke()});c=a=0}}});return d};s={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Graphics]"}}}})();
(function(){var s,v=/^url\((.*)\)/,i,g=doodle.geom.Rectangle,q=doodle.utils.rgb_str_to_hex,k=doodle.utils.hex_to_rgb_str,t=doodle.utils.get_element,e=doodle.utils.get_element_property,d=doodle.utils.set_element_property;doodle.ElementNode=function(n,a){var c=Object.create(doodle.Node(typeof a==="string"?a:undefined));Object.defineProperties(c,s);Object.defineProperties(c,function(){var h=null,r=c.id,x=c.alpha,z=c.visible,f=0,m=0,o=null,l=null,j="repeat";return{element:{enumerable:true,configurable:true,
get:function(){return h},set:function(b){if(b===null){if(h!==null){typeof this.__removeDomElement==="function"&&this.__removeDomElement(h);l=o=null;j="repeat";if(!this.parent)m=f=0}h=null}else{h=b=t(b);this.__addDomElement(h);if(b=e(h,"id"))r=b;else this.id=r;j=e(h,"backgroundRepeat")||j;o=(b=e(h,"backgroundColor",false,false))?q(b):o;b=e(h,"backgroundImage");l=(b=!b||b==="none"?null:l.match(v))?b[1]:l}}},id:{enumerable:true,configurable:true,get:function(){return r},set:function(b){r=d(this.element,
"id",b,"html")}},width:{enumerable:true,configurable:true,get:function(){return f},set:function(b){d(this.element,"width",b+"px");f=b}},height:{enumerable:true,configurable:true,get:function(){return m},set:function(b){d(this.element,"height",b+"px");m=b}},backgroundColor:{enumerable:true,configurable:true,get:function(){return o},set:function(b){if(typeof b==="number")b=k(b);d(this.element,"backgroundColor",b);o=q(e(this.element,"backgroundColor"))}},backgroundImage:{enumerable:true,configurable:true,
get:function(){return l},set:function(b){if(b){if(typeof b==="string"){if(b[0]==="#")b=t(b).src}else if(b&&b.tagName==="IMG")b=b.src;v.test(b)||(b="url("+encodeURI(b)+")");l=d(this.element,"backgroundImage",b)}else l=d(this.element,"backgroundImage",null)}},backgroundRepeat:{enumerable:true,configurable:true,get:function(){return j},set:function(b){j=d(this.element,"backgroundRepeat",b)}},alpha:{enumerable:true,configurable:true,get:function(){return x},set:function(b){d(this.element,"opacity",b)}},
visible:{enumerable:true,configurable:true,get:function(){return z},set:function(b){b?d(this.element,"visibility","visible"):d(this.element,"visibility","hidden");z=b}},__addDomElement:{enumerable:false,configurable:true,value:function(b){var p=e(b,"width","int")||b.width;b=e(b,"height","int")||b.height;if(typeof p==="number")f=p;if(typeof b==="number")m=b}},__getBounds:{enumerable:true,configurable:true,value:function(){var b=g(0,0,0,0);return function(p){var w=this.children,u=w.length,A,F=this.width,
G=this.height;A={x:0,y:0};var C={x:F,y:0};F={x:F,y:G};G={x:0,y:G};var H=Math.min,J=Math.max;this.__localToGlobal(A);this.__localToGlobal(C);this.__localToGlobal(F);this.__localToGlobal(G);p.__globalToLocal(A);p.__globalToLocal(C);p.__globalToLocal(F);p.__globalToLocal(G);b.left=H(A.x,C.x,F.x,G.x);b.right=J(A.x,C.x,F.x,G.x);b.top=H(A.y,C.y,F.y,G.y);for(b.bottom=J(A.y,C.y,F.y,G.y);u--;){A=w[u].__getBounds(p);A!==null&&b.__union(A)}return b}}()}}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]===
"function"){arguments[0].call(c);n=undefined}else c.element=n;break;case 2:if(n)c.element=n;break;default:throw new SyntaxError("[object ElementNode](element, id): Invalid number of parameters.");}return c};s={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object ElementNode]"}}};i=doodle.ElementNode.isElementNode=function(n){if(!n||typeof n!=="object"||typeof n.toString!=="function")return false;return n.toString()==="[object ElementNode]"};doodle.ElementNode.inheritsElementNode=
function(n){for(;n;)if(i(n))return true;else{if(typeof n!=="object")break;n=Object.getPrototypeOf(n)}return false}})();
(function(){var s,v=0,i,g=doodle.utils.set_element_property;doodle.Layer=function(q,k){var t=typeof q==="string"?q:"layer"+String("00"+v).slice(-2);t=Object.create(doodle.ElementNode(undefined,t));Object.defineProperties(t,s);Object.defineProperties(t,function(){var e=0,d=0,n=null;return{width:{enumerable:true,configurable:true,get:function(){return e},set:function(a){e=g(this.element,"width",a,"html")}},height:{enumerable:true,configurable:true,get:function(){return d},set:function(a){d=g(this.element,
"height",a,"html")}},context:{enumerable:true,configurable:true,get:function(){return n}},__addDomElement:{enumerable:false,writable:false,value:function(a){g(a,"position","absolute");if(this.parent){this.width=this.parent.width;this.height=this.parent.height}n=a.getContext("2d")}},__removeDomElement:{enumerable:false,writable:false,value:function(){n=null}}}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]==="function"){arguments[0].call(t);q=undefined}break;case 2:t.element=
k;break;default:throw new SyntaxError("[object Layer](id, element): Invalid number of parameters.");}if(t.element===null)t.element=document.createElement("canvas");v+=1;return t};s={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Layer]"}},__getBounds:{enumerable:true,configurable:true,value:function(){var q=doodle.geom.Rectangle(0,0,0,0);return function(){return q.compose(0,0,this.width,this.height)}}()}};i=doodle.Layer.isLayer=function(q){if(!q||typeof q!==
"object"||typeof q.toString!=="function")return false;return q.toString()==="[object Layer]"};doodle.Layer.inheritsLayer=function(q){for(;q;)if(i(q))return true;else{if(typeof q!=="object")break;q=Object.getPrototypeOf(q)}return false}})();
(function(){var s,v=0,i,g,q,k,t,e,d,n=doodle.utils.create_scene_path,a=doodle.Layer.isLayer,c=doodle.utils.get_element,h=doodle.utils.get_element_property,r=doodle.utils.set_element_property,x=doodle.Layer,z=doodle.events.Event(doodle.events.Event.ENTER_FRAME),f=doodle.events.MouseEvent(""),m=doodle.events.KeyboardEvent("");doodle.Display=function(o){var l,j;if(o&&typeof o!=="function"){o=c(o);j=h(o,"id")}j=typeof j==="string"?j:"display"+String("00"+v++).slice(-2);l=Object.create(doodle.ElementNode(undefined,
j));Object.defineProperties(l,s);Object.defineProperties(l,function(){function b(y){B(y,Q,L,L.length,O,P,K)}function p(y){var D,I;O=D=E?y.offsetX:y.clientX-C.offsetLeft;P=I=E?y.offsetY:y.clientY-C.offsetTop;M(y,Q,L,L.length,D,I,K)}function w(y){N(y,Q,L,H,H.length,K)}function u(y){S(y,V,K)}function A(){T(H,H.length,J,J.length,U,L,L.length,K)}var F=0,G=0,C=null,H=l.children,J=doodle.EventDispatcher.dispatcher_queue,L=[],O=0,P=0,E=document.createEvent("MouseEvent").offsetX!==undefined,K=l,B=k,M=t,N=
e,S=d,T=i,U=z,Q=f,V=m;K.addEventListener(doodle.events.Event.ADDED,A);K.addEventListener(doodle.events.Event.REMOVED,A);document.addEventListener(doodle.events.KeyboardEvent.KEY_PRESS,u,false);document.addEventListener(doodle.events.KeyboardEvent.KEY_DOWN,u,false);document.addEventListener(doodle.events.KeyboardEvent.KEY_UP,u,false);return{root:{enumerable:true,writable:false,configurable:false,value:K},mouseX:{enumerable:true,configurable:false,get:function(){return O}},mouseY:{enumerable:true,configurable:false,
get:function(){return P}},width:{get:function(){return F},set:function(y){var D=H.length;r(this.element,"width",y+"px");for(F=y;D--;)H[D].width=y;return y}},height:{get:function(){return G},set:function(y){var D=H.length;r(this.element,"height",y+"px");for(G=y;D--;)H[D].height=y;return y}},__addDomElement:{enumerable:false,writable:false,value:function(y){r(y,"position","relative");var D=h(y,"width","int",false)||y.width,I=h(y,"height","int",false)||y.height;if(typeof D==="number")this.width=D;if(typeof I===
"number")this.height=I;y.addEventListener(doodle.events.MouseEvent.MOUSE_MOVE,p,false);y.addEventListener(doodle.events.MouseEvent.MOUSE_OUT,w,false);y.addEventListener(doodle.events.MouseEvent.CLICK,b,false);y.addEventListener(doodle.events.MouseEvent.DOUBLE_CLICK,b,false);y.addEventListener(doodle.events.MouseEvent.MOUSE_DOWN,b,false);y.addEventListener(doodle.events.MouseEvent.MOUSE_UP,b,false);y.addEventListener(doodle.events.MouseEvent.CONTEXT_MENU,b,false);y.addEventListener(doodle.events.MouseEvent.MOUSE_WHEEL,
b,false);C=y}},__removeDomElement:{enumerable:false,writable:false,value:function(y){y.removeEventListener(doodle.events.MouseEvent.MOUSE_MOVE,p,false);y.removeEventListener(doodle.events.MouseEvent.MOUSE_OUT,w,false);y.removeEventListener(doodle.events.MouseEvent.CLICK,b,false);y.removeEventListener(doodle.events.MouseEvent.DOUBLE_CLICK,b,false);y.removeEventListener(doodle.events.MouseEvent.MOUSE_DOWN,b,false);y.removeEventListener(doodle.events.MouseEvent.MOUSE_UP,b,false);y.removeEventListener(doodle.events.MouseEvent.CONTEXT_MENU,
b,false);y.removeEventListener(doodle.events.MouseEvent.MOUSE_WHEEL,b,false);C=null}},allChildren:{enumerable:true,configurable:false,get:function(){return L}},__sortAllChildren:{enumerable:false,configurable:false,value:function(){n(this,L,true).reverse()}},getNodesUnderPoint:{enumerable:true,configurable:false,value:function(y){var D=[],I=L,R=I.length,W=y.x;y=y.y;for(var X;R--;){X=I[R];X.__getBounds(this).contains(W,y)&&D.push(X)}return D}},addChildAt:{enumerable:true,configurable:false,value:function(){var y=
K.addChildAt;return function(D,I){D.width=this.width;D.height=this.height;this.element.appendChild(D.element);return y.call(this,D,I)}}()},removeChildAt:{enumerable:true,writable:false,configurable:false,value:function(){var y=K.removeChildAt;return function(D){this.element.removeChild(H[D].element);return y.call(this,D)}}()},swapChildrenAt:{enumerable:true,writable:false,configurable:false,value:function(){var y=K.swapChildrenAt;return function(D,I){D>I?this.element.insertBefore(H[I].element,H[D].element):
this.element.insertBefore(H[D].element,H[I].element);return y.call(this,D,I)}}()},frameRate:function(){var y=false,D;return{get:function(){return y},set:function(I){if(I===0||I===false){y=false;D!==undefined&&clearInterval(D)}else if(I!==y){D!==undefined&&clearInterval(D);D=setInterval(A,1E3/I);y=I}}}}()}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]==="function"){arguments[0].call(o);o=undefined}else l.element=o;break;default:throw new SyntaxError("[object Display](element): Invalid number of parameters.");
}i(l.children,l.children.length,doodle.EventDispatcher.dispatcher_queue,doodle.EventDispatcher.dispatcher_queue.length,z,l.allChildren,l.allChildren.length,l);return l};s={parent:{enumerable:true,writable:false,configurable:false,value:null},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Display]"}},addLayer:{value:function(o){return this.addChild(x(o))}},removeLayer:{value:function(o){return this.removeChildById(o)}},__getBounds:{enumerable:false,configurable:true,
value:function(){var o=doodle.geom.Rectangle(0,0,0,0);return function(){return o.compose(0,0,this.width,this.height)}}()}};i=function(){var o=0;return function(l,j,b,p,w,u,A){for(g(l,j);p--;)b[p].eventListeners.hasOwnProperty("enterFrame")&&b[p].handleEvent(w.__setTarget(b[p]));q(u,A);o++}}();g=function(o,l){for(var j;l--;){j=o[l].context;j.save();j.setTransform(1,0,0,1,0,0);j.clearRect(0,0,o[l].width,o[l].height);j.restore()}};q=function(o,l){for(var j,b;l--;){j=o[l];if((b=j.context)&&j.visible){b.save();
b.transform.apply(b,j.__allTransforms.__toArray());if(!a(j))if(j.alpha!==1)b.globalAlpha=j.alpha;typeof j.__draw==="function"&&j.__draw(b);b.restore()}}};k=function(o,l,j,b,p,w,u){for(;b--;)if(j[b].__getBounds(u).contains(p,w)){j[b].dispatchEvent(l.__copyMouseEventProperties(o,null));return true}return false};t=function(o,l,j,b,p,w,u){for(var A;b--;){A=j[b];if(A.__getBounds(u).contains(p,w)){if(!A.__pointInBounds){A.__pointInBounds=true;A.dispatchEvent(l.__copyMouseEventProperties(o,null,"mouseover"));
A.dispatchEvent(l.__copyMouseEventProperties(o,null,"mouseenter"));return true}A.dispatchEvent(l.__copyMouseEventProperties(o,null));return true}else if(A.__pointInBounds){A.__pointInBounds=false;A.dispatchEvent(l.__copyMouseEventProperties(o,null,"mouseout"));A.dispatchEvent(l.__copyMouseEventProperties(o,null,"mouseleave"));return true}}};e=function(o,l,j,b,p,w){if(p===0)w.__pointInBounds=false;else{w=b[p-1];for(p=j.length;p--;)j[p].__pointInBounds=false}w.dispatchEvent(l.__copyMouseEventProperties(o,
null,"mouseout"));w.dispatchEvent(l.__copyMouseEventProperties(o,null,"mouseleave"));return true};d=function(o,l,j){j.broadcastEvent(l.__copyKeyboardEventProperties(o,null));return true};doodle.Display.isDisplay=function(o){if(!o||typeof o!=="object"||typeof o.toString!=="function")return false;return o.toString()==="[object Display]"}})();
Object.defineProperty(doodle,"FontStyle",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{NORMAL:{enumerable:true,writable:false,configurable:false,value:"normal"},ITALIC:{enumerable:true,writable:false,configurable:false,value:"italic"},OBLIQUE:{enumerable:true,writable:false,configurable:false,value:"oblique"}})});
Object.defineProperty(doodle,"FontVariant",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{NORMAL:{enumerable:true,writable:false,configurable:false,value:"normal"},SMALL_CAPS:{enumerable:true,writable:false,configurable:false,value:"small-caps"}})});
Object.defineProperty(doodle,"FontWeight",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{NORMAL:{enumerable:true,writable:false,configurable:false,value:"normal"},BOLD:{enumerable:true,writable:false,configurable:false,value:"bold"},BOLDER:{enumerable:true,writable:false,configurable:false,value:"bolder"},LIGHTER:{enumerable:true,writable:false,configurable:false,value:"lighter"}})});
Object.defineProperty(doodle,"TextAlign",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{START:{enumerable:true,writable:false,configurable:false,value:"start"},END:{enumerable:true,writable:false,configurable:false,value:"end"},LEFT:{enumerable:true,writable:false,configurable:false,value:"left"},RIGHT:{enumerable:true,writable:false,configurable:false,value:"right"},CENTER:{enumerable:true,writable:false,configurable:false,value:"center"}})});
Object.defineProperty(doodle,"TextBaseline",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{TOP:{enumerable:true,writable:false,configurable:false,value:"top"},MIDDLE:{enumerable:true,writable:false,configurable:false,value:"middle"},BOTTOM:{enumerable:true,writable:false,configurable:false,value:"bottom"},HANGING:{enumerable:true,writable:false,configurable:false,value:"hanging"},ALPHABETIC:{enumerable:true,writable:false,configurable:false,value:"alphabetic"},IDEOGRAPHIC:{enumerable:true,
writable:false,configurable:false,value:"ideographic"}})});
(function(){var s,v=doodle.utils.hex_to_rgb_str,i=doodle.FontStyle,g=doodle.FontVariant,q=doodle.FontWeight,k=doodle.TextAlign,t=doodle.TextBaseline;doodle.Text=function(e){var d=Object.create(doodle.Sprite());Object.defineProperties(d,s);Object.defineProperties(d,function(){function n(){var b=d.context||document.createElement("canvas").getContext("2d"),p,w;b.save();b.font=r+" "+x+" "+z+" "+h+"px "+c;d.width=p=b.measureText(a).width;d.height=w=h;b.restore();d.graphics.clear();d.graphics.draw(function(u){if(j){u.fillStyle=
j;u.fillRect(0,0,p,w)}u.lineWidth=1;u.textAlign=f;u.textBaseline=m;u.font=r+" "+x+" "+z+" "+h+"px "+c;if(o){u.fillStyle=o;u.fillText(a,0,0)}if(l){u.strokeStyle=l;u.strokeText(a,0,0)}})}var a="",c="sans-serif",h=10,r=i.NORMAL,x=g.NORMAL,z=q.NORMAL,f=k.START,m=t.ALPHABETIC,o="#000000",l="#000000",j;return{text:{enumerable:true,configurable:false,get:function(){return a},set:function(b){a=b;n()}},font:{enumerable:true,configurable:false,get:function(){return r+" "+x+" "+z+" "+h+"px "+c},set:function(b){var p;
b=b.split(" ");p=b.length;if(p===2)b.unshift(i.NORMAL,g.NORMAL,q.NORMAL);else if(p===3)b.splice(1,0,g.NORMAL,q.NORMAL);else p===4&&b.splice(1,0,g.NORMAL);d.fontStyle=b[0];d.fontVariant=b[1];d.fontWeight=b[2];d.fontSize=b[3];d.fontFamily=b[4]}},fontFamily:{enumerable:true,configurable:false,get:function(){return c},set:function(b){c=b;n()}},fontSize:{enumerable:true,configurable:false,get:function(){return h},set:function(b){if(typeof b==="string")b=parseInt(b);h=b;n()}},fontStyle:{enumerable:true,
configurable:false,get:function(){return r},set:function(b){r=b;n()}},fontVariant:{enumerable:true,configurable:false,get:function(){return x},set:function(b){x=b;n()}},fontWeight:{enumerable:true,configurable:false,get:function(){return z},set:function(b){z=b;n()}},textAlign:{enumerable:true,configurable:false,get:function(){return f},set:function(b){f=b;n()}},textBaseline:{enumerable:true,configurable:false,get:function(){return m},set:function(b){m=b;n()}},color:{enumerable:true,configurable:false,
get:function(){return o},set:function(b){if(typeof b==="number")b=v(b);o=b}},strokeColor:{enumerable:true,configurable:false,get:function(){return l},set:function(b){if(typeof b==="number")b=v(b);l=b}},backgroundColor:{enumerable:true,configurable:false,get:function(){return j},set:function(b){if(typeof b==="number")b=v(b);j=b}}}}());switch(arguments.length){case 1:if(typeof arguments[0]==="function"){arguments[0].call(d);e=undefined}else d.text=e}return d};s={toString:{enumerable:false,writable:false,
configurable:false,value:function(){return"[object Text]"}}}})();
