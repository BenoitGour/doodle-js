var doodle={};doodle.geom={};if(typeof Function.prototype.bind!=="function")Function.prototype.bind=function(n){var l=this;return function(){return l.apply(n,arguments)}};
doodle.utils={rgb_to_hex:function(n,l,i){n=(i|l<<8|n<<16).toString(16);return"#"+String("000000"+n).slice(-6)},rgb_str_to_hex:function(n){var l=doodle.utils;n=l.rgb_str_to_rgb(n);return l.rgb_to_hex(parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10))},rgb_to_rgb_str:function(n,l,i,a){a=a===undefined?1:a;a=a<0?0:a>1?1:a;return a===1?"rgb("+n+","+l+","+i+")":"rgba("+n+","+l+","+i+","+a+")"},rgb_str_to_rgb:function(){var n=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?(.*)\)$/;return function(l){l=
l.trim().match(n);var i=[parseInt(l[1],10),parseInt(l[2],10),parseInt(l[3],10)];l=parseFloat(l[4]);typeof l==="number"&&!isNaN(l)&&i.push(l);return i}}(),hex_to_rgb:function(n){if(typeof n==="string"){n=n[0]==="#"?n.slice(1):n;n=parseInt(n,16)}return[n>>16&255,n>>8&255,n&255]},hex_to_rgb_str:function(n,l){var i=doodle.utils;l=l===undefined?1:l;n=i.hex_to_rgb(n);return i.rgb_to_rgb_str(n[0],n[1],n[2],l)}};
doodle.utils.types=function(){function n(l,i,a){if(typeof l!=="string")throw new TypeError("throw_type_error: type must be a string.");i=i===undefined?"throw_type_error":i;a=a===undefined?"":"("+a+")";throw new TypeError(i+a+": Parameter must be a "+l+".");}return{check_number_type:function(l,i,a){return typeof l==="number"?true:n("number",i||"check_number_type",a)},check_boolean_type:function(l,i,a){return typeof l==="boolean"?true:n("boolean",i||"check_boolean_type",a)},check_string_type:function(l,
i,a){return typeof l==="string"?true:n("string",i||"check_string_type",a)},check_function_type:function(l,i,a){return typeof l==="function"?true:n("function",i||"check_function_type",a)},check_array_type:function(l,i,a){return Array.isArray(l)?true:n("array",i||"check_array_type",a)},check_event_type:function(l,i,a){if(l&&(l.toString()==="[object Event]"||l.toString()==="[object UIEvent]"||l.toString()==="[object MouseEvent]"||l.toString()==="[object KeyboardEvent]"||l.toString()==="[object TextEvent]"))return true;
else n("event",i||"check_event_type",a)},check_canvas_type:function(l,i,a){return l&&l.toString()==="[object HTMLCanvasElement]"?true:n("canvas element",i||"check_canvas_type",a)},check_context_type:function(l,i,a){return l&&l.toString()==="[object CanvasRenderingContext2D]"?true:n("canvas context",i||"check_context_type",a)},check_block_element:function(l,i,a){try{return doodle.utils.get_style_property(l,"display")==="block"?true:n("HTML block element",i||"check_block_type",a)}catch(k){n("HTML block element",
i||"check_block_type",a)}}}}();doodle.utils.get_element=function(n,l){var i;if(typeof n==="string"){n=n[0]==="#"?n.slice(1):n;i=document.getElementById(n)}else i=n;if(!i){l=l===undefined?"get_element":l;throw new ReferenceError(l+": Unable to get HTML element: "+n);}return i};
doodle.utils.get_style_property=function(n,l){try{if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(n,null)[l];else if(n.currentStyle)return n.currentStyle[l];else if(n.style)return n.style[l];else throw new ReferenceError("get_style_property: Cannot read property '"+l+"' of "+n+".");}catch(i){throw new ReferenceError("get_style_property: Cannot read property '"+l+"' of "+n+".");}};
doodle.utils.get_element_property=function(n,l,i){try{var a=doodle.utils.get_style_property(n,l)}catch(k){a=undefined}if(a===undefined||a===null)a=n.getAttribute(l);if(i!==undefined)switch(i){case "int":a=parseInt(a,10);a=isNaN(a)?null:a;break;case "float":a=parseFloat(a);a=isNaN(a)?null:a;break;default:break}return a};
doodle.utils.set_element_property=function(n,l,i,a){a=a===undefined?"css":a;switch(a){case "css":n.style[l]=i;break;case "html":n.setAttribute(l,i);break;default:throw new SyntaxError("set_element_property: type must be 'css' property or 'html' attribute.");}return i};
var Stats=function(){function n(o,q){var t,v,w;for(v=0;v<30;v++)for(t=0;t<73;t++){w=(t+v*74)*4;o[w]=o[w+4];o[w+1]=o[w+5];o[w+2]=o[w+6]}for(v=0;v<30;v++){w=(73+v*74)*4;if(v<q){o[w]=16;o[w+1]=16;o[w+2]=48}else{o[w]=0;o[w+1]=255;o[w+2]=255}}}var l,i="fps",a=0,k=(new Date).getTime(),c=k,h=k,d=0,b=1E3,m=0,e,g,p,r,u=0,y=1E3,z=0,A,s,f,j;l=document.createElement("div");l.style.fontFamily="Helvetica, Arial, sans-serif";l.style.fontSize="9px";l.style.backgroundColor="#000020";l.style.opacity="0.9";l.style.width=
"80px";l.style.paddingTop="2px";l.style.cursor="pointer";l.addEventListener("click",function(){switch(i){case "fps":i="ms";e.style.display="none";g.style.display="none";A.style.display="block";s.style.display="block";break;case "ms":i="fps";e.style.display="block";g.style.display="block";A.style.display="none";s.style.display="none";break}},false);e=document.createElement("div");e.innerHTML="<strong>FPS</strong>";e.style.color="#00ffff";e.style.marginLeft="3px";e.style.marginBottom="3px";l.appendChild(e);
g=document.createElement("canvas");g.width=74;g.height=30;g.style.display="block";g.style.marginLeft="3px";g.style.marginBottom="3px";l.appendChild(g);p=g.getContext("2d");p.fillStyle="#101030";p.fillRect(0,0,g.width,g.height);r=p.getImageData(0,0,g.width,g.height);A=document.createElement("div");A.innerHTML="<strong>MS</strong>";A.style.color="#00ffff";A.style.marginLeft="3px";A.style.marginBottom="3px";A.style.display="none";l.appendChild(A);s=document.createElement("canvas");s.width=74;s.height=
30;s.style.display="block";s.style.marginLeft="3px";s.style.marginBottom="3px";s.style.display="none";l.appendChild(s);f=s.getContext("2d");f.fillStyle="#101030";f.fillRect(0,0,s.width,s.height);j=f.getImageData(0,0,s.width,s.height);return{domElement:l,update:function(){a++;k=(new Date).getTime();u=k-c;y=Math.min(y,u);z=Math.max(z,u);n(j.data,Math.min(30,30-u/200*30));A.innerHTML="<strong>"+u+" MS</strong> ("+y+"-"+z+")";f.putImageData(j,0,0);c=k;if(k>h+1E3){d=Math.round(a*1E3/(k-h));b=Math.min(b,
d);m=Math.max(m,d);n(r.data,Math.min(30,30-d/100*30));e.innerHTML="<strong>"+d+" FPS</strong> ("+b+"-"+m+")";p.putImageData(r,0,0);h=k;a=0}}}};
Object.defineProperty(doodle,"Keyboard",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BACKSPACE:{enumerable:true,writable:false,configurable:false,value:8},TAB:{enumerable:true,writable:false,configurable:false,value:9},ENTER:{enumerable:true,writable:false,configurable:false,value:13},COMMAND:{enumerable:true,writable:false,configurable:false,value:15},SHIFT:{enumerable:true,writable:false,configurable:false,value:16},CONTROL:{enumerable:true,writable:false,configurable:false,
value:17},ALTERNATE:{enumerable:true,writable:false,configurable:false,value:18},PAUSE:{enumerable:true,writable:false,configurable:false,value:19},CAPS_LOCK:{enumerable:true,writable:false,configurable:false,value:20},NUMPAD:{enumerable:true,writable:false,configurable:false,value:21},ESCAPE:{enumerable:true,writable:false,configurable:false,value:27},SPACE:{enumerable:true,writable:false,configurable:false,value:32},PAGE_UP:{enumerable:true,writable:false,configurable:false,value:33},PAGE_DOWN:{enumerable:true,
writable:false,configurable:false,value:34},END:{enumerable:true,writable:false,configurable:false,value:35},HOME:{enumerable:true,writable:false,configurable:false,value:36},LEFT:{enumerable:true,writable:false,configurable:false,value:37},UP:{enumerable:true,writable:false,configurable:false,value:38},RIGHT:{enumerable:true,writable:false,configurable:false,value:39},DOWN:{enumerable:true,writable:false,configurable:false,value:40},INSERT:{enumerable:true,writable:false,configurable:false,value:45},
DELETE:{enumerable:true,writable:false,configurable:false,value:46},NUMBER_0:{enumerable:true,writable:false,configurable:false,value:48},NUMBER_1:{enumerable:true,writable:false,configurable:false,value:49},NUMBER_2:{enumerable:true,writable:false,configurable:false,value:50},NUMBER_3:{enumerable:true,writable:false,configurable:false,value:51},NUMBER_4:{enumerable:true,writable:false,configurable:false,value:52},NUMBER_5:{enumerable:true,writable:false,configurable:false,value:53},NUMBER_6:{enumerable:true,
writable:false,configurable:false,value:54},NUMBER_7:{enumerable:true,writable:false,configurable:false,value:55},NUMBER_8:{enumerable:true,writable:false,configurable:false,value:56},NUMBER_9:{enumerable:true,writable:false,configurable:false,value:57},A:{enumerable:true,writable:false,configurable:false,value:65},B:{enumerable:true,writable:false,configurable:false,value:66},C:{enumerable:true,writable:false,configurable:false,value:67},D:{enumerable:true,writable:false,configurable:false,value:68},
E:{enumerable:true,writable:false,configurable:false,value:69},F:{enumerable:true,writable:false,configurable:false,value:70},G:{enumerable:true,writable:false,configurable:false,value:71},H:{enumerable:true,writable:false,configurable:false,value:72},I:{enumerable:true,writable:false,configurable:false,value:73},J:{enumerable:true,writable:false,configurable:false,value:74},K:{enumerable:true,writable:false,configurable:false,value:75},L:{enumerable:true,writable:false,configurable:false,value:76},
M:{enumerable:true,writable:false,configurable:false,value:77},N:{enumerable:true,writable:false,configurable:false,value:78},O:{enumerable:true,writable:false,configurable:false,value:79},P:{enumerable:true,writable:false,configurable:false,value:80},Q:{enumerable:true,writable:false,configurable:false,value:81},R:{enumerable:true,writable:false,configurable:false,value:82},S:{enumerable:true,writable:false,configurable:false,value:83},T:{enumerable:true,writable:false,configurable:false,value:84},
U:{enumerable:true,writable:false,configurable:false,value:85},V:{enumerable:true,writable:false,configurable:false,value:86},W:{enumerable:true,writable:false,configurable:false,value:87},X:{enumerable:true,writable:false,configurable:false,value:88},Y:{enumerable:true,writable:false,configurable:false,value:89},Z:{enumerable:true,writable:false,configurable:false,value:90},WINDOWS_KEY:{enumerable:true,writable:false,configurable:false,value:91},NUMPAD_0:{enumerable:true,writable:false,configurable:false,
value:96},NUMPAD_1:{enumerable:true,writable:false,configurable:false,value:97},NUMPAD_2:{enumerable:true,writable:false,configurable:false,value:98},NUMPAD_3:{enumerable:true,writable:false,configurable:false,value:99},NUMPAD_4:{enumerable:true,writable:false,configurable:false,value:100},NUMPAD_5:{enumerable:true,writable:false,configurable:false,value:101},NUMPAD_6:{enumerable:true,writable:false,configurable:false,value:102},NUMPAD_7:{enumerable:true,writable:false,configurable:false,value:103},
NUMPAD_8:{enumerable:true,writable:false,configurable:false,value:104},NUMPAD_9:{enumerable:true,writable:false,configurable:false,value:105},NUMPAD_MULTIPLY:{enumerable:true,writable:false,configurable:false,value:106},NUMPAD_ADD:{enumerable:true,writable:false,configurable:false,value:107},NUMPAD_ENTER:{enumerable:true,writable:false,configurable:false,value:108},NUMPAD_SUBTRACT:{enumerable:true,writable:false,configurable:false,value:109},NUMPAD_DECIMAL:{enumerable:true,writable:false,configurable:false,
value:110},NUMPAD_DIVIDE:{enumerable:true,writable:false,configurable:false,value:111},F1:{enumerable:true,writable:false,configurable:false,value:112},F2:{enumerable:true,writable:false,configurable:false,value:113},F3:{enumerable:true,writable:false,configurable:false,value:114},F4:{enumerable:true,writable:false,configurable:false,value:115},F5:{enumerable:true,writable:false,configurable:false,value:116},F6:{enumerable:true,writable:false,configurable:false,value:117},F7:{enumerable:true,writable:false,
configurable:false,value:118},F8:{enumerable:true,writable:false,configurable:false,value:119},F9:{enumerable:true,writable:false,configurable:false,value:120},F10:{enumerable:true,writable:false,configurable:false,value:121},F11:{enumerable:true,writable:false,configurable:false,value:122},F12:{enumerable:true,writable:false,configurable:false,value:123},F13:{enumerable:true,writable:false,configurable:false,value:124},F14:{enumerable:true,writable:false,configurable:false,value:125},F15:{enumerable:true,
writable:false,configurable:false,value:126},SCROLL:{enumerable:true,writable:false,configurable:false,value:145},SEMICOLON:{enumerable:true,writable:false,configurable:false,value:186},EQUAL:{enumerable:true,writable:false,configurable:false,value:187},COMMA:{enumerable:true,writable:false,configurable:false,value:188},MINUS:{enumerable:true,writable:false,configurable:false,value:189},PERIOD:{enumerable:true,writable:false,configurable:false,value:190},SLASH:{enumerable:true,writable:false,configurable:false,
value:191},BACKQUOTE:{enumerable:true,writable:false,configurable:false,value:192},LEFTBRACKET:{enumerable:true,writable:false,configurable:false,value:219},BACKSLASH:{enumerable:true,writable:false,configurable:false,value:220},RIGHTBRACKET:{enumerable:true,writable:false,configurable:false,value:221},QUOTE:{enumerable:true,writable:false,configurable:false,value:222}})});
Object.defineProperty(doodle,"GradientType",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{LINEAR:{enumerable:true,writable:false,configurable:false,value:"linearGradient"},RADIAL:{enumerable:true,writable:false,configurable:false,value:"radialGradient"}})});
Object.defineProperty(doodle,"Pattern",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{REPEAT:{enumerable:true,writable:false,configurable:false,value:"repeat"},REPEAT_X:{enumerable:true,writable:false,configurable:false,value:"repeat-x"},REPEAT_Y:{enumerable:true,writable:false,configurable:false,value:"repeat-y"},NO_REPEAT:{enumerable:true,writable:false,configurable:false,value:"no-repeat"}})});
Object.defineProperty(doodle,"LineCap",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BUTT:{enumerable:true,writable:false,configurable:false,value:"butt"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},SQUARE:{enumerable:true,writable:false,configurable:false,value:"square"}})});
Object.defineProperty(doodle,"LineJoin",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{MITER:{enumerable:true,writable:false,configurable:false,value:"miter"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},BEVEL:{enumerable:true,writable:false,configurable:false,value:"bevel"}})});
(function(){var n={},l,i;doodle.Event=function(a,k,c){var h=arguments.length,d=Object.create(n),b=false,m=false,e=false,g=false,p=0,r=null,u=null,y=new Date,z=null,A=true;if(h===1&&i(arguments[0])){h=arguments[0];a=h.type;k=h.bubbles;c=h.cancelable;e=h.cancelBubble;g=h.defaultPrevented;p=h.eventPhase;r=h.target;u=h.currentTarget;y=h.timeStamp;z=h.srcElement;A=h.returnValue;if(h.__cancel)b=h.__cancel;if(h.__cancelNow)m=h.__cancelNow}else if(h===0||h>3)throw new SyntaxError("[object Event]: Invalid number of parameters.");
Object.defineProperties(d,l);Object.defineProperties(d,{bubbles:{enumerable:true,configurable:false,get:function(){return k}},cancelBubble:{enumerable:true,configurable:false,get:function(){return e},set:function(s){e=s}},cancelable:{enumerable:true,configurable:false,get:function(){return c}},__cancel:{enumerable:false,configurable:false,get:function(){return b}},__cancelNow:{enumerable:false,configurable:false,get:function(){return m}},currentTarget:{enumerable:true,configurable:false,get:function(){return u}},
__setCurrentTarget:{enumerable:false,value:function(s){u=s}},target:{enumerable:true,configurable:false,get:function(){return r}},__setTarget:{enumerable:false,value:function(s){r=s}},eventPhase:{enumerable:true,configurable:false,get:function(){return p}},__setEventPhase:{enumerable:false,value:function(s){p=s}},srcElement:{enumerable:true,configurable:false,get:function(){return z}},timeStamp:{enumerable:true,configurable:false,get:function(){return y}},type:{enumerable:true,configurable:false,
get:function(){return a}},__setType:{enumerable:false,value:function(s){a=s}},returnValue:{enumerable:true,configurable:false,get:function(){return A}},initEvent:{enumerable:true,configurable:false,value:function(s,f,j){f=f===true;j=j===true;a=s;k=f;c=j;return this}},preventDefault:{enumerable:true,configurable:false,value:function(){g=true}},stopPropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)b=true;else throw Error(this+".stopPropagation: Event can not be cancelled.");
}},stopImmediatePropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)m=b=true;else throw Error(this+".stopImmediatePropagation: Event can not be cancelled.");}}});d.initEvent(a,k,c);return d};(function(){var a=Object.getPrototypeOf(document.createEvent("Event"));for(var k in a)if(typeof a[k]!=="function")n[k]=a[k];l={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Event]"}}}})();i=doodle.Event.isEvent=function(a){if(typeof a!==
"object")return false;else a=a.toString();return a==="[object Event]"||a==="[object UIEvent]"||a==="[object MouseEvent]"||a==="[object KeyboardEvent]"||a==="[object TextEvent]"||a==="[object WheelEvent]"}})();
(function(){var n,l=doodle.Event.isEvent;doodle.UIEvent=function(i,a,k,c,h){var d=arguments.length,b=0,m=0,e=0,g=0,p=0,r=0,u=0;if(d===1&&l(arguments[0])){d=arguments[0];i=d.type;a=d.bubbles;k=d.cancelable;c=d.view;h=d.detail;b=d.which||0;m=d.charCode||0;e=d.keyCode||0;g=d.layerX||0;p=d.layerY||0;r=d.pageX||0;u=d.pageY||0;d=Object.create(doodle.Event(d))}else if(d===0||d>5)throw new SyntaxError("[object UIEvent]: Invalid number of parameters.");else{a=a===true;k=k===true;d=Object.create(doodle.Event(i,
a,k))}Object.defineProperties(d,n);Object.defineProperties(d,{view:{enumerable:true,configurable:false,get:function(){return c}},detail:{enumerable:true,configurable:false,get:function(){return h}},which:{enumerable:true,configurable:false,get:function(){return b}},charCode:{enumerable:true,configurable:false,get:function(){return m}},keyCode:{enumerable:true,configurable:false,get:function(){return e}},layerX:{enumerable:true,configurable:false,get:function(){return g}},layerY:{enumerable:true,configurable:false,
get:function(){return p}},pageX:{enumerable:true,configurable:false,get:function(){return r}},pageY:{enumerable:true,configurable:false,get:function(){return u}},initUIEvent:{value:function(y,z,A,s,f){i=y;a=z===true;k=A===true;c=s===undefined?null:s;h=f===undefined?0:f;this.initEvent(i,a,k);return this}}});d.initUIEvent(i,a,k,c,h);return d};n={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object UIEvent]"}}}})();
(function(){var n,l=doodle.Event.isEvent,i=doodle.utils.types.check_string_type;doodle.MouseEvent=function(a,k,c,h,d,b,m,e,g,p,r,u,y,z,A){var s=arguments.length,f=0,j=0,o=0,q=0;if(s===1&&l(arguments[0])){s=arguments[0];a=s.type;k=s.bubbles;c=s.cancelable;h=s.view;d=s.detail;b=s.screenX;m=s.screenY;e=s.clientX;g=s.clientY;p=s.ctrlKey;r=s.altKey;u=s.shiftKey;y=s.metaKey;z=s.button;A=s.relatedTarget;f=s.x||0;j=s.y||0;o=s.offsetX||0;q=s.offsetY||0;s=Object.create(doodle.UIEvent(s))}else if(s===0||s>15)throw new SyntaxError("[object MouseEvent]: Invalid number of parameters.");
else{k=k===true;c=c===true;h=h===undefined?null:h;d=d===undefined?0:d;s=Object.create(doodle.UIEvent(a,k,c,h,d))}Object.defineProperties(s,n);Object.defineProperties(s,{x:{enumerable:true,configurable:false,get:function(){return f}},y:{enumerable:true,configurable:false,get:function(){return j}},screenX:{enumerable:true,configurable:false,get:function(){return b}},screenY:{enumerable:true,configurable:false,get:function(){return m}},clientX:{enumerable:true,configurable:false,get:function(){return e}},
clientY:{enumerable:true,configurable:false,get:function(){return g}},offsetX:{enumerable:true,configurable:false,get:function(){return o}},offsetY:{enumerable:true,configurable:false,get:function(){return q}},ctrlKey:{enumerable:true,configurable:false,get:function(){return p}},altKey:{enumerable:true,configurable:false,get:function(){return r}},shiftKey:{enumerable:true,configurable:false,get:function(){return u}},metaKey:{enumerable:true,configurable:false,get:function(){return y}},button:{enumerable:true,
configurable:false,get:function(){return z}},relatedTarget:{enumerable:true,configurable:false,get:function(){return A}},initMouseEvent:{value:function(t,v,w,D,x,B,E,F,C,H,G,I,J,K,L){k=v===true;c=w===true;h=D===undefined?null:D;d=x===undefined?0:x;b=B===undefined?0:B;m=E===undefined?0:E;e=F===undefined?0:F;g=C===undefined?0:C;p=H===true;r=G===true;u=I===true;y=J===true;z=K===undefined?0:K;A=L===undefined?null:L;this.initUIEvent(a,k,c,h,d);return this}},getModifierState:{value:function(t){i(t,this+
".getModifierState");switch(t){case "Alt":return r;case "Control":return p;case "Meta":return y;case "Shift":return u;default:return false}}}});s.initMouseEvent(a,k,c,h,d,b,m,e,g,p,r,u,y,z,A);return s};n={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object MouseEvent]"}}}})();
(function(){var n,l=doodle.Event.isEvent;doodle.TextEvent=function(i,a,k,c,h,d){var b=arguments.length;if(b===1&&l(arguments[0])){b=arguments[0];i=b.type;a=b.bubbles;k=b.cancelable;c=b.view;h=b.data;d=b.inputMode;b=Object.create(doodle.UIEvent(b))}else if(b===0||b>6)throw new SyntaxError("[object TextEvent]: Invalid number of parameters.");else{a=a===true;k=k===true;c=viewArg===undefined?null:c;b=Object.create(doodle.UIEvent(i,a,k,c))}Object.defineProperties(b,n);Object.defineProperties(b,{data:{enumerable:true,
configurable:false,get:function(){return h}},inputMode:{enumerable:true,configurable:false,get:function(){return d}},initTextEvent:{value:function(m,e,g,p,r,u){i=m;a=e===true;k=g===true;c=p===undefined?null:p;h=r===undefined?"":r;d=u===undefined?doodle.TextEvent.INPUT_METHOD_UNKNOWN:u;this.initUIEvent(i,a,k,c);return this}}});b.initTextEvent(i,a,k,c,h,d);return b};n={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TextEvent]"}}}})();
(function(){var n,l=doodle.Event.isEvent,i=doodle.utils.types.check_string_type;doodle.KeyboardEvent=function(a,k,c,h,d,b,m,e){var g=arguments.length,p=false,r=false,u=false,y=false;if(g===1&&l(arguments[0])){g=arguments[0];a=g.type;k=g.bubbles;c=g.cancelable;h=g.view;d=g.keyIdentifier;b=g.keyLocation;e=g.repeat;p=g.ctrlKey||false;r=g.shiftKey||false;u=g.altKey||false;y=g.metaKey||false;g=Object.create(doodle.UIEvent(g))}else if(g===0||g>8)throw new SyntaxError("[object KeyboardEvent]: Invalid number of parameters.");
else{k=k===true;c=c===true;h=h===undefined?null:h;g=Object.create(doodle.UIEvent(a,k,c,h))}Object.defineProperties(g,n);Object.defineProperties(g,{keyIdentifier:{enumerable:true,configurable:false,get:function(){return d}},keyLocation:{enumerable:true,configurable:false,get:function(){return b}},repeat:{enumerable:true,configurable:false,get:function(){return e}},altKey:{enumerable:true,configurable:false,get:function(){return u}},ctrlKey:{enumerable:true,configurable:false,get:function(){return p}},
metaKey:{enumerable:true,configurable:false,get:function(){return y}},shiftKey:{enumerable:true,configurable:false,get:function(){return r}},initKeyboardEvent:{value:function(z,A,s,f,j,o,q,t){a=z;k=A===true;c=s===true;h=f===undefined?null:f;d=j===undefined?"":j;b=o===undefined?0:o;m=q===undefined?"":q;e=t===true;m.split(" ").forEach(function(v){switch(v){case "Alt":u=true;break;case "Control":p=true;break;case "Meta":y=true;break;case "Shift":r=true;break}});this.initUIEvent(a,k,c,h);return this}},
getModifierState:{value:function(z){i(z,this+".getModifierState");switch(z){case "Alt":return u;case "Control":return p;case "Meta":return y;case "Shift":return r;default:return false}}}});g.initKeyboardEvent(a,k,c,h,d,b,m,e);return g};n={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object KeyboardEvent]"}}}})();
Object.defineProperties(doodle.Event,{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},ADDED:{enumerable:true,writable:false,configurable:false,value:"added"},REMOVED:{enumerable:true,writable:false,configurable:false,value:"removed"},ENTER_FRAME:{enumerable:true,writable:false,configurable:false,value:"enterFrame"},LOAD:{enumerable:true,
writable:false,configurable:false,value:"load"},CHANGE:{enumerable:true,writable:false,configurable:false,value:"change"}});Object.defineProperties(doodle.UIEvent,{FOCUS_IN:{enumerable:true,writable:false,configurable:false,value:"focusIn"}});
Object.defineProperties(doodle.MouseEvent,{CLICK:{enumerable:true,writable:false,configurable:false,value:"click"},DOUBLE_CLICK:{enumerable:true,writable:false,configurable:false,value:"dblclick"},CONTEXT_MENU:{enumerable:true,writable:false,configurable:false,value:"contextmenu"},MOUSE_DOWN:{enumerable:true,writable:false,configurable:false,value:"mousedown"},MOUSE_UP:{enumerable:true,writable:false,configurable:false,value:"mouseup"},MOUSE_WHEEL:{enumerable:true,writable:false,configurable:false,
value:"mousewheel"},MOUSE_MOVE:{enumerable:true,writable:false,configurable:false,value:"mousemove"},MOUSE_OUT:{enumerable:true,writable:false,configurable:false,value:"mouseout"},MOUSE_OVER:{enumerable:true,writable:false,configurable:false,value:"mouseover"},MOUSE_ENTER:{enumerable:true,writable:false,configurable:false,value:"mouseenter"},MOUSE_LEAVE:{enumerable:true,writable:false,configurable:false,value:"mouseleave"}});
Object.defineProperties(doodle.KeyboardEvent,{KEY_PRESS:{enumerable:true,writable:false,configurable:false,value:"keypress"},KEY_UP:{enumerable:true,writable:false,configurable:false,value:"keyup"},KEY_DOWN:{enumerable:true,writable:false,configurable:false,value:"keydown"},KEY_LOCATION_STANDARD:{enumerable:true,writable:false,configurable:false,value:0},KEY_LOCATION_LEFT:{enumerable:true,writable:false,configurable:false,value:1},KEY_LOCATION_RIGHT:{enumerable:true,writable:false,configurable:false,
value:2},KEY_LOCATION_NUMPAD:{enumerable:true,writable:false,configurable:false,value:3},KEY_LOCATION_MOBILE:{enumerable:true,writable:false,configurable:false,value:4},KEY_LOCATION_JOYSTICK:{enumerable:true,writable:false,configurable:false,value:5}});
Object.defineProperties(doodle.TextEvent,{TEXT_INPUT:{enumerable:true,writable:false,configurable:false,value:"textInput"},INPUT_METHOD_UNKNOWN:{enumerable:true,writable:false,configurable:false,value:0},INPUT_METHOD_KEYBOARD:{enumerable:true,writable:false,configurable:false,value:1},INPUT_METHOD_PASTE:{enumerable:true,writable:false,configurable:false,value:2},INPUT_METHOD_DROP:{enumerable:true,writable:false,configurable:false,value:3},INPUT_METHOD_IME:{enumerable:true,writable:false,configurable:false,
value:4},INPUT_METHOD_OPTION:{enumerable:true,writable:false,configurable:false,value:5},INPUT_METHOD_HANDWRITING:{enumerable:true,writable:false,configurable:false,value:6},INPUT_METHOD_VOICE:{enumerable:true,writable:false,configurable:false,value:7},INPUT_METHOD_MULTIMODAL:{enumerable:true,writable:false,configurable:false,value:8},INPUT_METHOD_SCRIPT:{enumerable:true,writable:false,configurable:false,value:9}});
(function(){var n,l;doodle.geom.Point=function(i,a){var k=arguments.length,c,h={};if(k===1&&typeof arguments[0]==="function"){c=arguments[0];i=undefined}else if(k>2)throw new SyntaxError("[object Point]: Invalid number of parameters.");Object.defineProperties(h,n);Object.defineProperties(h,{x:{enumerable:true,configurable:false,get:function(){return i},set:function(d){i=d}},y:{enumerable:true,configurable:false,get:function(){return a},set:function(d){a=d}}});if(c)if(typeof c==="function"){h.compose(0,
0);c.call(h)}else if(Array.isArray(c)&&c.length===2)h.compose.apply(h,c);else if(l(c))h.compose(c.x,c.y);else throw new SyntaxError(this+": Passed an invalid initializer object.");else switch(k){case 0:h.compose(0,0);break;case 2:h.compose(i,a);break;default:throw new SyntaxError(this+": Invalid number of parameters.");}return h};l=doodle.geom.Point.isPoint=function(i){return i&&typeof i.x==="number"&&typeof i.y==="number"};doodle.utils.types.check_point_type=function(i,a,k){if(l(i))return true;else{a=
a===undefined?"check_point_type":a;k=k===undefined?"":"("+k+")";throw new TypeError(a+k+": Parameter must be a point.");}};(function(){var i=doodle.geom.Point;n={length:{enumerable:true,configurable:false,get:function(){return this.distance({x:0,y:0},this)}},compose:{enumerable:false,writable:false,configurable:false,value:function(a,k){this.x=a;this.y=k;return this}},clone:{enumerable:false,writable:false,configurable:false,value:function(){return i(this.x,this.y)}},toArray:{enumerable:false,writable:false,
configurable:false,value:function(){var a=Array(2);a[0]=this.x;a[1]=this.y;return a}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+")"}},distance:{enumerable:false,writable:false,configurable:false,value:function(a,k){var c=k.x-a.x,h=k.y-a.x;return Math.sqrt(c*c+h*h)}},normalize:{enumerable:false,writable:false,configurable:false,value:function(a){var k=this.length;this.x=this.x/k*a;this.y=this.y/k*a;return this}},equals:{enumerable:false,
writable:false,configurable:false,value:function(a){return this&&point&&this.x===a.x&&this.y===a.y||!this&&!a}},interpolate:{enumerable:false,writable:false,configurable:false,value:function(a,k,c){return i(a.x+(k.x-a.x)*c,a.y+(k.y-a.y)*c)}},polar:{enumerable:false,writable:false,configurable:false,value:function(a,k){return i(a*Math.cos(k),a*Math.sin(k))}},add:{enumerable:false,writable:false,configurable:false,value:function(a){return i(this.x+a.x,this.y+a.y)}},subtract:{enumerable:false,writable:false,
configurable:false,value:function(a){return i(this.x-a.x,this.y-a.y)}},offset:{enumerable:false,writable:false,configurable:false,value:function(a,k){this.x+=a;this.y+=k;return this}}}})()})();
(function(){var n,l;doodle.geom.Matrix=function(i,a,k,c,h,d){var b=arguments.length,m,e={};if(b===1){m=arguments[0];i=undefined}else if(b>6)throw new SyntaxError("[object Matrix]: Invalid number of parameters.");Object.defineProperties(e,n);Object.defineProperties(e,{a:{enumerable:true,configurable:false,get:function(){return i},set:function(g){i=g}},b:{enumerable:true,configurable:false,get:function(){return a},set:function(g){a=g}},c:{enumerable:true,configurable:false,get:function(){return k},
set:function(g){k=g}},d:{enumerable:true,configurable:false,get:function(){return c},set:function(g){c=g}},tx:{enumerable:true,configurable:false,get:function(){return h},set:function(g){h=g}},ty:{enumerable:true,configurable:false,get:function(){return d},set:function(g){d=g}}});if(m)if(typeof m==="function"){e.identity();m.call(e)}else if(Array.isArray(m)&&m.length===6)e.compose.apply(e,m);else if(l(m))e.compose(m.a,m.b,m.c,m.d,m.tx,m.ty);else throw new SyntaxError("[object Matrix]: Passed an invalid initializer object.");
else switch(b){case 0:e.identity();break;case 6:e.compose(i,a,k,c,h,d);break;default:throw new SyntaxError("[object Matrix]: Invalid number of parameters.");}return e};l=doodle.geom.Matrix.isMatrix=function(i){return i!==undefined&&i!==null&&typeof i.a==="number"&&typeof i.b==="number"&&typeof i.c==="number"&&typeof i.d==="number"&&typeof i.tx==="number"&&typeof i.ty==="number"};doodle.utils.types.check_matrix_type=function(i,a){if(l(i))return true;else{a=a===undefined?"check_matrix_type":a;throw new TypeError(a+
": Parameter must be a matrix.");}};(function(){var i=doodle.geom.Matrix,a=doodle.geom.Point,k=Math.sin,c=Math.cos,h=Math.atan2,d=Math.tan;n={compose:{enumerable:false,writable:false,configurable:false,value:function(b,m,e,g,p,r){this.a=b;this.b=m;this.c=e;this.d=g;this.tx=p;this.ty=r;return this}},toArray:{enumerable:false,writable:false,configurable:false,value:function(){var b=Array(6);b[0]=this.a;b[1]=this.b;b[2]=this.c;b[3]=this.d;b[4]=this.tx;b[5]=this.ty;return b}},toString:{enumerable:false,
writable:false,configurable:false,value:function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}},equals:{enumerable:false,writable:false,configurable:false,value:function(b){return this&&b&&this.a===b.a&&this.b===b.b&&this.c===b.c&&this.d===b.d&&this.tx===b.tx&&this.ty===b.ty||!this&&!b}},identity:{enumerable:false,writable:false,configurable:false,value:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this}},clone:{enumerable:false,
writable:false,configurable:false,value:function(){return i(this.a,this.b,this.c,this.d,this.tx,this.ty)}},multiply:{enumerable:false,writable:false,configurable:false,value:function(b){return this.compose(this.a*b.a+this.c*b.b,this.b*b.a+this.d*b.b,this.a*b.c+this.c*b.d,this.b*b.c+this.d*b.d,this.a*b.tx+this.c*b.ty+this.tx,this.b*b.tx+this.d*b.ty+this.ty)}},rotate:{enumerable:false,writable:false,configurable:false,value:function(b){var m=c(b);b=k(b);return this.multiply(i(m,b,-b,m,0,0))}},deltaRotate:{enumerable:false,
writable:false,configurable:false,value:function(b){var m=this.tx,e=this.ty;this.rotate(b);this.tx=m;this.ty=e;return this}},rotation:{enumerable:true,configurable:false,get:function(){return h(this.b,this.a)},set:function(b){var m=c(b);b=k(b);return this.compose(m,b,-b,m,this.tx,this.ty)}},scale:{enumerable:false,writable:false,configurable:false,value:function(b,m){return this.multiply(i(b,0,0,m,0,0))}},deltaScale:{enumerable:false,writable:false,configurable:false,value:function(b,m){var e=this.tx,
g=this.ty;this.scale(b,m);this.tx=e;this.ty=g;return this}},translate:{enumerable:false,writable:false,configurable:false,value:function(b,m){this.tx+=b;this.ty+=m;return this}},skew:{enumerable:false,writable:false,configurable:false,value:function(b,m){var e=d(b),g=d(m);return this.multiply(i(1,g,e,1,0,0))}},deltaSkew:{enumerable:false,writable:false,configurable:false,value:function(b,m){var e=this.tx,g=this.ty;this.skew(b,m);this.tx=e;this.ty=g;return this}},add:{enumerable:false,writable:false,
configurable:false,value:function(b){this.a+=b.a;this.b+=b.b;this.c+=b.c;this.d+=b.d;this.tx+=b.tx;this.ty+=b.ty;return this}},invert:{enumerable:false,writable:false,configurable:false,value:function(){var b=this.a*this.d-this.b*this.c;return this.compose(this.d/b,-this.b/b,-this.c/b,this.a/b,(this.ty*this.c-this.d*this.tx)/b,-(this.ty*this.a-this.b*this.tx)/b)}},transformPoint:{enumerable:false,writable:false,configurable:false,value:function(b){return a(this.a*b.x+this.c*b.y+this.tx,this.b*b.x+
this.d*b.y+this.ty)}},deltaTransformPoint:{enumerable:false,writable:false,configurable:false,value:function(b){return a(this.a*b.x+this.c*b.y,this.b*b.x+this.d*b.y)}},rotateAroundExternalPoint:{enumerable:false,writable:false,configurable:false,value:function(b,m){var e=i().rotate(m),g,p=b.x,r=b.y;this.translate(-p,-r);g=e.transformPoint({x:this.tx,y:this.ty});this.tx=g.x;this.ty=g.y;return this.multiply(e).translate(p,r)}},rotateAroundInternalPoint:{enumerable:false,writable:false,configurable:false,
value:function(b,m){return this.rotateAroundExternalPoint(this.transformPoint(b),m)}},matchInternalPointWithExternal:{enumerable:false,writable:false,configurable:false,value:function(b,m){var e=this.transformPoint(b);return this.translate(m.x-e.x,m.y-e.y)}},interpolate:{enumerable:false,writable:false,configurable:false,value:function(b,m){this.a+=(b.a-this.a)*m;this.b+=(b.b-this.b)*m;this.c+=(b.c-this.c)*m;this.d+=(b.d-this.d)*m;this.tx+=(b.tx-this.tx)*m;this.ty+=(b.ty-this.ty)*m;return this}}}})()})();
(function(){var n,l;doodle.geom.Rectangle=function(i,a,k,c){var h=arguments.length,d,b={};if(h===1&&typeof arguments[0]==="function"){d=arguments[0];i=undefined}else if(h>4)throw new SyntaxError("[object Rectangle]: Invalid number of parameters.");Object.defineProperties(b,n);Object.defineProperties(b,{x:{enumerable:true,configurable:false,get:function(){return i},set:function(m){i=m}},y:{enumerable:true,configurable:false,get:function(){return a},set:function(m){a=m}},width:{enumerable:true,configurable:false,
get:function(){return k},set:function(m){k=m}},height:{enumerable:true,configurable:false,get:function(){return c},set:function(m){c=m}}});if(d)if(typeof d==="function"){b.identity();d.call(b)}else if(isRectangle(d))b.compose(d.x,d.y,d.width,d.height);else throw new SyntaxError("[object Rectangle]: Passed an invalid initializer object.");else switch(h){case 0:b.compose(0,0,0,0);break;case 4:b.compose(i,a,k,c);break;default:throw new SyntaxError("[object Rectangle]: Invalid number of parameters.");
}return b};l=doodle.geom.Rectangle.isRect=function(i){return typeof i.x==="number"&&typeof i.y==="number"&&typeof i.width==="number"&&typeof i.height==="number"&&typeof i.top==="number"&&typeof i.bottom==="number"&&typeof i.left==="number"&&typeof i.right==="number"};doodle.utils.types.check_rect_type=function(i,a){if(l(i))return true;else{a=a===undefined?"check_rect_type":a;throw new TypeError(a+": Parameter must be a rectangle.");}};(function(){var i=doodle.geom.Rectangle;n={top:{enumerable:true,
configurable:false,get:function(){return this.y},set:function(a){this.y=a;this.height-=a}},right:{enumerable:true,configurable:false,get:function(){return this.x+this.width},set:function(a){this.width=a-this.x}},bottom:{enumerable:true,configurable:false,get:function(){return this.y+this.height},set:function(a){this.height=a-this.y}},left:{enumerable:true,configurable:false,get:function(){return this.x},set:function(a){this.x=a;this.width-=a}},clone:{enumerable:false,writable:false,configurable:false,
value:function(){return i(this.x,this.y,this.width,this.height)}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+")"}},toArray:{enumerable:false,writable:false,configurable:false,value:function(){return[this.top,this.right,this.bottom,this.left]}},compose:{enumerable:false,writable:false,configurable:false,value:function(a,k,c,h){this.x=a;this.y=k;this.width=c;this.height=h;return this}},offset:{enumerable:false,
writable:false,configurable:false,value:function(a,k){this.x+=a;this.y+=k;return this}},inflate:{enumerable:false,writable:false,configurable:false,value:function(a,k){this.x-=a;this.width+=2*a;this.y-=k;this.height+=2*k;return this}},equals:{enumerable:false,writable:false,configurable:false,value:function(a){return this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height}},isEmpty:{enumerable:false,writable:false,configurable:false,value:function(){return this.width>=0||this.height>=
0}},containsPoint:{enumerable:false,writable:false,configurable:false,value:function(a){var k=a.x;a=a.y;return k>=this.left&&k<=this.right&&a>=this.top&&a<=this.bottom}},containsRect:{enumerable:false,writable:false,configurable:false,value:function(a){return this.containsPoint({x:a.x,y:a.y})&&this.containsPoint({x:a.right,y:a.y})&&this.containsPoint({x:a.right,y:a.bottom})&&this.containsPoint({x:a.x,y:a.bottom})}},intersects:{enumerable:false,writable:false,configurable:false,value:function(a){return this.containsPoint({x:a.x,
y:a.y})||this.containsPoint({x:a.right,y:a.y})||this.containsPoint({x:a.right,y:a.bottom})||this.containsPoint({x:a.x,y:a.bottom})}},intersection:{enumerable:false,writable:false,configurable:false,value:function(a){var k=i();if(this.intersects(a)){k.left=Math.max(this.left,a.left);k.top=Math.max(this.top,a.top);k.right=Math.min(this.right,a.right);k.bottom=Math.min(this.bottom,a.bottom)}return k}},union:{enumerable:false,writable:false,configurable:false,value:function(a){var k=i();k.left=Math.min(this.left,
a.left);k.top=Math.min(this.top,a.top);k.right=Math.max(this.right,a.right);k.bottom=Math.max(this.bottom,a.bottom);return k}}}})()})();
(function(){var n,l,i,a,k=doodle.utils.types.check_function_type;doodle.EventDispatcher=function(c){var h={};Object.defineProperties(h,n);Object.defineProperties(h,{eventListeners:function(){var d={};return{enumerable:true,configurable:false,get:function(){return d}}}()});typeof c==="function"&&c.call(h);return h};n={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object EventDispatcher]"}},modify:{enumerable:false,writable:false,configurable:false,value:function(c){c.call(this);
return this}},addEventListener:{enumerable:false,writable:false,configurable:false,value:function(c,h,d){d=d===true;var b=this;this.eventListeners[c]||(this.eventListeners[c]={capture:[],bubble:[]});this.eventListeners[c][d?"capture":"bubble"].push(h);l.every(function(m){return b!==m})&&l.push(b)}},removeEventListener:{enumerable:false,writable:false,configurable:false,value:function(c,h,d){d=d===true;if(this.eventListeners[c]){var b=this.eventListeners[c];d=b[d?"capture":"bubble"];d.splice(d.indexOf(h),
1);b.capture.length===0&&b.bubble.length===0&&delete this.eventListeners[c];Object.keys(this.eventListeners).length===0&&l.splice(l.indexOf(this),1)}}},handleEvent:{enumerable:false,writable:false,configurable:false,value:function(c){var h=c.eventPhase===doodle.Event.CAPTURING_PHASE?"capture":"bubble",d=this.eventListeners[c.type],b=0,m;if((d=d&&d[h])&&d.length>0){c.__setCurrentTarget(this);b=d.length;for(m=0;m<b;m+=1){k(d[m],this+".handleEvent::listeners["+m+"]");h=d[m].call(this,c);if(h===false||
c.returnValue===false)c.__cancel||c.stopPropagation();if(c.__cancelNow)break}}return b>0?true:false}},dispatchEvent:{enumerable:true,writable:false,configurable:false,value:function(c){var h,d,b=[],m;if(c.__cancel)return false;c.target||c.__setTarget(this);h=c.target;for(d=h.parent||null;d;){b.push(d);d=d.parent}c.__setEventPhase(c.CAPTURING_PHASE);for(m=d=b.length;(m-=1)>=0;){b[m].handleEvent(c);if(c.__cancel)return true}c.__setEventPhase(c.AT_TARGET);h.handleEvent(c);if(c.__cancel)return true;if(!c.bubbles||
c.cancelBubble)return true;c.__setEventPhase(c.BUBBLING_PHASE);for(m=0;m<d;m+=1){b[m].handleEvent(c);if(c.__cancel||c.cancelBubble)return true}return true}},broadcastEvent:{enumerable:true,writable:false,configurable:false,value:function(c){var h,d,b;if(c.__cancel)throw Error(this+".broadcastEvent: Can not dispatch a cancelled event.");c.target||c.__setTarget(this);h=l.filter(function(m){return m.hasEventListener(c.type)});b=0;for(d=h.length;b<d;b+=1){h[b].handleEvent(c);if(c.__cancel)break}return true}},
hasEventListener:{enumerable:false,writable:false,configurable:false,value:function(c){return this.eventListeners!==null&&this.eventListeners.hasOwnProperty(c)}},willTrigger:{enumerable:false,writable:false,configurable:false,value:function(c){if(this.hasEventListener(c))return true;else if(!this.children||this.children.length===0)return false;else for(var h in this.children)if(this.children[h].willTrigger(c))return true;return false}}};l=doodle.EventDispatcher.dispatcher_queue=[];i=doodle.EventDispatcher.isEventDispatcher=
function(c){return c.toString()==="[object EventDispatcher]"};a=doodle.EventDispatcher.inheritsEventDispatcher=function(c){for(;c;)if(i(c))return true;else{if(typeof c!=="object")return false;c=Object.getPrototypeOf(c)}return false};doodle.utils.types.check_eventdispatcher_type=function(c,h,d){if(a(c))return true;else{h=h===undefined?"check_eventdispatcher_type":h;d=d===undefined?"":"("+d+")";throw new TypeError(h+d+": Parameter must be an EventDispatcher.");}}})();
(function(){function n(e,g,p){e.children.forEach(function(r){typeof p==="function"&&p(r);r.dispatchEvent(d(g,true));n(r,g,p)})}var l=0,i,a,k,c,h=doodle.geom.Point,d=doodle.Event,b=180/Math.PI,m=Math.PI/180;doodle.Node=function(e){var g=Object.create(doodle.EventDispatcher());Object.defineProperties(g,i);Object.defineProperties(g,{id:function(){var p;return{enumerable:true,configurable:false,get:function(){return p},set:function(r){p=r}}}(),root:function(){var p=null;return{enumerable:true,configurable:false,
get:function(){return p},set:function(r){p=r}}}(),parent:function(){var p=null;return{enumerable:true,configurable:false,get:function(){return p},set:function(r){p=r}}}(),children:function(){var p=[];return{enumerable:true,configurable:false,get:function(){return p}}}(),transform:function(){var p=doodle.geom.Matrix();return{enumerable:true,configurable:false,get:function(){return p},set:function(r){p=r}}}(),visible:function(){var p=true;return{enumerable:true,configurable:false,get:function(){return p},
set:function(r){p=r}}}(),alpha:function(){var p=1;return{enumerable:true,configurable:false,get:function(){return p},set:function(r){p=r>1?1:r<0?0:r}}}()});if(typeof e==="function"){e.call(g);e=undefined}if(g.id===undefined){g.id=e!==undefined?e:"node"+String("000"+l).slice(-3);l+=1}return g};i={x:{enumerable:true,configurable:false,get:function(){return this.transform.tx},set:function(e){this.transform.tx=e}},y:{enumerable:true,configurable:false,get:function(){return this.transform.ty},set:function(e){this.transform.ty=
e}},axis:{value:{x:this.x,y:this.y}},rotate:{value:function(e){this.axis.x!==undefined&&this.axis.y!==undefined?this.transform.rotateAroundInternalPoint(this.axis,e*m):this.transform.rotate(e*m)}},rotation:{enumerable:true,configurable:false,get:function(){return this.transform.rotation*b},set:function(e){this.transform.rotation=e*m}},scaleX:{enumerable:true,configurable:false,get:function(){return this.transform.a},set:function(e){this.transform.a=e}},scaleY:{enumerable:true,configurable:false,get:function(){return this.transform.d},
set:function(e){this.transform.d=e}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Node]"}},addChildAt:{enumerable:false,writable:false,configurable:false,value:function(e,g){if(this.children.indexOf(e)!==-1)return false;if(e.root!==this.root)e.root=this.root;e.parent!==null&&e.parent!==this&&e.parent.removeChild(e);e.parent=this;this.children.splice(g,0,e);if(c(e)){e.dispatchEvent(d(d.ADDED,true));n(e,d.ADDED)}return e}},addChild:{enumerable:false,writable:false,
configurable:false,value:function(e){return this.addChildAt(e,this.children.length)}},removeChildAt:{enumerable:false,writable:false,configurable:false,value:function(){function e(g,p){var r=g.getBounds(g.root);p&&p.clearRect(r.x,r.y,r.width,r.height);g.root=null}return function(g){var p=this.children[g],r=p.context;this.children.splice(g,1);if(r){e(p,r);p.dispatchEvent(d(d.REMOVED,true));n(p,d.REMOVED,function(u){e(u,r)})}p.root=null;p.parent=null}}()},removeChild:{enumerable:false,writable:false,
configurable:false,value:function(e){this.removeChildAt(this.children.indexOf(e))}},removeChildById:{enumerable:false,writable:false,configurable:false,value:function(e){this.removeChild(this.getChildById(e))}},removeAllChildren:{enumerable:false,writable:false,configurable:false,value:function(){for(var e=this.children.length;(e-=1)>=0;)this.removeChildAt(e)}},getChildById:{enumerable:false,writable:false,configurable:false,value:function(e){return this.children.filter(function(g){return g.id===
e})[0]}},setChildIndex:{enumerable:true,writable:false,configurable:false,value:function(e,g){var p=this.children,r=p.length,u=p.indexOf(e);if(u===-1)throw new ReferenceError(this+".setChildIndex(*child*, index): "+e+" does not exist on child list.");if(g>r||g<-r)throw new RangeError(this+".setChildIndex(child, *index*): "+g+" does not exist on child list.");p.splice(u,1);p.splice(g,0,e)}},swapChildrenAt:{enumerable:false,writable:false,configurable:false,value:function(e,g){var p=this.children;p[e]=
p.splice(g,1,p[e])[0]}},swapChildren:{enumerable:false,writable:false,configurable:false,value:function(e,g){var p=this.children;this.swapChildrenAt(p.indexOf(e),p.indexOf(g))}},swapDepths:{enumerable:false,writable:false,configurable:false,value:function(e){var g=this.parent;if(!g||!Array.isArray(g.children))throw Error(this+".swapDepths: no parent found.");else g.swapChildren(this,e)}},swapDepthAt:{enumerable:false,writable:false,configurable:false,value:function(e){var g=this.parent;if(!g||!Array.isArray(g.children))throw Error(this+
".swapDepthAt: no parent found.");else g.swapChildrenAt(e,g.children.indexOf(this))}},contains:{enumerable:false,writable:false,configurable:false,value:function(e){for(;e;){if(e===this)return true;e=e.parent}return false}},localToGlobal:{enumerable:false,writable:false,configurable:false,value:function(e){for(var g=this;g;){e=g.transform.transformPoint(e);g=g.parent}return e}},globalToLocal:{enumerable:false,writable:false,configurable:false,value:function(e){var g=this.localToGlobal({x:0,y:0});
return h(e.x-g.x,e.y-g.y)}}};a=doodle.Node.isNode=function(e){return e.toString()==="[object Node]"};k=doodle.Node.inheritsNode=function(e){for(;e;)if(a(e))return true;else{if(typeof e!=="object")return false;e=Object.getPrototypeOf(e)}return false};doodle.utils.types.check_node_type=function(e,g,p){if(k(e))return true;else{g=g===undefined?"check_node_type":g;p=p===undefined?"":"("+p+")";throw new TypeError(g+p+": Parameter must be a Node.");}};c=doodle.Node.inDisplayList=function(e){for(;e;){if(e.context)return true;
e=e.parent}return false}})();
(function(){var n,l,i,a=doodle.utils.hex_to_rgb_str,k=doodle.utils.rgb_str_to_hex,c=doodle.utils.types.check_context_type,h=doodle.utils.get_element,d=doodle.geom.Rectangle;doodle.Sprite=function(b){var m=arguments.length,e,g,p=[],r=0,u=0,y=0,z=0,A=0,s=0;g=typeof b==="string"?Object.create(doodle.Node(b)):Object.create(doodle.Node());if(m===1&&typeof arguments[0]==="function"){e=arguments[0];b=undefined}else if(m>1)throw new SyntaxError("[object Sprite]: Invalid number of parameters.");Object.defineProperties(g,
n);Object.defineProperties(g,{width:function(){var f=0;return{enumerable:true,configurable:false,get:function(){return f},set:function(j){f=j}}}(),height:function(){var f=0;return{enumerable:true,configurable:false,get:function(){return f},set:function(j){f=j}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(f){var j=d(),o=this.width,q=this.height,t=this.localToGlobal({x:r,y:u}),v=this.localToGlobal({x:r+o,y:u});o=this.localToGlobal({x:r+o,y:u+q});q=this.localToGlobal({x:r,
y:u+q});t=f.globalToLocal(t);v=f.globalToLocal(v);o=f.globalToLocal(o);q=f.globalToLocal(q);j.left=Math.min(t.x,v.x,o.x,q.x);j.right=Math.max(t.x,v.x,o.x,q.x);j.top=Math.min(t.y,v.y,o.y,q.y);j.bottom=Math.max(t.y,v.y,o.y,q.y);return j}},hitArea:function(){var f=null;return{enumerable:true,configurable:false,get:function(){return f===null?this.getBounds(this):f},set:function(j){f=j=j===false?null:j}}}(),hitTestObject:{enumerable:true,writable:true,configurable:false,value:function(f){return this.getBounds(this).intersects(f.getBounds(this))}},
hitTestPoint:{enumerable:true,writable:true,configurable:false,value:function(f){return this.getBounds(this).containsPoint(this.globalToLocal(f))}},context:{get:function(){for(var f=this.parent;f;){if(f.context){f=f.context;c(f,this+".context (traversal)");return f}f=f.parent}return null}},__draw:{enumerable:false,writable:false,configurable:false,value:function(f){p.forEach(function(j){j.call(g,f)})}},debug:{enumerable:true,configurable:false,value:Object.create(null,{boundingBox:function(){var f=
"rgb(0, 0, 255)";return{enumerable:true,configurable:false,get:function(){return k(f)},set:function(j){f=a(j)}}}()})},graphics:{value:Object.create(null,{draw:{enumerable:false,writable:false,configurable:false,value:function(f){p.push(f)}.bind(g)},clear:{enumerable:false,writable:false,configurable:false,value:function(){for(var f=p.length;(f-=1)>=0;)p.splice(f,1);A=s=r=u=y=z=this.height=this.width=0}.bind(g)},rect:{enumerable:false,writable:false,configurable:false,value:function(f,j,o,q){r=Math.min(0,
f,r);u=Math.min(0,j,u);y=Math.max(0,f,f+o,y);z=Math.max(0,j,j+q,z);this.width=-r+y;this.height=-u+z;p.push(function(t){t.beginPath();t.rect(f,j,o,q);t.closePath();t.stroke()})}.bind(g)},circle:{enumerable:false,writable:false,configurable:false,value:function(f,j,o){r=Math.min(0,-o+f,r);u=Math.min(0,-o+j,u);y=Math.max(0,f,f+o,y);z=Math.max(0,j,j+o,z);this.width=-r+y;this.height=-u+z;p.push(function(q){q.beginPath();q.arc(f,j,o,0,6.283185307179586,true);q.closePath();q.stroke()})}.bind(g)},ellipse:{enumerable:false,
writable:false,configurable:false,value:function(f,j,o,q){q=q===undefined?o:q;var t=o/2,v=q/2,w=0.5522847498*t,D=0.5522847498*v;r=Math.min(0,-t+f,r);u=Math.min(0,-v+j,u);y=Math.max(0,f,f+t,y);z=Math.max(0,j,j+v,z);this.width=-r+y;this.height=-u+z;p.push(function(x){x.beginPath();x.moveTo(f+t,j);x.bezierCurveTo(f+t,j-D,f+w,j-v,f,j-v);x.bezierCurveTo(f-w,j-v,f-t,j-D,f-t,j);x.bezierCurveTo(f-t,j+D,f-w,j+v,f,j+v);x.bezierCurveTo(f+w,j+v,f+t,j+D,f+t,j);x.closePath();x.stroke()})}.bind(g)},roundRect:{enumerable:false,
writable:false,configurable:false,value:function(f,j,o,q,t,v){t=t===undefined?0:t;v=v===undefined?0:v;var w=f+o,D=w-t,x=f+t,B=j+q,E=B-v,F=j+v;r=Math.min(0,f,r);u=Math.min(0,j,u);y=Math.max(0,f,f+o,y);z=Math.max(0,j,j+q,z);this.width=-r+y;this.height=-u+z;p.push(function(C){C.beginPath();C.moveTo(x,j);C.beginPath();C.lineTo(D,j);C.quadraticCurveTo(w,j,w,F);C.lineTo(w,E);C.quadraticCurveTo(w,B,D,B);C.lineTo(x,B);C.quadraticCurveTo(f,B,f,E);C.lineTo(f,F);C.quadraticCurveTo(f,j,x,j);C.closePath();C.stroke()})}.bind(g)},
moveTo:{enumerable:false,writable:false,configurable:false,value:function(f,j){p.push(function(o){o.moveTo(f,j)});A=f;s=j}.bind(g)},lineTo:{enumerable:false,writable:false,configurable:false,value:function(f,j){r=Math.min(0,f,A,r);u=Math.min(0,j,s,u);y=Math.max(0,f,A,y);z=Math.max(0,j,s,z);this.width=y-r;this.height=z-u;p.push(function(o){o.lineTo(f,j)});A=f;s=j}.bind(g)},curveTo:{enumerable:false,writable:false,configurable:false,value:function(f,j){var o=A,q=s,t=f.x,v=f.y,w=j.x,D=j.y,x,B=0,E=0;
x=(o-t)/(o-2*t+w);if(0<=x&&x<=1)B=(1-x)*(1-x)*o+2*(1-x)*x*t+x*x*w;x=(q-v)/(q-2*v+D);if(0<=x&&x<=1)E=(1-x)*(1-x)*q+2*(1-x)*x*v+x*x*D;r=Math.min(0,o,B,w,r);u=Math.min(0,q,E,D,u);y=Math.max(0,o,B,w,y);z=Math.max(0,q,E,D,z);this.width=-r+y;this.height=-u+z;p.push(function(F){F.quadraticCurveTo(t,v,w,D)});A=w;s=D}.bind(g)},bezierCurveTo:{enumerable:false,writable:false,configurable:false,value:function(f,j,o){var q=Math.pow,t=Math.max,v=Math.min,w=A,D=s,x=f.x,B=f.y,E=j.x,F=j.y,C=o.x,H=o.y,G,I=o=j=0,J=
0;for(f=0.1;f<1;f+=0.1){G=q(1-f,3)*w+3*q(1-f,2)*f*x+3*q(1-f,1)*q(f,2)*E+q(f,3)*C;if(G>j)j=G;if(G<o)o=G;G=q(1-f,3)*D+3*q(1-f,2)*f*B+3*q(1-f,1)*q(f,2)*F+q(f,3)*H;if(G>I)I=G;if(G<J)J=G}r=v(0,w,o,C,r);u=v(0,D,J,H,u);y=t(0,w,j,C,y);z=t(0,D,I,H,z);this.width=-r+y;this.height=-u+z;p.push(function(K){K.bezierCurveTo(x,B,E,F,C,H)});A=C;s=H}.bind(g)},beginFill:{enumerable:false,writable:false,configurable:false,value:function(f,j){j=j===undefined?1:j;p.push(function(o){o.fillStyle=a(f,j)})}.bind(g)},beginGradientFill:{enumerable:true,
writable:false,configurable:false,value:function(){var f=doodle.GradientType.LINEAR,j=doodle.GradientType.RADIAL;return function(o,q,t,v,w,D){p.push(function(x){var B=doodle.utils.hex_to_rgb_str,E,F=v.length,C=0;if(o===f)E=x.createLinearGradient(q.x,q.y,t.x,t.y);else if(o===j)E=x.createRadialGradient(q.x,q.y,q.radius,t.x,t.y,t.radius);else throw new TypeError(this+".graphics.beginGradientFill(*type*, point1, point2, ratios, colors, alphas): Unknown gradient type.");for(;C<F;C+=1)E.addColorStop(v[C],
B(w[C],D[C]));x.fillStyle=E})}.bind(g)}()},beginPatternFill:{enumerable:true,writable:false,configurable:false,value:function(f,j){var o=null,q;q=doodle.Pattern;var t=doodle.Event;j=j===undefined?q.REPEAT:j;if(j!==q.REPEAT&&j!==q.NO_REPEAT&&j!==q.REPEAT_X&&j!==q.REPEAT_Y)throw new SyntaxError(this+".graphics.beginPatternFill(image, *repeat*): Invalid pattern repeat type.");if(typeof f==="string")if(f[0]==="#")f=h(f,this+".beginPatternFill");else(function(){var v=encodeURI(f);f=new Image;f.src=v})();
if(f.complete)o=f;else{f.onload=function(){o=f;this.dispatchEvent(t(t.LOAD))}.bind(this);q=function(){throw new URIError(this+".graphics.beginPatternFill(*image*,repeat): Unable to load "+f.src);}.bind(this);f.onerror=q;f.onabort=q}p.push(function(v){v.fillStyle=o?v.createPattern(o,j):"rgba(0,0,0,0)"})}.bind(g)},lineStyle:{enumerable:true,writable:false,configurable:false,value:function(f,j,o,q,t,v){f=f===undefined?1:f;j=j===undefined?"#000000":j;o=o===undefined?1:o;q=q===undefined?doodle.LineCap.BUTT:
q;t=t===undefined?doodle.LineJoin.MITER:t;v=v===undefined?10:v;if(typeof j==="string"||typeof j==="number")j=a(j,o);else throw new TypeError(this+".graphics.lineStyle(thickness,*color*,alpha,caps,joints,miterLimit): Color must be a hex value.");p.push(function(w){w.lineWidth=f;w.strokeStyle=j;w.lineCap=q;w.lineJoin=t;w.miterLimit=v})}.bind(g)},beginPath:{enumerable:false,writable:false,configurable:false,value:function(){p.push(function(f){f.beginPath();f.moveTo(A,s)})}},closePath:{enumerable:false,
writable:false,configurable:false,value:function(){p.push(function(f){f.closePath();f.stroke()});s=A=0}},endFill:{enumerable:false,writable:false,configurable:false,value:function(){p.push(function(f){f.fill()})}},stroke:{enumerable:false,writable:false,configurable:false,value:function(){p.push(function(f){f.stroke()});s=A=0}}})}});e&&e.call(g);return g};l=doodle.Sprite.isSprite=function(b){return b.toString()==="[object Sprite]"};i=doodle.Sprite.inheritsSprite=function(b){for(;b;)if(l(b))return true;
else{if(typeof b!=="object")return false;b=Object.getPrototypeOf(b)}return false};doodle.utils.types.check_sprite_type=function(b,m,e){if(i(b))return true;else{m=m===undefined?"check_sprite_type":m;e=e===undefined?"":"("+e+")";throw new TypeError(m+e+": Parameter must inherit from Sprite.");}};(function(){n={rotation:{enumerable:true,configurable:false,get:function(){return this.transform.rotation*180/Math.PI},set:function(b){this.transform.rotation=b*Math.PI/180}},toString:{enumerable:false,writable:false,
configurable:false,value:function(){return"[object Sprite]"}},compose:{enumerable:false,writable:false,configurable:false,value:function(b,m,e,g){this.x=b;this.y=m;this.width=e;this.height=g;return this}}}})()})();
(function(){var n,l=doodle.utils,i=l.rgb_str_to_hex,a=l.hex_to_rgb_str,k=l.get_element,c=l.get_element_property,h=l.set_element_property;doodle.ElementNode=function(d){var b=arguments.length,m,e=Object.create(doodle.Node());if(b===1&&typeof arguments[0]==="function"){m=arguments[0];d=undefined}else if(b>1)throw new SyntaxError("[object ElementNode]: Invalid number of parameters.");Object.defineProperties(e,n);Object.defineProperties(e,{element:{get:function(){return d},set:function(g){d=g}}});m&&
m.call(e);return e};n={id:{get:function(){return c(this.element,"id")},set:function(d){return h(this.element,"id",d,"html")}},width:{get:function(){return c(this.element,"width","int")},set:function(d){h(this.element,"width",d+"px");return d}},height:{get:function(){return c(this.element,"height","int")},set:function(d){h(this.element,"height",d+"px");return d}},backgroundColor:{get:function(){return i(c(this.element,"backgroundColor"))},set:function(d){if(typeof d==="number")d=a(d);return h(this.element,
"backgroundColor",d)}},backgroundImage:function(){var d=/^url\((.*)\)/;return{get:function(){var b=c(this.element,"backgroundImage");return(b=b==="none"?null:b.match(d))?b[1]:null},set:function(b){if(!b)return h(this.element,"backgroundImage",null);if(typeof b==="string"){if(b[0]==="#")b=k(b).src}else if(b&&b.tagName==="IMG")b=b.src;d.test(b)||(b="url("+encodeURI(b)+")");return h(this.element,"backgroundImage",b)}}}(),backgroundRepeat:{get:function(){return c(this.element,"backgroundRepeat")},set:function(d){return h(this.element,
"backgroundRepeat",d)}},alpha:{get:function(){return c(this.element,"opacity","float")},set:function(d){return h(this.element,"opacity",d)}},visible:{get:function(){switch(c(this.element,"visibility")){case "visible":return true;case "hidden":return false;default:throw new ReferenceError(this+".visible: Unable to determine visibility.");}},set:function(d){d?h(this.element,"visibility","visible"):h(this.element,"visibility","hidden");return d}},toString:{enumerable:false,writable:false,configurable:false,
value:function(){return"[object ElementNode]"}}}})();
(function(){var n,l=0,i=doodle.utils.get_element_property,a=doodle.utils.set_element_property;doodle.Layer=function(k,c){var h=arguments.length,d,b=Object.create(doodle.ElementNode());if(h===1&&typeof arguments[0]==="function"){d=arguments[0];k=undefined}else if(h>2)throw new SyntaxError("[object Layer]: Invalid number of parameters.");Object.defineProperties(b,n);Object.defineProperties(b,{element:{get:function(){return c},set:function(m){c=m}}});b.element=c||document.createElement("canvas");b.element.style.position=
"absolute";d&&d.call(b);if(!b.id){b.id=typeof k==="string"?k:"layer"+String("00"+l).slice(-2);l+=1}return b};(function(){var k=doodle.Layer.isLayer=function(h){return h.toString()==="[object Layer]"},c=doodle.Layer.inheritsLayer=function(h){for(;h;)if(k(h))return true;else{if(typeof h!=="object")return false;h=Object.getPrototypeOf(h)}return false};doodle.utils.types.check_layer_type=function(h,d,b){if(c(h))return true;else{d=d===undefined?"check_layer_type":d;b=b===undefined?"":"("+b+")";throw new TypeError(d+
b+": Parameter must be a Layer.");}}})();n={context:{get:function(){return this.element.getContext("2d")}},width:{get:function(){return i(this.element,"width","int")},set:function(k){a(this.element,"width",k,"html");return k}},height:{get:function(){return i(this.element,"height","int")},set:function(k){a(this.element,"height",k,"html");return k}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Layer]"}}}})();
(function(){var n,l=doodle.Layer.isLayer,i=doodle.utils.get_element,a=doodle.utils.get_element_property,k=doodle.utils.set_element_property;inheritsSprite=doodle.Sprite.inheritsSprite;doodle_Event=doodle.Event;doodle_MouseEvent=doodle.MouseEvent;ENTER_FRAME=doodle_Event.ENTER_FRAME;enterFrame=doodle_Event(ENTER_FRAME);dispatcher_queue=doodle.EventDispatcher.dispatcher_queue;doodle.Display=function(c){function h(){d(u);dispatcher_queue.forEach(function(j){if(j.hasEventListener(ENTER_FRAME)){enterFrame.__setTarget(j);
j.handleEvent(enterFrame)}});b(u);y+=1;s&&s.update()}function d(){u.children.forEach(function(j){var o=j.context;o.save();o.setTransform(1,0,0,1,0,0);o.clearRect(0,0,j.width,j.height);o.restore()})}function b(j,o){var q;j.children.forEach(function(t){if(t.visible){o=o||t.context;q=t.transform.toArray();o.save();o.transform(q[0],q[1],q[2],q[3],q[4],q[5]);if(f){var v=o;if(typeof t.getBounds==="function"){var w=t.getBounds(u);v.save();v.setTransform(1,0,0,1,0,0);v.lineWidth=0.5;v.strokeStyle=t.debug.boundingBox;
v.strokeRect(w.x,w.y,w.width,w.height);v.restore()}}if(!l(t))if(t.alpha!==1)o.globalAlpha=t.alpha;typeof t.__draw==="function"&&t.__draw(o);b(t,o);o.restore()}})}function m(){d(u);b(u)}function e(j){var o=doodle.EventDispatcher.dispatcher_queue,q=doodle_MouseEvent.MOUSE_OVER,t=doodle_MouseEvent.MOUSE_OUT,v=doodle_MouseEvent.MOUSE_MOVE,w=doodle_MouseEvent(j),D=w.type,x=false;o.forEach(function(B){if(inheritsSprite(B)){var E=B.getBounds(u).containsPoint({x:w.offsetX,y:w.offsetY});w.__setTarget(null);
if(E&&B.hasEventListener(D)){B.dispatchEvent(w);x=true}if(E&&B.hasEventListener(q))if(!B.__mouse_over){B.__mouse_over=true;w.__setType(q);B.dispatchEvent(w);x=true}if(!E&&B.hasEventListener(t))if(B.__mouse_over){B.__mouse_over=false;w.__setType(t);B.dispatchEvent(w);x=true}}else if(B.hasEventListener(D)){w.__setTarget(null);B.dispatchEvent(w);x=true}});o.forEach(function(B){if(B===u&&!x&&B.hasEventListener(v)){D===v&&w.__setType(v);w.__setTarget(null);B.dispatchEvent(w);x=true}})}function g(j){var o=
doodle.EventDispatcher.dispatcher_queue,q=doodle.KeyboardEvent(j);o.forEach(function(t){t.hasEventListener(q.type)&&t.handleEvent(q)})}var p=arguments.length,r,u=Object.create(doodle.ElementNode()),y=0,z=0,A=0,s=null,f=false;if(p===1&&typeof arguments[0]==="function"){r=arguments[0];c=undefined}else if(p>1)throw new SyntaxError("[object Display]: Invalid number of parameters.");Object.defineProperties(u,n);Object.defineProperties(u,{element:{get:function(){return c},set:function(j){var o=i(j,"[object Display]"),
q;c=o;c.style.position="relative";this.root=this;j=o.getAttribute("width");o=o.getAttribute("height");if(j)this.width=parseInt(j);if(o)this.height=parseInt(o);for(q in doodle_MouseEvent)c.addEventListener(doodle_MouseEvent[q],e,false);c.addEventListener(doodle_MouseEvent.MOUSE_MOVE,function(t){z=t.offsetX;A=t.offsetY});document.addEventListener(doodle.KeyboardEvent.KEY_PRESS,g,false);document.addEventListener(doodle.KeyboardEvent.KEY_DOWN,g,false);document.addEventListener(doodle.KeyboardEvent.KEY_UP,
g,false)}},frameRate:function(){var j=false,o;return{get:function(){return j},set:function(q){if(q===0||q===false){j=false;clearInterval(o)}else if(typeof q==="number"&&isFinite(1E3/q)){j=q;clearInterval(o);o=setInterval(h,1E3/j)}else throw new TypeError("[object Display].frameRate: Parameter must be a valid number or false.");}}}(),mouseX:{enumerable:false,configurable:false,get:function(){return z}},mouseY:{enumerable:false,configurable:false,get:function(){return A}},debug:{enumerable:true,configurable:false,
value:Object.create(null,{stats:{enumerable:true,configurable:false,get:function(){return s?true:false},set:function(j){if(j&&!s){s=new Stats;u.element.appendChild(s.domElement)}else if(!j&&s){u.element.removeChild(s.domElement);s=null}}},boundingBox:{enumerable:true,configurable:false,get:function(){return f},set:function(j){f=j}}})}});if(r)r.call(u);else u.element=c;if(!u.element)throw new ReferenceError("[object Display]: Requires a HTML element.");u.addEventListener(doodle_Event.ADDED,m);u.addEventListener(doodle_Event.REMOVED,
m);m();return u};n={width:{get:function(){return a(this.element,"width","int")},set:function(c){k(this.element,"width",c+"px");this.children.forEach(function(h){h.width=c});return c}},height:{get:function(){return a(this.element,"height","int")},set:function(c){k(this.element,"height",c+"px");this.children.forEach(function(h){h.height=c});return c}},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Display]"}},toDataUrl:{value:function(){}},addChildAt:{value:function(c,
h){c.parent!==null&&c.parent!==this&&c.parent.removeChild(node);c.root=this;c.parent=this;c.width=this.width;c.height=this.height;this.children.splice(h,0,c);this.element.appendChild(c.element);return this}},removeChildAt:{enumerable:false,writable:false,configurable:false,value:function(c){var h=this.children[c];h.root=null;h.parent=null;this.children.splice(c,1);this.element.removeChild(h.element)}},swapChildrenAt:{enumerable:false,writable:false,configurable:false,value:function(c,h){var d=this.children;
d[c]=d.splice(h,1,d[c])[0];c>h?this.element.insertBefore(d[h].element,d[c].element):this.element.insertBefore(d[c].element,d[h].element)}},addLayer:{value:function(c){c=doodle.Layer(c);this.addChild(c);return c}},removeLayer:{value:function(c){this.removeChildById(c)}}}})();
