var doodle={};doodle.geom={};if(typeof Function.prototype.bind!=="function")Function.prototype.bind=function(l){var q=this;return function(){return q.apply(l,arguments)}};
doodle.utils={rgb_to_hex:function(l,q,h){l=(h|q<<8|l<<16).toString(16);return"#"+String("000000"+l).slice(-6)},rgb_str_to_hex:function(l){var q=doodle.utils;l=q.rgb_str_to_rgb(l);return q.rgb_to_hex(parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10))},rgb_to_rgb_str:function(l,q,h,j){j=j===undefined?1:j;j=j<0?0:j>1?1:j;return j===1?"rgb("+l+","+q+","+h+")":"rgba("+l+","+q+","+h+","+j+")"},rgb_str_to_rgb:function(){var l=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?(.*)\)$/;return function(q){q=
q.trim().match(l);var h=[parseInt(q[1],10),parseInt(q[2],10),parseInt(q[3],10)];q=parseFloat(q[4]);typeof q==="number"&&!isNaN(q)&&h.push(q);return h}}(),hex_to_rgb:function(l){if(typeof l==="string"){l=l[0]==="#"?l.slice(1):l;l=parseInt(l,16)}return[l>>16&255,l>>8&255,l&255]},hex_to_rgb_str:function(l,q){var h=doodle.utils;q=q===undefined?1:q;l=h.hex_to_rgb(l);return h.rgb_to_rgb_str(l[0],l[1],l[2],q)},get_element:function(l){if(typeof l==="string"){l=l[0]==="#"?l.slice(1):l;return document.getElementById(l)}else return l&&
l.tagName?l:null},get_style_property:function(l,q,h){h=h===undefined?true:false;try{if(h&&document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(l,null)[q];else if(l.currentStyle)return l.currentStyle[q];else if(l.style)return l.style[q];else throw new ReferenceError("get_style_property: Cannot read property '"+q+"' of "+l+".");}catch(j){throw new ReferenceError("get_style_property: Cannot read property '"+q+"' of "+l+".");}},get_element_property:function(l,
q,h,j){h=h||false;var e;try{e=doodle.utils.get_style_property(l,q,j)}catch(i){e=undefined}if(e===undefined||e===null||e==="")e=l.getAttribute(q);if(h!==false)switch(h){case "int":e=parseInt(e,10);e=isNaN(e)?null:e;break;case "number":case "float":e=parseFloat(e);e=isNaN(e)?null:e;break;case "string":e=String(e);break;case "object":l={};e=l[q]=e;break;default:break}return e},set_element_property:function(l,q,h,j){j=j===undefined?"css":j;switch(j){case "css":l.style[q]=h;break;case "html":l.setAttribute(q,
h);break;default:throw new SyntaxError("set_element_property: type must be 'css' property or 'html' attribute.");}return h},create_scene_path:function(){return function l(q,h,j){h=h===undefined?[]:h;j=j===undefined?false:j;var e=q.children.length;j&&h.splice(0,h.length);if(e!==0)for(;e--;)l(q.children[e],h,false);h.push(q);return h}}()};
Object.defineProperty(doodle,"Keyboard",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BACKSPACE:{enumerable:true,writable:false,configurable:false,value:8},TAB:{enumerable:true,writable:false,configurable:false,value:9},ENTER:{enumerable:true,writable:false,configurable:false,value:13},COMMAND:{enumerable:true,writable:false,configurable:false,value:15},SHIFT:{enumerable:true,writable:false,configurable:false,value:16},CONTROL:{enumerable:true,writable:false,configurable:false,
value:17},ALTERNATE:{enumerable:true,writable:false,configurable:false,value:18},PAUSE:{enumerable:true,writable:false,configurable:false,value:19},CAPS_LOCK:{enumerable:true,writable:false,configurable:false,value:20},NUMPAD:{enumerable:true,writable:false,configurable:false,value:21},ESCAPE:{enumerable:true,writable:false,configurable:false,value:27},SPACE:{enumerable:true,writable:false,configurable:false,value:32},PAGE_UP:{enumerable:true,writable:false,configurable:false,value:33},PAGE_DOWN:{enumerable:true,
writable:false,configurable:false,value:34},END:{enumerable:true,writable:false,configurable:false,value:35},HOME:{enumerable:true,writable:false,configurable:false,value:36},LEFT:{enumerable:true,writable:false,configurable:false,value:37},UP:{enumerable:true,writable:false,configurable:false,value:38},RIGHT:{enumerable:true,writable:false,configurable:false,value:39},DOWN:{enumerable:true,writable:false,configurable:false,value:40},INSERT:{enumerable:true,writable:false,configurable:false,value:45},
DELETE:{enumerable:true,writable:false,configurable:false,value:46},NUMBER_0:{enumerable:true,writable:false,configurable:false,value:48},NUMBER_1:{enumerable:true,writable:false,configurable:false,value:49},NUMBER_2:{enumerable:true,writable:false,configurable:false,value:50},NUMBER_3:{enumerable:true,writable:false,configurable:false,value:51},NUMBER_4:{enumerable:true,writable:false,configurable:false,value:52},NUMBER_5:{enumerable:true,writable:false,configurable:false,value:53},NUMBER_6:{enumerable:true,
writable:false,configurable:false,value:54},NUMBER_7:{enumerable:true,writable:false,configurable:false,value:55},NUMBER_8:{enumerable:true,writable:false,configurable:false,value:56},NUMBER_9:{enumerable:true,writable:false,configurable:false,value:57},A:{enumerable:true,writable:false,configurable:false,value:65},B:{enumerable:true,writable:false,configurable:false,value:66},C:{enumerable:true,writable:false,configurable:false,value:67},D:{enumerable:true,writable:false,configurable:false,value:68},
E:{enumerable:true,writable:false,configurable:false,value:69},F:{enumerable:true,writable:false,configurable:false,value:70},G:{enumerable:true,writable:false,configurable:false,value:71},H:{enumerable:true,writable:false,configurable:false,value:72},I:{enumerable:true,writable:false,configurable:false,value:73},J:{enumerable:true,writable:false,configurable:false,value:74},K:{enumerable:true,writable:false,configurable:false,value:75},L:{enumerable:true,writable:false,configurable:false,value:76},
M:{enumerable:true,writable:false,configurable:false,value:77},N:{enumerable:true,writable:false,configurable:false,value:78},O:{enumerable:true,writable:false,configurable:false,value:79},P:{enumerable:true,writable:false,configurable:false,value:80},Q:{enumerable:true,writable:false,configurable:false,value:81},R:{enumerable:true,writable:false,configurable:false,value:82},S:{enumerable:true,writable:false,configurable:false,value:83},T:{enumerable:true,writable:false,configurable:false,value:84},
U:{enumerable:true,writable:false,configurable:false,value:85},V:{enumerable:true,writable:false,configurable:false,value:86},W:{enumerable:true,writable:false,configurable:false,value:87},X:{enumerable:true,writable:false,configurable:false,value:88},Y:{enumerable:true,writable:false,configurable:false,value:89},Z:{enumerable:true,writable:false,configurable:false,value:90},WINDOWS_KEY:{enumerable:true,writable:false,configurable:false,value:91},NUMPAD_0:{enumerable:true,writable:false,configurable:false,
value:96},NUMPAD_1:{enumerable:true,writable:false,configurable:false,value:97},NUMPAD_2:{enumerable:true,writable:false,configurable:false,value:98},NUMPAD_3:{enumerable:true,writable:false,configurable:false,value:99},NUMPAD_4:{enumerable:true,writable:false,configurable:false,value:100},NUMPAD_5:{enumerable:true,writable:false,configurable:false,value:101},NUMPAD_6:{enumerable:true,writable:false,configurable:false,value:102},NUMPAD_7:{enumerable:true,writable:false,configurable:false,value:103},
NUMPAD_8:{enumerable:true,writable:false,configurable:false,value:104},NUMPAD_9:{enumerable:true,writable:false,configurable:false,value:105},NUMPAD_MULTIPLY:{enumerable:true,writable:false,configurable:false,value:106},NUMPAD_ADD:{enumerable:true,writable:false,configurable:false,value:107},NUMPAD_ENTER:{enumerable:true,writable:false,configurable:false,value:108},NUMPAD_SUBTRACT:{enumerable:true,writable:false,configurable:false,value:109},NUMPAD_DECIMAL:{enumerable:true,writable:false,configurable:false,
value:110},NUMPAD_DIVIDE:{enumerable:true,writable:false,configurable:false,value:111},F1:{enumerable:true,writable:false,configurable:false,value:112},F2:{enumerable:true,writable:false,configurable:false,value:113},F3:{enumerable:true,writable:false,configurable:false,value:114},F4:{enumerable:true,writable:false,configurable:false,value:115},F5:{enumerable:true,writable:false,configurable:false,value:116},F6:{enumerable:true,writable:false,configurable:false,value:117},F7:{enumerable:true,writable:false,
configurable:false,value:118},F8:{enumerable:true,writable:false,configurable:false,value:119},F9:{enumerable:true,writable:false,configurable:false,value:120},F10:{enumerable:true,writable:false,configurable:false,value:121},F11:{enumerable:true,writable:false,configurable:false,value:122},F12:{enumerable:true,writable:false,configurable:false,value:123},F13:{enumerable:true,writable:false,configurable:false,value:124},F14:{enumerable:true,writable:false,configurable:false,value:125},F15:{enumerable:true,
writable:false,configurable:false,value:126},SCROLL:{enumerable:true,writable:false,configurable:false,value:145},SEMICOLON:{enumerable:true,writable:false,configurable:false,value:186},EQUAL:{enumerable:true,writable:false,configurable:false,value:187},COMMA:{enumerable:true,writable:false,configurable:false,value:188},MINUS:{enumerable:true,writable:false,configurable:false,value:189},PERIOD:{enumerable:true,writable:false,configurable:false,value:190},SLASH:{enumerable:true,writable:false,configurable:false,
value:191},BACKQUOTE:{enumerable:true,writable:false,configurable:false,value:192},LEFTBRACKET:{enumerable:true,writable:false,configurable:false,value:219},BACKSLASH:{enumerable:true,writable:false,configurable:false,value:220},RIGHTBRACKET:{enumerable:true,writable:false,configurable:false,value:221},QUOTE:{enumerable:true,writable:false,configurable:false,value:222}})});
Object.defineProperty(doodle,"GradientType",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{LINEAR:{enumerable:true,writable:false,configurable:false,value:"linearGradient"},RADIAL:{enumerable:true,writable:false,configurable:false,value:"radialGradient"}})});
Object.defineProperty(doodle,"Pattern",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{REPEAT:{enumerable:true,writable:false,configurable:false,value:"repeat"},REPEAT_X:{enumerable:true,writable:false,configurable:false,value:"repeat-x"},REPEAT_Y:{enumerable:true,writable:false,configurable:false,value:"repeat-y"},NO_REPEAT:{enumerable:true,writable:false,configurable:false,value:"no-repeat"}})});
Object.defineProperty(doodle,"LineCap",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BUTT:{enumerable:true,writable:false,configurable:false,value:"butt"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},SQUARE:{enumerable:true,writable:false,configurable:false,value:"square"}})});
Object.defineProperty(doodle,"LineJoin",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{MITER:{enumerable:true,writable:false,configurable:false,value:"miter"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},BEVEL:{enumerable:true,writable:false,configurable:false,value:"bevel"}})});
(function(){var l,q,h;doodle.Event=function(j,e,i){var s=Object.create(l),k=arguments.length,a,d;Object.defineProperties(s,q);Object.defineProperties(s,function(){var c,g,b,f=false,o=false,n=0,r=null,t=null,v=null,x=new Date,p=true,m=false,A=false;d=function(z,C,u){c=u?u:z.type;g=z.bubbles;b=z.cancelable;f=z.cancelBubble;o=z.defaultPrevented;n=z.eventPhase;if(C===false){r=z.currentTarget;t=z.target}else t=r=C;v=z.srcElement;x=z.timeStamp;p=z.returnValue;if(z.__cancel)m=true;if(z.__cancelNow)A=true};
return{type:{enumerable:true,configurable:false,get:function(){return c}},__setType:{enumerable:false,value:function(z){c=z}},bubbles:{enumerable:true,configurable:false,get:function(){return g}},cancelable:{enumerable:true,configurable:false,get:function(){return b}},cancelBubble:{enumerable:true,configurable:false,get:function(){return f},set:function(z){f=z}},__cancel:{enumerable:false,configurable:false,get:function(){return m}},__cancelNow:{enumerable:false,configurable:false,get:function(){return A}},
currentTarget:{enumerable:true,configurable:false,get:function(){return r}},__setCurrentTarget:{enumerable:false,value:function(z){r=z;return this}},target:{enumerable:true,configurable:false,get:function(){return t}},__setTarget:{enumerable:false,value:function(z){t=z;return this}},eventPhase:{enumerable:true,configurable:false,get:function(){return n}},__setEventPhase:{enumerable:false,value:function(z){n=z;return this}},srcElement:{enumerable:true,configurable:false,get:function(){return v}},timeStamp:{enumerable:true,
configurable:false,get:function(){return x}},returnValue:{enumerable:true,configurable:false,get:function(){return p}},initEvent:{enumerable:true,configurable:false,value:function(z,C,u){C=C===undefined?false:C;u=u===undefined?false:u;c=z;g=C;b=u;return this}},preventDefault:{enumerable:true,configurable:false,value:function(){o=true}},stopPropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)m=true;else throw Error(this+".stopPropagation: Event can not be cancelled.");
}},stopImmediatePropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)A=m=true;else throw Error(this+".stopImmediatePropagation: Event can not be cancelled.");}},__copyEventProperties:{enumerable:false,configurable:false,value:function(z,C,u){C=C===undefined?false:C;u=u===undefined?false:u;d(z,C,u);return this}}}}());if(k===1&&(typeof arguments[0]==="function"||h(arguments[0]))){a=arguments[0];j=undefined}if(a)typeof a==="function"?a.call(s):d(a,false,false);else s.initEvent(j,
e,i);return s};q={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Event]"}}};l=Object.create({},{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},MOUSEDOWN:{enumerable:true,writable:false,configurable:false,value:1},MOUSEUP:{enumerable:true,writable:false,configurable:false,value:2},MOUSEOVER:{enumerable:true,
writable:false,configurable:false,value:4},MOUSEOUT:{enumerable:true,writable:false,configurable:false,value:8},MOUSEMOVE:{enumerable:true,writable:false,configurable:false,value:16},MOUSEDRAG:{enumerable:true,writable:false,configurable:false,value:32},CLICK:{enumerable:true,writable:false,configurable:false,value:64},DBLCLICK:{enumerable:true,writable:false,configurable:false,value:128},KEYDOWN:{enumerable:true,writable:false,configurable:false,value:256},KEYUP:{enumerable:true,writable:false,configurable:false,
value:512},KEYPRESS:{enumerable:true,writable:false,configurable:false,value:1024},DRAGDROP:{enumerable:true,writable:false,configurable:false,value:2048},FOCUS:{enumerable:true,writable:false,configurable:false,value:4096},BLUR:{enumerable:true,writable:false,configurable:false,value:8192},SELECT:{enumerable:true,writable:false,configurable:false,value:16384},CHANGE:{enumerable:true,writable:false,configurable:false,value:32768}});h=doodle.Event.isEvent=function(j){if(!j||typeof j!=="object"||typeof j.toString!==
"function")return false;else j=j.toString();return j==="[object Event]"||j==="[object UIEvent]"||j==="[object MouseEvent]"||j==="[object TouchEvent]"||j==="[object KeyboardEvent]"||j==="[object TextEvent]"||j==="[object WheelEvent]"}})();
(function(){var l,q=doodle.Event.isEvent;doodle.UIEvent=function(h,j,e,i,s){var k,a,d;if(q(arguments[0])){a=arguments[0];h=undefined;k=Object.create(doodle.Event(a))}else if(typeof arguments[0]==="function"){a=arguments[0];h=undefined;k=Object.create(doodle.Event(""))}else{j=j===undefined?false:j;e=e===undefined?false:e;k=Object.create(doodle.Event(h,j,e))}Object.defineProperties(k,l);Object.defineProperties(k,function(){var c=null,g=0,b=0,f=0,o=0,n=0,r=0,t=0,v=0;d=function(x){if(x.view!==undefined)c=
x.view;if(x.detail!==undefined)g=x.detail;if(x.which!==undefined)b=x.which;if(x.charCode!==undefined)f=x.charCode;if(x.keyCode!==undefined)o=x.keyCode;if(x.layerX!==undefined)n=x.layerX;if(x.layerY!==undefined)r=x.layerY;if(x.pageX!==undefined)t=x.pageX;if(x.pageY!==undefined)v=x.pageY};return{view:{enumerable:true,configurable:false,get:function(){return c}},detail:{enumerable:true,configurable:false,get:function(){return g}},which:{enumerable:true,configurable:false,get:function(){return b}},charCode:{enumerable:true,
configurable:false,get:function(){return f}},keyCode:{enumerable:true,configurable:false,get:function(){return o}},layerX:{enumerable:true,configurable:false,get:function(){return n}},layerY:{enumerable:true,configurable:false,get:function(){return r}},pageX:{enumerable:true,configurable:false,get:function(){return t}},pageY:{enumerable:true,configurable:false,get:function(){return v}},initUIEvent:{value:function(x,p,m,A,z){p=p===undefined?false:p;m=m===undefined?false:m;A=A===undefined?null:A;z=
z===undefined?0:z;c=A;g=z;this.initEvent(x,p,m);return this}},__copyUIEventProperties:{enumerable:false,configurable:false,value:function(x,p,m){p=p===undefined?false:p;m=m===undefined?false:m;d(x);return this.__copyEventProperties(x,p,m)}}}}());if(a)typeof a==="function"?a.call(k):d(a);else k.initUIEvent(h,j,e,i,s);return k};l={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object UIEvent]"}}};doodle.UIEvent.isUIEvent=function(h){if(!h||typeof h!=="object"||
typeof h.toString!=="function")return false;else h=h.toString();return h==="[object UIEvent]"||h==="[object MouseEvent]"||h==="[object TouchEvent]"||h==="[object KeyboardEvent]"||h==="[object TextEvent]"||h==="[object WheelEvent]"}})();
(function(){var l,q=doodle.Event.isEvent;doodle.MouseEvent=function(h,j,e,i,s,k,a,d,c,g,b,f,o,n,r){var t,v,x;if(q(arguments[0])){v=arguments[0];h=undefined;t=Object.create(doodle.UIEvent(v))}else if(typeof arguments[0]==="function"){v=arguments[0];h=undefined;t=Object.create(doodle.UIEvent(""))}else{j=j===undefined?false:j;e=e===undefined?false:e;i=i===undefined?null:i;s=s===undefined?0:s;t=Object.create(doodle.UIEvent(h,j,e,i,s))}Object.defineProperties(t,l);Object.defineProperties(t,function(){var p=
0,m=0,A=0,z=0,C=0,u=0,w=0,D=0,B=false,G=false,I=false,N=false,J=0,O=null;x=function(E){p=E.x!==undefined?E.x:0;m=E.y!==undefined?E.y:0;A=E.offsetX!==undefined?E.offsetX:0;z=E.offsetY!==undefined?E.offsetY:0;if(E.screenX!==undefined)C=E.screenX;if(E.screenY!==undefined)u=E.screenY;if(E.clientX!==undefined)w=E.clientX;if(E.clientY!==undefined)D=E.clientY;if(E.ctrlKey!==undefined)B=E.ctrlKey;if(E.altKey!==undefined)G=E.altKey;if(E.shiftKey!==undefined)I=E.shiftKey;if(E.metaKey!==undefined)N=E.metaKey;
if(E.button!==undefined)J=E.button;if(E.relatedTarget!==undefined)O=E.relatedTarget};return{x:{enumerable:true,configurable:false,get:function(){return p}},y:{enumerable:true,configurable:false,get:function(){return m}},screenX:{enumerable:true,configurable:false,get:function(){return C}},screenY:{enumerable:true,configurable:false,get:function(){return u}},clientX:{enumerable:true,configurable:false,get:function(){return w}},clientY:{enumerable:true,configurable:false,get:function(){return D}},offsetX:{enumerable:true,
configurable:false,get:function(){return A}},offsetY:{enumerable:true,configurable:false,get:function(){return z}},ctrlKey:{enumerable:true,configurable:false,get:function(){return B}},altKey:{enumerable:true,configurable:false,get:function(){return G}},shiftKey:{enumerable:true,configurable:false,get:function(){return I}},metaKey:{enumerable:true,configurable:false,get:function(){return N}},button:{enumerable:true,configurable:false,get:function(){return J}},relatedTarget:{enumerable:true,configurable:false,
get:function(){return O}},initMouseEvent:{value:function(E,L,M,Q,R,T,U,V,y,F,H,K,P,S,W){L=L===undefined?false:L;M=M===undefined?false:M;Q=Q===undefined?null:Q;R=R===undefined?0:R;T=T===undefined?0:T;U=U===undefined?0:U;V=V===undefined?0:V;y=y===undefined?0:y;F=F===undefined?false:F;H=H===undefined?false:H;K=K===undefined?false:K;P=P===undefined?false:P;S=S===undefined?0:S;r=W===undefined?null:W;C=T;u=U;w=V;D=y;B=F;G=H;I=K;N=P;J=S;O=W;this.initUIEvent(E,L,M,Q,R);return this}},getModifierState:{value:function(E){switch(E){case "Alt":return G;
case "Control":return B;case "Meta":return N;case "Shift":return I;default:return false}}},__copyMouseEventProperties:{enumerable:false,configurable:false,value:function(E,L,M){L=L===undefined?false:L;M=M===undefined?false:M;x(E);return this.__copyUIEventProperties(E,L,M)}}}}());if(v)typeof v==="function"?v.call(t):x(v);else t.initMouseEvent(h,j,e,i,s,k,a,d,c,g,b,f,o,n,r);return t};l={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object MouseEvent]"}}};doodle.MouseEvent.isMouseEvent=
function(h){if(!h||typeof h!=="object"||typeof h.toString!=="function")return false;else h=h.toString();return h==="[object MouseEvent]"}})();
(function(){var l,q=doodle.Event.isEvent;doodle.TextEvent=function(h,j,e,i,s,k){var a,d,c;if(q(arguments[0])){d=arguments[0];h=undefined;a=Object.create(doodle.UIEvent(d))}else if(typeof arguments[0]==="function"){d=arguments[0];h=undefined;a=Object.create(doodle.UIEvent(""))}else{j=j===undefined?false:j;e=e===undefined?false:e;i=i===undefined?null:i;a=Object.create(doodle.UIEvent(h,j,e,i))}Object.defineProperties(a,l);Object.defineProperties(a,function(){var g="",b=doodle.TextEvent.INPUT_METHOD_UNKNOWN;
c=function(f){if(f.data!==undefined)g=f.data;if(f.inputMode!==undefined)b=f.inputMode};return{data:{enumerable:true,configurable:false,get:function(){return g}},inputMode:{enumerable:true,configurable:false,get:function(){return b}},initTextEvent:{value:function(f,o,n,r,t,v){o=o===undefined?false:o;n=n===undefined?false:n;r=r===undefined?null:r;t=t===undefined?"":t;v=v===undefined?doodle.TextEvent.INPUT_METHOD_UNKNOWN:v;g=t;b=v;this.initUIEvent(f,o,n,r);return this}},__copyTextEventProperties:{enumerable:false,
configurable:false,value:function(f,o,n){o=o===undefined?false:o;n=n===undefined?false:n;c(f);return this.__copyUIEventProperties(f,o,n)}}}}());if(d)typeof d==="function"?d.call(a):c(d);else a.initTextEvent(h,j,e,i,s,k);return a};l={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TextEvent]"}}};doodle.TextEvent.isTextEvent=function(h){if(!h||typeof h!=="object"||typeof h.toString!=="function")return false;else h=h.toString();return h==="[object TextEvent]"}})();
(function(){var l,q=doodle.Event.isEvent;doodle.KeyboardEvent=function(h,j,e,i,s,k,a,d){var c,g,b;if(q(arguments[0])){g=arguments[0];h=undefined;c=Object.create(doodle.UIEvent(g))}else if(typeof arguments[0]==="function"){g=arguments[0];h=undefined;c=Object.create(doodle.UIEvent(""))}else{j=j===undefined?false:j;e=e===undefined?false:e;i=i===undefined?null:i;c=Object.create(doodle.UIEvent(h,j,e,i))}Object.defineProperties(c,l);Object.defineProperties(c,function(){var f="",o=0,n=false,r=false,t=false,
v=false,x=false;b=function(p){if(p.keyIdentifier!==undefined)f=p.keyIdentifier;if(p.keyLocation!==undefined)o=p.keyLocation;if(p.repeat!==undefined)n=p.repeat;if(p.ctrlKey!==undefined)r=p.ctrlKey;if(p.altKey!==undefined)t=p.altKey;if(p.shiftKey!==undefined)v=p.shiftKey;if(p.metaKey!==undefined)x=p.metaKey;if(p.altGraphKey!==undefined)t=p.altGraphKey};return{keyIdentifier:{enumerable:true,configurable:false,get:function(){return f}},keyLocation:{enumerable:true,configurable:false,get:function(){return o}},
repeat:{enumerable:true,configurable:false,get:function(){return n}},ctrlKey:{enumerable:true,configurable:false,get:function(){return r}},altKey:{enumerable:true,configurable:false,get:function(){return t}},shiftKey:{enumerable:true,configurable:false,get:function(){return v}},metaKey:{enumerable:true,configurable:false,get:function(){return x}},altGraphKey:{enumerable:true,configurable:false,get:function(){return false}},initKeyboardEvent:{value:function(p,m,A,z,C,u,w,D){m=m===undefined?false:m;
A=A===undefined?false:A;z=z===undefined?null:z;C=C===undefined?"":C;u=u===undefined?0:u;w=w===undefined?"":w;D=D===undefined?false:D;f=C;o=u;n=D;w.split(" ").forEach(function(B){switch(B){case "Alt":t=true;break;case "Control":r=true;break;case "Meta":x=true;break;case "Shift":v=true;break}});this.initUIEvent(p,m,A,z);return this}},getModifierState:{value:function(p){switch(p){case "Alt":return t;case "Control":return r;case "Meta":return x;case "Shift":return v;default:return false}}},__copyKeyboardEventProperties:{enumerable:false,
configurable:false,value:function(p,m,A){m=m===undefined?false:m;A=A===undefined?false:A;b(p);return this.__copyUIEventProperties(p,m,A)}}}}());if(g)typeof g==="function"?g.call(c):b(g);else c.initKeyboardEvent(h,j,e,i,s,k,a,d);return c};l={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object KeyboardEvent]"}}};doodle.KeyboardEvent.isKeyboardEvent=function(h){if(!h||typeof h!=="object"||typeof h.toString!=="function")return false;else h=h.toString();return h===
"[object KeyboardEvent]"}})();
Object.defineProperties(doodle.Event,{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},ADDED:{enumerable:true,writable:false,configurable:false,value:"added"},REMOVED:{enumerable:true,writable:false,configurable:false,value:"removed"},ENTER_FRAME:{enumerable:true,writable:false,configurable:false,value:"enterFrame"},LOAD:{enumerable:true,
writable:false,configurable:false,value:"load"},CHANGE:{enumerable:true,writable:false,configurable:false,value:"change"}});Object.defineProperties(doodle.UIEvent,{FOCUS_IN:{enumerable:true,writable:false,configurable:false,value:"focusIn"}});
Object.defineProperties(doodle.MouseEvent,{CLICK:{enumerable:true,writable:false,configurable:false,value:"click"},DOUBLE_CLICK:{enumerable:true,writable:false,configurable:false,value:"dblclick"},CONTEXT_MENU:{enumerable:true,writable:false,configurable:false,value:"contextmenu"},MOUSE_DOWN:{enumerable:true,writable:false,configurable:false,value:"mousedown"},MOUSE_UP:{enumerable:true,writable:false,configurable:false,value:"mouseup"},MOUSE_WHEEL:{enumerable:true,writable:false,configurable:false,
value:"mousewheel"},MOUSE_MOVE:{enumerable:true,writable:false,configurable:false,value:"mousemove"},MOUSE_OUT:{enumerable:true,writable:false,configurable:false,value:"mouseout"},MOUSE_OVER:{enumerable:true,writable:false,configurable:false,value:"mouseover"},MOUSE_ENTER:{enumerable:true,writable:false,configurable:false,value:"mouseenter"},MOUSE_LEAVE:{enumerable:true,writable:false,configurable:false,value:"mouseleave"}});
Object.defineProperties(doodle.KeyboardEvent,{KEY_PRESS:{enumerable:true,writable:false,configurable:false,value:"keypress"},KEY_UP:{enumerable:true,writable:false,configurable:false,value:"keyup"},KEY_DOWN:{enumerable:true,writable:false,configurable:false,value:"keydown"},KEY_LOCATION_STANDARD:{enumerable:true,writable:false,configurable:false,value:0},KEY_LOCATION_LEFT:{enumerable:true,writable:false,configurable:false,value:1},KEY_LOCATION_RIGHT:{enumerable:true,writable:false,configurable:false,
value:2},KEY_LOCATION_NUMPAD:{enumerable:true,writable:false,configurable:false,value:3},KEY_LOCATION_MOBILE:{enumerable:true,writable:false,configurable:false,value:4},KEY_LOCATION_JOYSTICK:{enumerable:true,writable:false,configurable:false,value:5}});
Object.defineProperties(doodle.TextEvent,{TEXT_INPUT:{enumerable:true,writable:false,configurable:false,value:"textInput"},INPUT_METHOD_UNKNOWN:{enumerable:true,writable:false,configurable:false,value:0},INPUT_METHOD_KEYBOARD:{enumerable:true,writable:false,configurable:false,value:1},INPUT_METHOD_PASTE:{enumerable:true,writable:false,configurable:false,value:2},INPUT_METHOD_DROP:{enumerable:true,writable:false,configurable:false,value:3},INPUT_METHOD_IME:{enumerable:true,writable:false,configurable:false,
value:4},INPUT_METHOD_OPTION:{enumerable:true,writable:false,configurable:false,value:5},INPUT_METHOD_HANDWRITING:{enumerable:true,writable:false,configurable:false,value:6},INPUT_METHOD_VOICE:{enumerable:true,writable:false,configurable:false,value:7},INPUT_METHOD_MULTIMODAL:{enumerable:true,writable:false,configurable:false,value:8},INPUT_METHOD_SCRIPT:{enumerable:true,writable:false,configurable:false,value:9}});
(function(){var l,q,h=Math.cos,j=Math.sin,e=Math.sqrt;q=doodle.geom.Point=function(i,s){var k={},a=arguments.length;Object.defineProperties(k,l);Object.defineProperties(k,{x:function(){var d=0;return{enumerable:true,configurable:false,get:function(){return d},set:function(c){d=c}}}(),y:function(){var d=0;return{enumerable:true,configurable:false,get:function(){return d},set:function(c){d=c}}}()});switch(a){case 0:break;case 2:k.compose(i,s);break;case 1:a=arguments[0];i=undefined;if(typeof a==="function")a.call(k);
else Array.isArray(a)?k.compose.apply(k,a):k.compose(a.x,a.y);break;default:}return k};l={length:{enumerable:true,configurable:false,get:function(){return this.distance({x:0,y:0},this)}},toArray:{enumerable:true,writable:false,configurable:false,value:function(){var i=Array(2);i[0]=this.x;i[1]=this.y;return i}},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+")"}},compose:{enumerable:true,writable:false,configurable:false,value:function(i,
s){this.x=i;this.y=s;return this}},clone:{enumerable:true,writable:false,configurable:false,value:function(){return q(this.x,this.y)}},equals:{enumerable:true,writable:false,configurable:false,value:function(i){return this&&i&&this.x===i.x&&this.y===i.y||!this&&!i}},add:{enumerable:true,writable:false,configurable:false,value:function(i){return q(this.x+i.x,this.y+i.y)}},subtract:{enumerable:true,writable:false,configurable:false,value:function(i){return q(this.x-i.x,this.y-i.y)}},offset:{enumerable:true,
writable:false,configurable:false,value:function(i,s){this.x+=i;this.y+=s;return this}},distance:{enumerable:true,writable:false,configurable:false,value:function(i,s){var k=s.x-i.x,a=s.y-i.x;return e(k*k+a*a)}},normalize:{enumerable:true,writable:false,configurable:false,value:function(i){var s=this.length;this.x=this.x/s*i;this.y=this.y/s*i;return this}},interpolate:{enumerable:true,writable:false,configurable:false,value:function(i,s,k){return q(i.x+(s.x-i.x)*k,i.y+(s.y-i.y)*k)}},polar:{enumerable:true,
writable:false,configurable:false,value:function(i,s){var k=i*h(s),a=i*j(s);return q(k,a)}}};doodle.geom.Point.isPoint=function(i){return i&&typeof i.x==="number"&&typeof i.y==="number"}})();
(function(){var l,q={x:null,y:null},h={a:null,b:null,c:null,d:null,tx:null,ty:null},j,e=doodle.geom.Point,i=Math.sin,s=Math.cos,k=Math.atan2,a=Math.tan;j=doodle.geom.Matrix=function(d,c,g,b,f,o){var n={},r=arguments.length;Object.defineProperties(n,l);Object.defineProperties(n,{a:function(){var t=1;return{enumerable:true,configurable:false,get:function(){return t},set:function(v){t=v}}}(),b:function(){var t=0;return{enumerable:true,configurable:false,get:function(){return t},set:function(v){t=v}}}(),
c:function(){var t=0;return{enumerable:true,configurable:false,get:function(){return t},set:function(v){t=v}}}(),d:function(){var t=1;return{enumerable:true,configurable:false,get:function(){return t},set:function(v){t=v}}}(),tx:function(){var t=0;return{enumerable:true,configurable:false,get:function(){return t},set:function(v){t=v}}}(),ty:function(){var t=0;return{enumerable:true,configurable:false,get:function(){return t},set:function(v){t=v}}}()});switch(r){case 0:break;case 6:n.compose(d,c,g,
b,f,o);break;case 1:r=arguments[0];d=undefined;if(typeof r==="function")r.call(n);else Array.isArray(r)?n.compose.apply(n,r):n.compose(r.a,r.b,r.c,r.d,r.tx,r.ty);break;default:}return n};l={compose:{enumerable:true,writable:false,configurable:false,value:function(d,c,g,b,f,o){this.a=d;this.b=c;this.c=g;this.d=b;this.tx=f;this.ty=o;return this}},toArray:{enumerable:true,writable:false,configurable:false,value:function(){var d=Array(6);d[0]=this.a;d[1]=this.b;d[2]=this.c;d[3]=this.d;d[4]=this.tx;d[5]=
this.ty;return d}},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}},equals:{enumerable:true,writable:false,configurable:false,value:function(d){return this&&d&&this.a===d.a&&this.b===d.b&&this.c===d.c&&this.d===d.d&&this.tx===d.tx&&this.ty===d.ty||!this&&!d}},identity:{enumerable:true,writable:false,configurable:false,value:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=
this.tx=0;return this}},clone:{enumerable:true,writable:false,configurable:false,value:function(){return j(this.a,this.b,this.c,this.d,this.tx,this.ty)}},multiply:{enumerable:true,writable:false,configurable:false,value:function(d){return this.compose(this.a*d.a+this.c*d.b,this.b*d.a+this.d*d.b,this.a*d.c+this.c*d.d,this.b*d.c+this.d*d.d,this.a*d.tx+this.c*d.ty+this.tx,this.b*d.tx+this.d*d.ty+this.ty)}},rotate:{enumerable:true,writable:false,configurable:false,value:function(d){var c=s(d);d=i(d);
h.a=c;h.b=d;h.c=-d;h.d=c;h.tx=0;h.ty=0;return this.multiply(h)}},deltaRotate:{enumerable:true,writable:false,configurable:false,value:function(d){var c=this.tx,g=this.ty;this.rotate(d);this.tx=c;this.ty=g;return this}},rotation:{enumerable:true,configurable:false,get:function(){return k(this.b,this.a)},set:function(d){var c=s(d);d=i(d);this.compose(c,d,-d,c,this.tx,this.ty)}},scale:{enumerable:true,writable:false,configurable:false,value:function(d,c){h.a=d;h.b=0;h.c=0;h.d=c;h.tx=0;h.ty=0;return this.multiply(h)}},
deltaScale:{enumerable:true,writable:false,configurable:false,value:function(d,c){var g=this.tx,b=this.ty;this.scale(d,c);this.tx=g;this.ty=b;return this}},translate:{enumerable:true,writable:false,configurable:false,value:function(d,c){this.tx+=d;this.ty+=c;return this}},skew:{enumerable:true,writable:false,configurable:false,value:function(d,c){var g=a(d),b=a(c);h.a=1;h.b=b;h.c=g;h.d=1;h.tx=0;h.ty=0;return this.multiply(h)}},deltaSkew:{enumerable:true,writable:false,configurable:false,value:function(d,
c){var g=this.tx,b=this.ty;this.skew(d,c);this.tx=g;this.ty=b;return this}},add:{enumerable:true,writable:false,configurable:false,value:function(d){this.a+=d.a;this.b+=d.b;this.c+=d.c;this.d+=d.d;this.tx+=d.tx;this.ty+=d.ty;return this}},invert:{enumerable:true,writable:false,configurable:false,value:function(){var d=this.a*this.d-this.b*this.c;return this.compose(this.d/d,-this.b/d,-this.c/d,this.a/d,(this.ty*this.c-this.d*this.tx)/d,-(this.ty*this.a-this.b*this.tx)/d)}},transformPoint:{enumerable:true,
writable:false,configurable:false,value:function(d){return e(this.a*d.x+this.c*d.y+this.tx,this.b*d.x+this.d*d.y+this.ty)}},__transformPoint:{enumerable:false,writable:false,configurable:false,value:function(d){var c=d.x,g=d.y;d.x=this.a*c+this.c*g+this.tx;d.y=this.b*c+this.d*g+this.ty;return d}},deltaTransformPoint:{enumerable:true,writable:false,configurable:false,value:function(d){return e(this.a*d.x+this.c*d.y,this.b*d.x+this.d*d.y)}},__deltaTransformPoint:{enumerable:false,writable:false,configurable:false,
value:function(d){var c=d.x,g=d.y;d.x=this.a*c+this.c*g;d.y=this.b*c+this.d*g;return d}},rotateAroundExternalPoint:{enumerable:true,writable:false,configurable:false,value:function(d,c){var g=s(c),b=i(c);h.a=g;h.b=b;h.c=-b;h.d=g;h.tx=0;h.ty=0;this.translate(-d.x,-d.y);q.x=h.a*this.tx+h.c*this.ty+h.tx;q.y=h.b*this.tx+h.d*this.ty+h.ty;this.tx=q.x;this.ty=q.y;return this.multiply(h).translate(d.x,d.y)}},rotateAroundInternalPoint:{enumerable:true,writable:false,configurable:false,value:function(d,c){q.x=
this.a*d.x+this.c*d.y+this.tx;q.y=this.b*d.x+this.d*d.y+this.ty;return this.rotateAroundExternalPoint(q,c)}},matchInternalPointWithExternal:{enumerable:true,writable:false,configurable:false,value:function(d,c){q.x=this.a*d.x+this.c*d.y+this.tx;q.y=this.b*d.x+this.d*d.y+this.ty;return this.translate(c.x-q.x,c.y-q.y)}},interpolate:{enumerable:true,writable:false,configurable:false,value:function(d,c){this.a+=(d.a-this.a)*c;this.b+=(d.b-this.b)*c;this.c+=(d.c-this.c)*c;this.d+=(d.d-this.d)*c;this.tx+=
(d.tx-this.tx)*c;this.ty+=(d.ty-this.ty)*c;return this}}};doodle.geom.Matrix.isMatrix=function(d){return d!==undefined&&d!==null&&typeof d.a==="number"&&typeof d.b==="number"&&typeof d.c==="number"&&typeof d.d==="number"&&typeof d.tx==="number"&&typeof d.ty==="number"}})();
(function(){var l,q,h=Math.max,j=Math.min;q=doodle.geom.Rectangle=function(e,i,s,k){var a={},d=arguments.length;Object.defineProperties(a,l);Object.defineProperties(a,{x:function(){var c=0;return{enumerable:true,configurable:false,get:function(){return c},set:function(g){c=g}}}(),y:function(){var c=0;return{enumerable:true,configurable:false,get:function(){return c},set:function(g){c=g}}}(),width:function(){var c=0;return{enumerable:true,configurable:false,get:function(){return c},set:function(g){c=
g}}}(),height:function(){var c=0;return{enumerable:true,configurable:false,get:function(){return c},set:function(g){c=g}}}()});switch(d){case 0:break;case 4:a.compose(e,i,s,k);break;case 1:d=arguments[0];e=undefined;if(typeof d==="function")d.call(a);else Array.isArray(d)?a.compose.apply(a,d):a.compose(d.x,d.y,d.width,d.height);break;default:}return a};l={top:{enumerable:true,configurable:false,get:function(){return this.y},set:function(e){this.y=e;this.height-=e}},right:{enumerable:true,configurable:false,
get:function(){return this.x+this.width},set:function(e){this.width=e-this.x}},bottom:{enumerable:true,configurable:false,get:function(){return this.y+this.height},set:function(e){this.height=e-this.y}},left:{enumerable:true,configurable:false,get:function(){return this.x},set:function(e){this.x=e;this.width-=e}},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+")"}},toArray:{enumerable:true,writable:false,
configurable:false,value:function(){var e=Array(4);e[0]=this.top;e[1]=this.right;e[2]=this.bottom;e[3]=this.left;return e}},compose:{enumerable:true,writable:false,configurable:false,value:function(e,i,s,k){this.x=e;this.y=i;this.width=s;this.height=k;return this}},__compose:{enumerable:false,writable:false,configurable:false,value:function(e){this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height;return this}},clone:{enumerable:true,writable:false,configurable:false,value:function(){return q(this.x,
this.y,this.width,this.height)}},offset:{enumerable:true,writable:false,configurable:false,value:function(e,i){this.x+=e;this.y+=i;return this}},inflate:{enumerable:true,writable:false,configurable:false,value:function(e,i){this.x-=e;this.width+=2*e;this.y-=i;this.height+=2*i;return this}},equals:{enumerable:true,writable:false,configurable:false,value:function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}},isEmpty:{enumerable:true,writable:false,configurable:false,
value:function(){return this.width>=0||this.height>=0}},contains:{enumerable:false,writable:false,configurable:false,value:function(e,i){return e>=this.left&&e<=this.right&&i>=this.top&&i<=this.bottom}},containsPoint:{enumerable:true,writable:false,configurable:false,value:function(e){var i=e.x;e=e.y;return i>=this.left&&i<=this.right&&e>=this.top&&e<=this.bottom}},containsRect:{enumerable:true,writable:false,configurable:false,value:function(e){return this.contains(e.x,e.y)&&this.contains(e.right,
e.y)&&this.contains(e.right,e.bottom)&&this.contains(e.x,e.bottom)}},intersects:{enumerable:true,writable:false,configurable:false,value:function(e){return this.contains(e.x,e.y)||this.contains(e.right,e.y)||this.contains(e.right,e.bottom)||this.contains(e.x,e.bottom)}},intersection:{enumerable:true,writable:false,configurable:false,value:function(e){var i=q(0,0,0,0);if(this.intersects(e)){i.left=h(this.left,e.left);i.top=h(this.top,e.top);i.right=j(this.right,e.right);i.bottom=j(this.bottom,e.bottom)}return i}},
__intersection:{enumerable:false,writable:false,configurable:false,value:function(e){if(this.intersects(e)){this.left=h(this.left,e.left);this.top=h(this.top,e.top);this.right=j(this.right,e.right);this.bottom=j(this.bottom,e.bottom)}return this}},union:{enumerable:true,writable:false,configurable:false,value:function(e){var i=q(0,0,0,0);i.left=j(this.left,e.left);i.top=j(this.top,e.top);i.right=h(this.right,e.right);i.bottom=h(this.bottom,e.bottom);return i}},__union:{enumerable:false,writable:false,
configurable:false,value:function(e){this.left=j(this.left,e.left);this.top=j(this.top,e.top);this.right=h(this.right,e.right);this.bottom=h(this.bottom,e.bottom);return this}}};doodle.geom.Rectangle.isRect=function(e){return typeof e.x==="number"&&typeof e.y==="number"&&typeof e.width==="number"&&typeof e.height==="number"&&typeof e.top==="number"&&typeof e.bottom==="number"&&typeof e.left==="number"&&typeof e.right==="number"}})();
(function(){var l,q,h,j=doodle.Event.CAPTURING_PHASE,e=doodle.Event.AT_TARGET,i=doodle.Event.BUBBLING_PHASE,s=Array.prototype.indexOf,k=Array.prototype.splice;doodle.EventDispatcher=function(a){var d={};Object.defineProperties(d,l);Object.defineProperties(d,{eventListeners:function(){var c={};return{enumerable:true,configurable:false,get:function(){return c}}}()});typeof a==="function"&&a.call(d);return d};l={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object EventDispatcher]"}},
modify:{enumerable:true,writable:false,configurable:false,value:function(a){a.call(this);return this}},addEventListener:{enumerable:true,writable:false,configurable:false,value:function(a,d,c){c=c===undefined?false:c;var g=this.eventListeners;g.hasOwnProperty(a)||(g[a]={capture:[],bubble:[]});g[a][c?"capture":"bubble"].push(d);q.indexOf(this)===-1&&q.push(this)}},removeEventListener:{enumerable:true,writable:false,configurable:false,value:function(a,d,c){c=c===undefined?false:c;var g=this.eventListeners,
b=g.hasOwnProperty(a)?g[a]:false;if(b){c=b[c?"capture":"bubble"];k.call(c,s.call(c,d),1);b.capture.length===0&&b.bubble.length===0&&delete g[a];if(Object.keys(g).length===0){a=q;k.call(a,s.call(a,this),1)}}}},handleEvent:{enumerable:true,writable:false,configurable:false,value:function(a){var d=a.eventPhase===j?"capture":"bubble",c=this.eventListeners[a.type],g=0,b;if((c=c&&c[d])&&c.length>0){a.__setCurrentTarget(this);g=c.length;for(b=0;b<g;b+=1){d=c[b].call(this,a);if(d===false||a.returnValue===
false)a.__cancel||a.stopPropagation();if(a.__cancelNow)break}}return g>0?true:false}},dispatchEvent:{enumerable:true,writable:false,configurable:false,value:function(a){var d,c=a.type,g=Object.prototype.hasOwnProperty,b=g.call(this.eventListeners,c),f,o=[];if(a.__cancel)return false;a.target||a.__setTarget(this);d=a.target;for(f=d.parent||null;f;){b||(b=g.call(f.eventListeners,c));o.push(f);f=f.parent}if(!b)return true;a.__setEventPhase(j);for(g=c=o.length;g--;){o[g].handleEvent(a);if(a.__cancel)return true}a.__setEventPhase(e);
d.handleEvent(a);if(a.__cancel)return true;if(!a.bubbles||a.cancelBubble)return true;a.__setEventPhase(i);for(g=0;g<c;g+=1){o[g].handleEvent(a);if(a.__cancel||a.cancelBubble)return true}return true}},broadcastEvent:{enumerable:true,writable:false,configurable:false,value:function(a){var d=a.type,c=Object.prototype.hasOwnProperty,g=q,b=g.length;if(a.__cancel)throw Error(this+".broadcastEvent: Can not dispatch a cancelled event.");for(a.target||a.__setTarget(this);b--;){c.call(g[b].eventListeners,d)&&
g[b].handleEvent(a);if(a.__cancel)break}return true}},hasEventListener:{enumerable:true,writable:false,configurable:false,value:function(a){return this.eventListeners.hasOwnProperty(a)}},willTrigger:{enumerable:true,writable:false,configurable:false,value:function(a){if(this.eventListeners.hasOwnProperty(a))return true;for(var d=this.children,c=d?d.length:0;c--;)if(d[c].willTrigger(a))return true;return false}}};q=doodle.EventDispatcher.dispatcher_queue=[];h=doodle.EventDispatcher.isEventDispatcher=
function(a){if(!a||typeof a!=="object"||typeof a.toString!=="function")return false;return a.toString()==="[object EventDispatcher]"};doodle.EventDispatcher.inheritsEventDispatcher=function(a){for(;a;)if(h(a))return true;else{if(typeof a!=="object")return false;a=Object.getPrototypeOf(a)}return false}})();
(function(){var l=0,q,h,j=doodle.Event(doodle.Event.ADDED,true),e=doodle.Event(doodle.Event.REMOVED,true),i=doodle.geom.Point,s=doodle.geom.Matrix,k=doodle.geom.Rectangle,a=doodle.utils.create_scene_path,d=Math.PI;doodle.Node=function(c){var g=Object.create(doodle.EventDispatcher());Object.defineProperties(g,q);Object.defineProperties(g,{id:function(){var b=typeof c==="string"?c:"node"+String("000"+l).slice(-3);l+=1;return{enumerable:true,configurable:true,get:function(){return b},set:function(f){b=
f}}}(),root:function(){var b=null;return{enumerable:true,configurable:false,get:function(){return b},set:function(f){b=f}}}(),parent:function(){var b=null;return{enumerable:true,configurable:false,get:function(){return b},set:function(f){b=f}}}(),children:function(){var b=[];return{enumerable:true,configurable:false,get:function(){return b}}}(),transform:function(){var b=s();return{enumerable:true,configurable:false,get:function(){return b},set:function(f){b=f}}}(),visible:function(){var b=true;return{enumerable:true,
configurable:true,get:function(){return b},set:function(f){b=f}}}(),alpha:function(){var b=1;return{enumerable:true,configurable:true,get:function(){return b},set:function(f){b=f>1?1:f<0?0:f}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(b){return this.__getBounds(b).clone()}},__getBounds:{enumerable:false,writable:true,configurable:false,value:function(){var b=k();return function(f){for(var o=null,n,r=this.children,t=r.length;t--;){n=r[t].__getBounds(f);if(n!==null)if(o===
null)o=b.__compose(n);else o.__union(n)}return o}}()}});if(typeof c==="function"){c.call(g);c=undefined}return g};q={x:{enumerable:true,configurable:false,get:function(){return this.transform.tx},set:function(c){this.transform.tx=c}},y:{enumerable:true,configurable:false,get:function(){return this.transform.ty},set:function(c){this.transform.ty=c}},rotate:{enumerable:true,configurable:false,value:function(c){this.transform.rotate(c*d/180)}},rotation:{enumerable:true,configurable:true,get:function(){return this.transform.rotation*
180/d},set:function(c){this.transform.rotation=c*d/180}},scaleX:{enumerable:true,configurable:false,get:function(){return this.transform.a},set:function(c){this.transform.a=c}},scaleY:{enumerable:true,configurable:false,get:function(){return this.transform.d},set:function(c){this.transform.d=c}},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Node]"}},addChildAt:{enumerable:true,writable:false,configurable:false,value:function(c,g){var b=this.children,f=
this.root,o=c.parent;if(b.indexOf(c)!==-1)return false;o!==null&&o!==this&&c.parent.removeChild(c);c.parent=this;b.splice(g,0,c);if(f&&c.root!==f){f.__sortAllChildren();b=a(c,[]);for(o=b.length;o--;){c=b[o];c.root=f;c.dispatchEvent(j.__setTarget(null))}}return c}},addChild:{enumerable:true,writable:false,configurable:false,value:function(c){return this.addChildAt(c,this.children.length)}},removeChildAt:{enumerable:true,writable:false,configurable:false,value:function(c){var g=this.children,b=g[c],
f=this.root,o=a(b,[]),n=o.length,r=n;if(f)for(;n--;)o[n].dispatchEvent(e.__setTarget(null));g.splice(c,1);for(b.parent=null;r--;)o[r].root=null;f&&f.__sortAllChildren()}},removeChild:{enumerable:false,writable:false,configurable:false,value:function(c){this.removeChildAt(this.children.indexOf(c))}},removeChildById:{enumerable:true,writable:false,configurable:false,value:function(c){this.removeChild(this.getChildById(c))}},removeAllChildren:{enumerable:true,writable:false,configurable:false,value:function(){for(var c=
this.children.length;c--;)this.removeChildAt(c)}},getChildById:{enumerable:true,writable:false,configurable:false,value:function(c){for(var g=this.children,b=g.length,f=0;f<b;f++)if(g[f].id===c)return g[f];return null}},setChildIndex:{enumerable:true,writable:false,configurable:false,value:function(c,g){var b=this.children,f=b.indexOf(c);b.splice(f,1);b.splice(g,0,c)}},swapChildrenAt:{enumerable:true,writable:false,configurable:false,value:function(c,g){var b=this.children;b[c]=b.splice(g,1,b[c])[0]}},
swapChildren:{enumerable:true,writable:false,configurable:false,value:function(c,g){var b=this.children;this.swapChildrenAt(b.indexOf(c),b.indexOf(g))}},swapDepths:{enumerable:true,writable:false,configurable:false,value:function(c){var g=this.parent,b;b=g.children;g.swapChildrenAt(b.indexOf(this),b.indexOf(c))}},swapDepthAt:{enumerable:true,writable:false,configurable:false,value:function(c){var g=this.parent;g.swapChildrenAt(c,g.children.indexOf(this))}},contains:{enumerable:true,writable:false,
configurable:false,value:function(c){return a(this,[]).indexOf(c)!==-1?true:false}},localToGlobal:{enumerable:true,writable:false,configurable:false,value:function(c){var g=this.parent;for(c=this.transform.transformPoint(c);g;){g.transform.__transformPoint(c);g=g.parent}return c}},__localToGlobal:{enumerable:false,writable:false,configurable:false,value:function(c){for(var g=this;g;){g.transform.__transformPoint(c);g=g.parent}return c}},globalToLocal:{enumerable:true,writable:false,configurable:false,
value:function(c){var g={x:0,y:0};this.__localToGlobal(g);return i(c.x-g.x,c.y-g.y)}},__globalToLocal:{enumerable:false,writable:false,configurable:false,value:function(c){var g={x:0,y:0};this.__localToGlobal(g);c.x-=g.x;c.y-=g.y;return c}}};h=doodle.Node.isNode=function(c){if(!c||typeof c!=="object"||typeof c.toString!=="function")return false;return c.toString()==="[object Node]"};doodle.Node.inheritsNode=function(c){for(;c;)if(h(c))return true;else{if(typeof c!=="object")return false;c=Object.getPrototypeOf(c)}return false}})();
(function(){var l,q=doodle.utils.hex_to_rgb_str,h=doodle.utils.get_element,j=doodle.Event,e=doodle.GradientType.LINEAR,i=doodle.GradientType.RADIAL;doodle.Graphics=function(s,k,a){var d=Object.create(null),c=0,g=0;Object.defineProperties(d,l);Object.defineProperties(d,{draw:{enumerable:false,writable:false,configurable:false,value:function(b){k.push(b)}},clear:{enumerable:false,writable:false,configurable:false,value:function(){for(var b=k.length;(b-=1)>=0;)k.splice(b,1);s.width=0;s.height=0;c=g=
a.min_x=a.min_y=a.max_x=a.max_y=0}},rect:{enumerable:false,writable:false,configurable:false,value:function(b,f,o,n){a.min_x=Math.min(0,b,a.min_x);a.min_y=Math.min(0,f,a.min_y);a.max_x=Math.max(0,b,b+o,a.max_x);a.max_y=Math.max(0,f,f+n,a.max_y);s.width=-a.min_x+a.max_x;s.height=-a.min_y+a.max_y;k.push(function(r){r.beginPath();r.rect(b,f,o,n);r.closePath();r.stroke()})}},circle:{enumerable:false,writable:false,configurable:false,value:function(b,f,o){a.min_x=Math.min(0,-o+b,a.min_x);a.min_y=Math.min(0,
-o+f,a.min_y);a.max_x=Math.max(0,b,b+o,a.max_x);a.max_y=Math.max(0,f,f+o,a.max_y);s.width=-a.min_x+a.max_x;s.height=-a.min_y+a.max_y;k.push(function(n){n.beginPath();n.arc(b,f,o,0,6.283185307179586,true);n.closePath();n.stroke()})}},ellipse:{enumerable:false,writable:false,configurable:false,value:function(b,f,o,n){n=n===undefined?o:n;var r=o/2,t=n/2,v=0.5522847498*r,x=0.5522847498*t;a.min_x=Math.min(0,-r+b,a.min_x);a.min_y=Math.min(0,-t+f,a.min_y);a.max_x=Math.max(0,b,b+r,a.max_x);a.max_y=Math.max(0,
f,f+t,a.max_y);s.width=-a.min_x+a.max_x;s.height=-a.min_y+a.max_y;k.push(function(p){p.beginPath();p.moveTo(b+r,f);p.bezierCurveTo(b+r,f-x,b+v,f-t,b,f-t);p.bezierCurveTo(b-v,f-t,b-r,f-x,b-r,f);p.bezierCurveTo(b-r,f+x,b-v,f+t,b,f+t);p.bezierCurveTo(b+v,f+t,b+r,f+x,b+r,f);p.closePath();p.stroke()})}},roundRect:{enumerable:false,writable:false,configurable:false,value:function(b,f,o,n,r,t){r=r===undefined?0:r;t=t===undefined?0:t;var v=b+o,x=v-r,p=b+r,m=f+n,A=m-t,z=f+t;a.min_x=Math.min(0,b,a.min_x);a.min_y=
Math.min(0,f,a.min_y);a.max_x=Math.max(0,b,b+o,a.max_x);a.max_y=Math.max(0,f,f+n,a.max_y);s.width=-a.min_x+a.max_x;s.height=-a.min_y+a.max_y;k.push(function(C){C.beginPath();C.moveTo(p,f);C.beginPath();C.lineTo(x,f);C.quadraticCurveTo(v,f,v,z);C.lineTo(v,A);C.quadraticCurveTo(v,m,x,m);C.lineTo(p,m);C.quadraticCurveTo(b,m,b,A);C.lineTo(b,z);C.quadraticCurveTo(b,f,p,f);C.closePath();C.stroke()})}},moveTo:{enumerable:false,writable:false,configurable:false,value:function(b,f){k.push(function(o){o.moveTo(b,
f)});c=b;g=f}},lineTo:{enumerable:false,writable:false,configurable:false,value:function(b,f){a.min_x=Math.min(0,b,c,a.min_x);a.min_y=Math.min(0,f,g,a.min_y);a.max_x=Math.max(0,b,c,a.max_x);a.max_y=Math.max(0,f,g,a.max_y);s.width=a.max_x-a.min_x;s.height=a.max_y-a.min_y;k.push(function(o){o.lineTo(b,f)});c=b;g=f}},curveTo:{enumerable:false,writable:false,configurable:false,value:function(b,f){var o=c,n=g,r=b.x,t=b.y,v=f.x,x=f.y,p,m=0,A=0;p=(o-r)/(o-2*r+v);if(0<=p&&p<=1)m=(1-p)*(1-p)*o+2*(1-p)*p*r+
p*p*v;p=(n-t)/(n-2*t+x);if(0<=p&&p<=1)A=(1-p)*(1-p)*n+2*(1-p)*p*t+p*p*x;a.min_x=Math.min(0,o,m,v,a.min_x);a.min_y=Math.min(0,n,A,x,a.min_y);a.max_x=Math.max(0,o,m,v,a.max_x);a.max_y=Math.max(0,n,A,x,a.max_y);s.width=-a.min_x+a.max_x;s.height=-a.min_y+a.max_y;k.push(function(z){z.quadraticCurveTo(r,t,v,x)});c=v;g=x}},bezierCurveTo:{enumerable:false,writable:false,configurable:false,value:function(b,f,o){var n=Math.pow,r=Math.max,t=Math.min,v=c,x=g,p=b.x,m=b.y,A=f.x,z=f.y,C=o.x,u=o.y,w,D=o=f=0,B=0;
for(b=0.1;b<1;b+=0.1){w=n(1-b,3)*v+3*n(1-b,2)*b*p+3*n(1-b,1)*n(b,2)*A+n(b,3)*C;if(w>f)f=w;if(w<o)o=w;w=n(1-b,3)*x+3*n(1-b,2)*b*m+3*n(1-b,1)*n(b,2)*z+n(b,3)*u;if(w>D)D=w;if(w<B)B=w}a.min_x=t(0,v,o,C,a.min_x);a.min_y=t(0,x,B,u,a.min_y);a.max_x=r(0,v,f,C,a.max_x);a.max_y=r(0,x,D,u,a.max_y);s.width=-a.min_x+a.max_x;s.height=-a.min_y+a.max_y;k.push(function(G){G.bezierCurveTo(p,m,A,z,C,u)});c=C;g=u}},beginFill:{enumerable:false,writable:false,configurable:false,value:function(b,f){f=f===undefined?1:f;
k.push(function(o){o.fillStyle=q(b,f)})}},beginGradientFill:{enumerable:true,writable:false,configurable:false,value:function(b,f,o,n,r,t){k.push(function(v){var x=doodle.utils.hex_to_rgb_str,p,m=n.length,A=0;if(b===e)p=v.createLinearGradient(f.x,f.y,o.x,o.y);else if(b===i)p=v.createRadialGradient(f.x,f.y,f.radius,o.x,o.y,o.radius);else throw new TypeError(this+".graphics.beginGradientFill(*type*, point1, point2, ratios, colors, alphas): Unknown gradient type.");for(;A<m;A+=1)p.addColorStop(n[A],
x(r[A],t[A]));v.fillStyle=p})}},beginPatternFill:{enumerable:true,writable:false,configurable:false,value:function(b,f){var o=null,n;n=doodle.Pattern;f=f===undefined?n.REPEAT:f;if(f!==n.REPEAT&&f!==n.NO_REPEAT&&f!==n.REPEAT_X&&f!==n.REPEAT_Y)throw new SyntaxError(this+".graphics.beginPatternFill(image, *repeat*): Invalid pattern repeat type.");if(typeof b==="string")if(b[0]==="#")b=h(b,this+".beginPatternFill");else(function(){var r=encodeURI(b);b=new Image;b.src=r})();if(b.complete)o=b;else{b.onload=
function(){o=b;s.dispatchEvent(j(j.LOAD))};n=function(){throw new URIError(this+".graphics.beginPatternFill(*image*,repeat): Unable to load "+b.src);};b.onerror=n;b.onabort=n}k.push(function(r){r.fillStyle=o?r.createPattern(o,f):"rgba(0,0,0,0)"})}},lineStyle:{enumerable:true,writable:false,configurable:false,value:function(b,f,o,n,r,t){b=b===undefined?1:b;f=f===undefined?"#000000":f;o=o===undefined?1:o;n=n===undefined?doodle.LineCap.BUTT:n;r=r===undefined?doodle.LineJoin.MITER:r;t=t===undefined?10:
t;if(typeof f==="string"||typeof f==="number")f=q(f,o);else throw new TypeError(this+".graphics.lineStyle(thickness,*color*,alpha,caps,joints,miterLimit): Color must be a hex value.");k.push(function(v){v.lineWidth=b;v.strokeStyle=f;v.lineCap=n;v.lineJoin=r;v.miterLimit=t})}},beginPath:{enumerable:false,writable:false,configurable:false,value:function(){k.push(function(b){b.beginPath();b.moveTo(c,g)})}},closePath:{enumerable:false,writable:false,configurable:false,value:function(){k.push(function(b){b.closePath();
b.stroke()});g=c=0}},endFill:{enumerable:false,writable:false,configurable:false,value:function(){k.push(function(b){b.fill()})}},stroke:{enumerable:false,writable:false,configurable:false,value:function(){k.push(function(b){b.stroke()});g=c=0}}});return d};l={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Graphics]"}}}})();
(function(){var l,q,h=doodle.geom.Rectangle;doodle.Sprite=function(j){var e=Object.create(doodle.Node(typeof j==="string"?j:undefined));Object.defineProperties(e,l);Object.defineProperties(e,function(){var i=[],s={min_x:0,max_x:0,min_y:0,max_y:0};return{graphics:{enumerable:false,configurable:false,value:Object.create(doodle.Graphics(e,i,s))},width:function(){var k=0;return{enumerable:true,configurable:false,get:function(){return k},set:function(a){k=a}}}(),height:function(){var k=0;return{enumerable:true,
configurable:false,get:function(){return k},set:function(a){k=a}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(k){return this.__getBounds(k).clone()}},__getBounds:{enumerable:false,writable:true,configurable:false,value:function(){var k=h();return function(a){var d=this.children,c=d.length,g,b=this.width,f=this.height;g=Math.min;var o=Math.max,n={x:s.min_x,y:s.min_y},r={x:s.min_x+b,y:s.min_y};b={x:s.min_x+b,y:s.min_y+f};f={x:s.min_x,y:s.min_y+f};this.__localToGlobal(n);
this.__localToGlobal(r);this.__localToGlobal(b);this.__localToGlobal(f);a.__globalToLocal(n);a.__globalToLocal(r);a.__globalToLocal(b);a.__globalToLocal(f);k.left=g(n.x,r.x,b.x,f.x);k.right=o(n.x,r.x,b.x,f.x);k.top=g(n.y,r.y,b.y,f.y);for(k.bottom=o(n.y,r.y,b.y,f.y);c--;){g=d[c].__getBounds(a);g!==null&&k.__union(g)}return k}}()},hitTestObject:{enumerable:true,writable:true,configurable:false,value:function(k){return this.getBounds(this).intersects(k.getBounds(this))}},hitTestPoint:{enumerable:true,
writable:true,configurable:false,value:function(k){return this.getBounds(this).containsPoint(this.globalToLocal(k))}},context:{get:function(){for(var k=this.parent;k;){if(k.context)return k.context;k=k.parent}return null}},__draw:{enumerable:false,writable:false,configurable:false,value:function(k){i.forEach(function(a){a.call(e,k)})}}}}());typeof j==="function"&&j.call(e);return e};l={rotation:function(){var j=180/Math.PI,e=Math.PI/180;return{enumerable:true,configurable:false,get:function(){return this.transform.rotation*
j},set:function(i){this.transform.rotation=i*e}}}(),toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Sprite]"}},compose:{enumerable:false,writable:false,configurable:false,value:function(j,e,i,s){this.x=j;this.y=e;this.width=i;this.height=s;return this}}};q=doodle.Sprite.isSprite=function(j){if(!j||typeof j!=="object"||typeof j.toString!=="function")return false;return j.toString()==="[object Sprite]"};doodle.Sprite.inheritsSprite=function(j){for(;j;)if(q(j))return true;
else{if(typeof j!=="object")return false;j=Object.getPrototypeOf(j)}return false}})();
(function(){var l,q=/^url\((.*)\)/,h,j=doodle.geom.Rectangle,e=doodle.utils.rgb_str_to_hex,i=doodle.utils.hex_to_rgb_str,s=doodle.utils.get_element,k=doodle.utils.get_element_property,a=doodle.utils.set_element_property;doodle.ElementNode=function(d,c){var g=Object.create(doodle.Node(typeof c==="string"?c:undefined));Object.defineProperties(g,l);Object.defineProperties(g,function(){var b=null,f=g.id,o=g.alpha,n=g.visible,r=0,t=0,v=null,x=null,p="repeat";return{element:{enumerable:true,configurable:true,
get:function(){return b},set:function(m){if(m===null){if(b!==null){typeof this.__removeDomElement==="function"&&this.__removeDomElement(b);x=v=null;p="repeat";if(!this.parent)t=r=0}b=null}else{b=m=s(m);this.__addDomElement(b);if(m=k(b,"id"))f=m;else this.id=f;p=k(b,"backgroundRepeat")||p;v=(m=k(b,"backgroundColor",false,false))?e(m):v;m=k(b,"backgroundImage");x=(m=!m||m==="none"?null:x.match(q))?m[1]:x}}},id:{enumerable:true,configurable:true,get:function(){return f},set:function(m){f=a(this.element,
"id",m,"html")}},width:{enumerable:true,configurable:true,get:function(){return r},set:function(m){a(this.element,"width",m+"px");r=m}},height:{enumerable:true,configurable:true,get:function(){return t},set:function(m){a(this.element,"height",m+"px");t=m}},backgroundColor:{enumerable:true,configurable:true,get:function(){return v},set:function(m){if(typeof m==="number")m=i(m);a(this.element,"backgroundColor",m);v=e(k(this.element,"backgroundColor"))}},backgroundImage:{enumerable:true,configurable:true,
get:function(){return x},set:function(m){if(m){if(typeof m==="string"){if(m[0]==="#")m=s(m).src}else if(m&&m.tagName==="IMG")m=m.src;q.test(m)||(m="url("+encodeURI(m)+")");x=a(this.element,"backgroundImage",m)}else x=a(this.element,"backgroundImage",null)}},backgroundRepeat:{enumerable:true,configurable:true,get:function(){return p},set:function(m){p=a(this.element,"backgroundRepeat",m)}},alpha:{enumerable:true,configurable:true,get:function(){return o},set:function(m){a(this.element,"opacity",m)}},
visible:{enumerable:true,configurable:true,get:function(){return n},set:function(m){m?a(this.element,"visibility","visible"):a(this.element,"visibility","hidden");n=m}},__addDomElement:{enumerable:false,configurable:true,value:function(m){var A=k(m,"width","int")||m.width;m=k(m,"height","int")||m.height;if(typeof A==="number")r=A;if(typeof m==="number")t=m}},__getBounds:{enumerable:true,configurable:true,value:function(){var m=j();return function(A){var z=this.children,C=z.length,u,w=this.width,D=
this.height;u={x:0,y:0};var B={x:w,y:0};w={x:w,y:D};D={x:0,y:D};var G=Math.min,I=Math.max;this.__localToGlobal(u);this.__localToGlobal(B);this.__localToGlobal(w);this.__localToGlobal(D);A.__globalToLocal(u);A.__globalToLocal(B);A.__globalToLocal(w);A.__globalToLocal(D);m.left=G(u.x,B.x,w.x,D.x);m.right=I(u.x,B.x,w.x,D.x);m.top=G(u.y,B.y,w.y,D.y);for(m.bottom=I(u.y,B.y,w.y,D.y);C--;){u=z[C].__getBounds(A);u!==null&&m.__union(u)}return m}}()}}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]===
"function"){arguments[0].call(g);d=undefined}else g.element=d;break;case 2:if(d)g.element=d;break;default:throw new SyntaxError("[object ElementNode](element, id): Invalid number of parameters.");}return g};l={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object ElementNode]"}}};h=doodle.ElementNode.isElementNode=function(d){if(!d||typeof d!=="object"||typeof d.toString!=="function")return false;return d.toString()==="[object ElementNode]"};doodle.ElementNode.inheritsElementNode=
function(d){for(;d;)if(h(d))return true;else{if(typeof d!=="object")return false;d=Object.getPrototypeOf(d)}return false}})();
(function(){var l,q=0,h,j=doodle.utils.set_element_property;doodle.Layer=function(e,i){var s=typeof e==="string"?e:"layer"+String("00"+q).slice(-2);s=Object.create(doodle.ElementNode(undefined,s));Object.defineProperties(s,l);Object.defineProperties(s,function(){var k=0,a=0,d=null;return{width:{enumerable:true,configurable:true,get:function(){return k},set:function(c){k=j(this.element,"width",c,"html")}},height:{enumerable:true,configurable:true,get:function(){return a},set:function(c){a=j(this.element,
"height",c,"html")}},context:{enumerable:true,configurable:true,get:function(){return d}},__addDomElement:{enumerable:false,writable:false,value:function(c){j(c,"position","absolute");if(this.parent){this.width=this.parent.width;this.height=this.parent.height}d=c.getContext("2d")}},__removeDomElement:{enumerable:false,writable:false,value:function(){d=null}}}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]==="function"){arguments[0].call(s);e=undefined}break;case 2:s.element=
i;break;default:throw new SyntaxError("[object Layer](id, element): Invalid number of parameters.");}if(s.element===null)s.element=document.createElement("canvas");q+=1;return s};l={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Layer]"}},__getBounds:{enumerable:true,configurable:true,value:function(){var e=doodle.geom.Rectangle();return function(){return e.compose(0,0,this.width,this.height)}}()}};h=doodle.Layer.isLayer=function(e){if(!e||typeof e!=="object"||
typeof e.toString!=="function")return false;return e.toString()==="[object Layer]"};doodle.Layer.inheritsLayer=function(e){for(;e;)if(h(e))return true;else{if(typeof e!=="object")return false;e=Object.getPrototypeOf(e)}return false}})();
(function(){var l,q=0,h=0,j=doodle.EventDispatcher.dispatcher_queue,e,i,s,k,a,d,c,g,b,f=doodle.utils.create_scene_path,o=doodle.Layer.isLayer,n=doodle.utils.get_element,r=doodle.utils.get_element_property,t=doodle.utils.set_element_property,v=doodle.Layer,x=doodle.Event,p=doodle.MouseEvent,m=doodle.MouseEvent(""),A=doodle.KeyboardEvent(""),z=x(doodle.Event.ENTER_FRAME),C=doodle.Event.ENTER_FRAME;doodle.Display=function(u){var w,D;if(u&&typeof u!=="function"){u=n(u);D=r(u,"id")}D=typeof D==="string"?
D:"display"+String("00"+q).slice(-2);w=Object.create(doodle.ElementNode(undefined,D));Object.defineProperties(w,l);Object.defineProperties(w,function(){function B(y){var F=E;T(y,R,F,F.length,y.offsetX,y.offsetY,Q)}function G(y){var F=E,H=F.length,K,P;L=K=y.offsetX;M=P=y.offsetY;U(y,R,F,H,K,P,Q)}function I(y){V(y,R,E,O,O.length,Q)}var N=0,J=0,O=w.children,E=[],L=0,M=0,Q=w,R=m,T=d,U=c,V=g;return{mouseX:{enumerable:true,configurable:false,get:function(){return L}},mouseY:{enumerable:true,configurable:false,
get:function(){return M}},width:{get:function(){return N},set:function(y){var F=O.length;t(this.element,"width",y+"px");for(N=y;F--;)O[F].width=y;return y}},height:{get:function(){return J},set:function(y){var F=O.length;t(this.element,"height",y+"px");for(J=y;F--;)O[F].height=y;return y}},__addDomElement:{enumerable:false,writable:false,value:function(y){t(y,"position","relative");var F=r(y,"width","int",false)||y.width,H=r(y,"height","int",false)||y.height;if(typeof F==="number")this.width=F;if(typeof H===
"number")this.height=H;y.addEventListener(p.MOUSE_MOVE,G,false);y.addEventListener(p.MOUSE_OUT,I,false);y.addEventListener(p.CLICK,B,false);y.addEventListener(p.DOUBLE_CLICK,B,false);y.addEventListener(p.MOUSE_DOWN,B,false);y.addEventListener(p.MOUSE_UP,B,false);y.addEventListener(p.CONTEXT_MENU,B,false);y.addEventListener(p.MOUSE_WHEEL,B,false)}},__removeDomElement:{enumerable:false,writable:false,value:function(y){y.removeEventListener(p.MOUSE_MOVE,G,false);y.removeEventListener(p.MOUSE_OUT,I,false);
y.removeEventListener(p.CLICK,B,false);y.removeEventListener(p.DOUBLE_CLICK,B,false);y.removeEventListener(p.MOUSE_DOWN,B,false);y.removeEventListener(p.MOUSE_UP,B,false);y.removeEventListener(p.CONTEXT_MENU,B,false);y.removeEventListener(p.MOUSE_WHEEL,B,false)}},frameRate:function(){var y=false,F;return{get:function(){return y},set:function(H){if(H===0||H===false){y=false;F!==undefined&&clearInterval(F)}else if(H!==y){F!==undefined&&clearInterval(F);F=setInterval(i.bind(this),1E3/H);y=H}}}}(),allChildren:{enumerable:true,
configurable:false,get:function(){return E}},__sortAllChildren:{enumerable:false,configurable:false,value:function(){f(this,E,true).reverse()}},getNodesUnderPoint:{enumerable:true,configurable:false,value:function(y){var F=[],H=E,K=H.length,P=y.x;y=y.y;for(var S;K--;){S=H[K];S.__getBounds(this).contains(P,y)&&F.push(S)}return F}},addChildAt:{enumerable:true,configurable:false,value:function(){var y=w.addChildAt;return function(F,H){F.width=this.width;F.height=this.height;this.element.appendChild(F.element);
return y.call(this,F,H)}}()},removeChildAt:{enumerable:true,writable:false,configurable:false,value:function(){var y=w.removeChildAt;return function(F){this.element.removeChild(this.children[F].element);return y.call(this,F)}}()},swapChildrenAt:{enumerable:true,writable:false,configurable:false,value:function(){var y=w.swapChildrenAt;return function(F,H){var K=this.children;F>H?this.element.insertBefore(K[H].element,K[F].element):this.element.insertBefore(K[F].element,K[H].element);return y.call(this,
F,H)}}()}}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]==="function"){arguments[0].call(u);u=undefined}else w.element=u;break;default:throw new SyntaxError("[object Display](element): Invalid number of parameters.");}w.root=w;q+=1;e(w);a.call(w);return w};l={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Display]"}},addLayer:{value:function(u){return this.addChild(v(u))}},removeLayer:{value:function(u){return this.removeChildById(u)}},
__getBounds:{enumerable:false,configurable:true,value:function(){var u=doodle.geom.Rectangle();return function(){return u.compose(0,0,this.width,this.height)}}()}};e=function(u){u.addEventListener(doodle.Event.ADDED,a.bind(u));u.addEventListener(doodle.Event.REMOVED,a.bind(u));document.addEventListener(doodle.KeyboardEvent.KEY_PRESS,b.bind(u),false);document.addEventListener(doodle.KeyboardEvent.KEY_DOWN,b.bind(u),false);document.addEventListener(doodle.KeyboardEvent.KEY_UP,b.bind(u),false)};i=function(){s(this);
j.forEach(function(u){if(u.hasEventListener(C)){z.__setTarget(u);u.handleEvent(z)}});k.call(this,this);h+=1};s=function(u){u.children.forEach(function(w){var D=w.context;D.save();D.setTransform(1,0,0,1,0,0);D.clearRect(0,0,w.width,w.height);D.restore()})};k=function(u,w){var D=this,B;u.children.forEach(function(G){if(G.visible){w=w||G.context;B=G.transform.toArray();w.save();w.transform(B[0],B[1],B[2],B[3],B[4],B[5]);if(!o(G))if(G.alpha!==1)w.globalAlpha=G.alpha;typeof G.__draw==="function"&&G.__draw(w);
k.call(D,G,w);w.restore()}})};a=function(){s(this);k.call(this,this)};d=function(u,w,D,B,G,I,N){for(;B--;)if(D[B].__getBounds(N).contains(G,I)){D[B].dispatchEvent(w.__copyMouseEventProperties(u,null));return true}return false};c=function(u,w,D,B,G,I,N){for(var J;B--;){J=D[B];if(J.__getBounds(N).contains(G,I)){if(!J.__pointInBounds){J.__pointInBounds=true;J.dispatchEvent(w.__copyMouseEventProperties(u,null,"mouseover"));J.dispatchEvent(w.__copyMouseEventProperties(u,null,"mouseenter"));return true}J.dispatchEvent(w.__copyMouseEventProperties(u,
null));return true}else if(J.__pointInBounds){J.__pointInBounds=false;J.dispatchEvent(w.__copyMouseEventProperties(u,null,"mouseout"));J.dispatchEvent(w.__copyMouseEventProperties(u,null,"mouseleave"));return true}}};g=function(u,w,D,B,G,I){if(G===0)I.__pointInBounds=false;else{I=B[G-1];for(G=D.length;G--;)D[G].__pointInBounds=false}I.dispatchEvent(w.__copyMouseEventProperties(u,null,"mouseout"));I.dispatchEvent(w.__copyMouseEventProperties(u,null,"mouseleave"));return true};b=function(u){this.broadcastEvent(A.__copyKeyboardEventProperties(u,
null));return true};doodle.Display.isDisplay=function(u){if(!u||typeof u!=="object"||typeof u.toString!=="function")return false;return u.toString()==="[object Display]"}})();
